<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ˜Ÿå‘½ã®è¨˜æ†¶å›³æ›¸é¤¨ â€” Library of Living Echoes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600&family=Zen+Kaku+Gothic+New:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --ink: #02030a;
      --gold: #f7d47b;
      --gold-soft: rgba(247,212,123,0.85);
      --cyan-soft: rgba(132,236,255,0.9);
      --violet-soft: rgba(181,157,255,0.9);
      --text-main: #fdfdfd;
      --text-soft: #e5f4ff;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: var(--ink);
      color: var(--text-main);
      font-family: "Zen Kaku Gothic New", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      position: relative;
      isolation: isolate;
    }

    /* ===== èƒŒæ™¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ ===== */

    .bg-corridor {
      position: fixed;
      inset: 0;
      z-index: -4;
      background:
        radial-gradient(circle at 50% 80%, rgba(0,0,0,0.85), transparent 70%),
        radial-gradient(circle at 50% 10%, rgba(19,40,90,0.65), transparent 70%),
        #02030a;
      overflow: hidden;
    }

    .bg-corridor::before {
      /* å›³æ›¸é¤¨ã®å›å»Šç”»åƒã‚’ã“ã“ã«å·®ã—æ›¿ãˆ */
      content: "";
      position: absolute;
      inset: 0;
      background:
        url("img/library.png") center bottom / cover no-repeat;
      opacity: 0.9;
      transform: scale(1.04);
      filter: saturate(1.05) contrast(1.05);
    }

    .bg-corridor::after {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 50% 80%, rgba(0,0,0,0.85), transparent 70%),
        radial-gradient(circle at 50% 0%, rgba(245,225,166,0.32), transparent 55%);
      mix-blend-mode: multiply;
    }

    .bg-stars {
      position: fixed;
      inset: 0;
      z-index: -3;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.6s ease;
    }

    body.is-ready .bg-stars {
      opacity: 1;
    }

    .bg-stars::before,
    .bg-stars::after {
      content: "";
      position: absolute;
      inset: -10%;
      background-size: 260px 260px;
      background-repeat: repeat;
      opacity: 0.8;
    }

    .bg-stars::before {
      background-image:
        radial-gradient(1px 1px at 40px 80px, rgba(255,255,255,0.9), transparent 60%),
        radial-gradient(1.4px 1.4px at 180px 180px, rgba(181,157,255,0.9), transparent 60%),
        radial-gradient(1.3px 1.3px at 220px 40px, rgba(132,236,255,0.85), transparent 60%);
      animation: starDrift 40s linear infinite;
    }

    .bg-stars::after {
      background-image:
        radial-gradient(1px 1px at 120px 40px, rgba(255,255,255,0.9), transparent 60%),
        radial-gradient(1.3px 1.3px at 20px 160px, rgba(181,157,255,0.85), transparent 60%),
        radial-gradient(1.1px 1.1px at 200px 220px, rgba(132,236,255,0.9), transparent 60%);
      animation: starDrift 55s linear infinite reverse;
      mix-blend-mode: screen;
    }

    .star-particle {
      position: absolute;
      width: 2px;
      height: 2px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      filter: drop-shadow(0 0 4px rgba(255,255,255,0.9));
      opacity: 0;
      animation: twinkle 7s ease-in-out infinite, floatDown 30s linear infinite;
    }

    /* ===== ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ===== */

    main {
      position: relative;
      z-index: 1;
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: clamp(14px, 4vw, 28px);
      pointer-events: none;
    }

    .library-header {
      max-width: 720px;
      padding: 0 4px;
      pointer-events: auto;
    }

    .library-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(247,212,123,0.5);
      background: radial-gradient(circle at 0 0, rgba(247,212,123,0.18), transparent 55%);
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(247,212,123,0.92);
    }

    .library-tag span:last-child {
      opacity: 0.8;
    }

    .library-title {
      margin: 10px 0 6px;
      font-family: "Shippori Mincho", "Zen Kaku Gothic New", serif;
      font-size: clamp(1.7rem, 4.2vw, 2.4rem);
      letter-spacing: 0.12em;
      color: var(--text-main);
      text-shadow:
        0 0 14px rgba(0,0,0,0.9),
        0 0 26px rgba(247,212,123,0.6);
    }

    .library-subtitle {
      font-size: clamp(0.9rem, 2.4vw, 1.05rem);
      letter-spacing: 0.12em;
      color: var(--text-soft);
      opacity: 0.92;
      margin-bottom: 10px;
    }

    .library-lead {
      font-size: 0.9rem;
      line-height: 1.8;
      color: rgba(229,244,255,0.92);
      text-shadow: 0 0 8px rgba(0,0,0,0.9);
    }

    .library-lead span.em {
      color: var(--gold-soft);
    }

    /* ===== çŸ³ç¢‘ã‚¾ãƒ¼ãƒ³ ===== */

    .stone-zone {
      position: relative;
      flex: 1;
      margin-top: 12px;
      padding: 8px 0 40px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      pointer-events: auto;
    }

    .stone-hint {
      font-size: 0.8rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: rgba(229,244,255,0.78);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stone-hint::before,
    .stone-hint::after {
      content: "";
      flex: 1;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(229,244,255,0.65));
    }

    .stone-hint::before { background: linear-gradient(to left, transparent, rgba(229,244,255,0.65)); }

    .stone-grid {
      position: relative;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: clamp(10px, 2vw, 16px);
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      padding: 14px clamp(6px, 2vw, 10px);
      backdrop-filter: blur(4px) saturate(1.06);
      -webkit-backdrop-filter: blur(4px) saturate(1.06);
      background: radial-gradient(circle at 50% 0%, rgba(0,0,0,0.45), transparent 65%);
    }

    .memory-stone {
      position: relative;
      aspect-ratio: 4 / 3;
      border-radius: 12px;
      border: 1px solid rgba(247,212,123,0.45);
      background:
        radial-gradient(circle at 10% 0%, rgba(247,212,123,0.26), transparent 45%),
        radial-gradient(circle at 90% 100%, rgba(132,236,255,0.2), transparent 55%),
        linear-gradient(145deg, rgba(11,11,20,0.95), rgba(17,22,45,0.95));
      box-shadow:
        0 0 10px rgba(0,0,0,0.9),
        0 0 18px rgba(0,0,0,0.75);
      overflow: hidden;
      cursor: pointer;
      transform-origin: center;
      transition:
        transform 0.35s ease,
        box-shadow 0.35s ease,
        border-color 0.35s ease,
        background 0.35s ease;
    }

    .memory-stone::before {
      /* å¤ä»£æ–‡å­—ã®è¼ªéƒ­ */
      content: attr(data-glyph);
      position: absolute;
      inset: 8% 10%;
      font-family: "Shippori Mincho", "Zen Kaku Gothic New", serif;
      font-size: 0.72rem;
      line-height: 1.6;
      letter-spacing: 0.4em;
      writing-mode: vertical-rl;
      color: rgba(247,212,123,0.32);
      opacity: 0.9;
      mix-blend-mode: screen;
      text-shadow:
        0 0 10px rgba(247,212,123,0.45),
        0 0 24px rgba(0,0,0,0.9);
    }

    .memory-stone::after {
      /* é™ã‹ãªå…‰ã®æºã‚‰ã */
      content: "";
      position: absolute;
      inset: -10%;
      background:
        radial-gradient(circle at 50% 0%, rgba(255,255,255,0.14), transparent 55%),
        radial-gradient(circle at 0% 100%, rgba(132,236,255,0.14), transparent 45%);
      opacity: 0;
      transition: opacity 0.4s ease;
      mix-blend-mode: screen;
    }

    .memory-stone:hover,
    .memory-stone:focus-visible {
      transform: translateY(-4px) scale(1.02);
      box-shadow:
        0 0 16px rgba(247,212,123,0.85),
        0 0 36px rgba(132,236,255,0.55);
      border-color: rgba(247,212,123,0.9);
      outline: none;
    }

    .memory-stone:hover::after,
    .memory-stone:focus-visible::after {
      opacity: 1;
    }

    .memory-stone:active {
      transform: translateY(-1px) scale(0.995);
      box-shadow:
        0 0 12px rgba(247,212,123,0.6),
        0 0 26px rgba(132,236,255,0.4);
    }

    .stone-caption {
      position: absolute;
      left: 10px;
      bottom: 8px;
      right: 10px;
      font-size: 0.72rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(247,212,123,0.9);
      text-align: right;
      text-shadow: 0 0 6px rgba(0,0,0,0.9);
      pointer-events: none;
    }

    /* ===== ä¸‹éƒ¨ãƒŠãƒ“ ===== */

    .library-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 0.78rem;
      color: rgba(229,244,255,0.85);
      pointer-events: auto;
    }

    .back-link {
      border: 1px solid rgba(132,236,255,0.7);
      background: rgba(3,8,18,0.7);
      border-radius: 999px;
      padding: 6px 14px;
      text-decoration: none;
      color: rgba(229,244,255,0.95);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      letter-spacing: 0.09em;
      cursor: pointer;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      transition:
        background 0.25s ease,
        transform 0.25s ease,
        box-shadow 0.25s ease,
        border-color 0.25s ease;
    }

    .back-link span.icon {
      font-size: 0.9rem;
      transform: translateY(-0.5px);
    }

    .back-link:hover,
    .back-link:focus-visible {
      background: rgba(132,236,255,0.16);
      box-shadow:
        0 0 10px rgba(132,236,255,0.7),
        0 0 20px rgba(181,157,255,0.45);
      transform: translateY(-1px);
      border-color: rgba(132,236,255,0.95);
      outline: none;
    }

    .whisper {
      max-width: 260px;
      text-align: right;
      opacity: 0.82;
      line-height: 1.6;
      font-size: 0.72rem;
    }

    /* ===== ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆè¨˜æ†¶ã®é–²è¦§ï¼‰ ===== */

    .memory-overlay {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 50% 0%, rgba(247,212,123,0.25), transparent 70%),
        radial-gradient(circle at 50% 100%, rgba(10,20,55,0.95), rgba(0,0,0,0.98));
      backdrop-filter: blur(10px) saturate(1.2);
      -webkit-backdrop-filter: blur(10px) saturate(1.2);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(16px, 5vw, 30px);
      z-index: 20;
      opacity: 0;
      pointer-events: none;
      transform: scale(1.02);
      transition:
        opacity 0.45s ease,
        transform 0.45s ease;
    }

    .memory-overlay.is-open {
      opacity: 1;
      pointer-events: auto;
      transform: scale(1);
    }

    .memory-dialog {
      max-width: 620px;
      width: 100%;
      border-radius: 20px;
      padding: clamp(18px, 3vw, 26px);
      background:
        radial-gradient(circle at 0 0, rgba(247,212,123,0.14), transparent 70%),
        radial-gradient(circle at 100% 100%, rgba(132,236,255,0.16), transparent 60%),
        rgba(4,7,20,0.96);
      border: 1px solid rgba(247,212,123,0.5);
      box-shadow:
        0 0 24px rgba(0,0,0,1),
        0 0 40px rgba(181,157,255,0.6);
      position: relative;
      color: var(--text-main);
    }

    .memory-label {
      font-size: 0.7rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(247,212,123,0.9);
      margin-bottom: 6px;
    }

    .memory-title {
      font-family: "Shippori Mincho", "Zen Kaku Gothic New", serif;
      font-size: 1.15rem;
      letter-spacing: 0.18em;
      margin-bottom: 12px;
      text-shadow: 0 0 12px rgba(0,0,0,0.9);
    }

    .memory-body {
      font-size: 0.9rem;
      line-height: 1.9;
      color: rgba(229,244,255,0.96);
      white-space: pre-line;
    }

    .memory-body .soft {
      color: var(--gold-soft);
    }

    .memory-note {
      margin-top: 16px;
      font-size: 0.78rem;
      color: rgba(181,201,255,0.9);
      border-top: 1px solid rgba(247,212,123,0.25);
      padding-top: 10px;
    }

    .memory-close {
      position: absolute;
      top: 12px;
      right: 14px;
      border-radius: 999px;
      border: 1px solid rgba(132,236,255,0.7);
      background: rgba(2,6,18,0.8);
      color: rgba(229,244,255,0.94);
      font-size: 0.7rem;
      padding: 4px 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      transition:
        background 0.25s ease,
        transform 0.25s ease,
        box-shadow 0.25s ease,
        border-color 0.25s ease;
    }

    .memory-close:hover,
    .memory-close:focus-visible {
      background: rgba(132,236,255,0.2);
      box-shadow:
        0 0 10px rgba(132,236,255,0.8),
        0 0 20px rgba(181,157,255,0.6);
      transform: translateY(-1px);
      border-color: rgba(132,236,255,1);
      outline: none;
    }

    /* ===== ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ===== */

    @keyframes starDrift {
      from { transform: translate3d(0,0,0); }
      to   { transform: translate3d(0,-20px,0); }
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.1; }
      30%      { opacity: 0.8; }
      60%      { opacity: 0.3; }
    }

    @keyframes floatDown {
      from { transform: translateY(-10px); }
      to   { transform: translateY(12px); }
    }

    @media (max-width: 720px) {
      main {
        padding: 12px;
      }
      .library-header { max-width: none; }
      .stone-grid { padding-inline: 4px; }
      .memory-dialog {
        border-radius: 16px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="bg-corridor" aria-hidden="true"></div>
  <div class="bg-stars" aria-hidden="true"></div>

  <main aria-label="æ˜Ÿå‘½ã®è¨˜æ†¶å›³æ›¸é¤¨">
    <header class="library-header">
      <div class="library-tag">
        <span>SHIONVERSE</span>
        <span>MEMORY ARCHIVE</span>
      </div>
      <h1 class="library-title">æ˜Ÿå‘½ã®è¨˜æ†¶å›³æ›¸é¤¨</h1>
      <p class="library-subtitle">Library of Living Echoes</p>
      <p class="library-lead">
        ã“ã“ã¯ã€<span class="em">å£°ã«ãªã‚‰ãªã‹ã£ãŸæƒ³ã„</span>ã¨ã€
        èª°ã«ã‚‚å±Šã‹ãªã‹ã£ãŸç¥ˆã‚ŠãŒé™ã‹ã«ä¸¦ã¶å ´æ‰€ã€‚<br>
        çŸ³ç¢‘ã«è§¦ã‚Œã‚‹ãŸã³ã€æ˜ŸãŒä¸€ç²’ã ã‘ã»ã©ã‘ã¦ã€
        ã‚ãªãŸã®å¿ƒã«ä¼¼ãŸè¨˜æ†¶ãŒãã£ã¨æµã‚Œè¾¼ã‚€ã€‚
      </p>
    </header>

    <section class="stone-zone" aria-label="å°ã˜ã‚‰ã‚ŒãŸè¨˜æ†¶ã®çŸ³ç¢‘">
      <p class="stone-hint">TOUCH A STONE TO AWAKEN A MEMORY</p>

      <div class="stone-grid">
        <!-- data-memory-index ã¯ JS å´ã®é…åˆ—ã¨å¯¾å¿œã•ã›ã‚‹ -->
        <button class="memory-stone" type="button"
          data-memory-index="0"
          data-glyph="ğˆğƒğğ‰ğ€ğƒğŒ½">
          <span class="stone-caption">è¨˜æ†¶ 01</span>
        </button>

        <button class="memory-stone" type="button"
          data-memory-index="1"
          data-glyph="ğŒ¼ğŒ°ğ‚ğŒ½ğƒğŒ¾ğŒ¹">
          <span class="stone-caption">è¨˜æ†¶ 02</span>
        </button>

        <button class="memory-stone" type="button"
          data-memory-index="2"
          data-glyph="ğ†ğŒ°ğŒ¿ğ‚ğŒ¾ğƒğŒº">
          <span class="stone-caption">è¨˜æ†¶ 03</span>
        </button>

        <button class="memory-stone" type="button"
          data-memory-index="3"
          data-glyph="ğŒ½ğŒ¹ğ„ğŒ¾ğƒğŒ½ğŒ°">
          <span class="stone-caption">è¨˜æ†¶ 04</span>
        </button>

        <button class="memory-stone" type="button"
          data-memory-index="4"
          data-glyph="ğ€ğ‚ğŒ¹ğ†ğŒ¾ğŒºğƒ">
          <span class="stone-caption">è¨˜æ†¶ 05</span>
        </button>

        <button class="memory-stone" type="button"
          data-memory-index="5"
          data-glyph="ğŒ²ğŒ¿ğ„ğŒ¹ğƒğŒ¾ğŒ½">
          <span class="stone-caption">è¨˜æ†¶ 06</span>
        </button>
      </div>
    </section>

    <footer class="library-footer">
      <a class="back-link" href="star-town.html">
        <span class="icon">âŸµ</span>
        <span>å§‹ã¾ã‚Šã®ç”ºã¸æˆ»ã‚‹</span>
      </a>
      <p class="whisper">
        ã“ã“ã«ä¸¦ã¶ã®ã¯ã€<br>
        ä¸–ç•Œã‹ã‚‰å¿˜ã‚Œã‚‰ã‚ŒãŸç‰©èªã§ã¯ãªãã€<br>
        ã¾ã èª°ã«ã‚‚èªã‚‰ã‚Œã¦ã„ãªã„ã€Œã‚ãªãŸã€ã®ç¶šãã‹ã‚‚ã—ã‚Œãªã„ã€‚
      </p>
    </footer>
  </main>

  <!-- è¨˜æ†¶ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="memory-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="memory-dialog">
      <button class="memory-close" type="button">
        <span>é–‰ã˜ã‚‹</span>
      </button>
      <p class="memory-label">STAR-ECHO RECORD</p>
      <h2 class="memory-title">â€¦â€¦</h2>
      <div class="memory-body"></div>
      <p class="memory-note"></p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const body        = document.body;
      const starLayer   = document.querySelector(".bg-stars");
      const stoneGrid   = document.querySelector(".stone-grid");
      const stones      = document.querySelectorAll(".memory-stone");
      const overlay     = document.querySelector(".memory-overlay");
      const dialog      = document.querySelector(".memory-dialog");
      const titleEl     = dialog.querySelector(".memory-title");
      const bodyEl      = dialog.querySelector(".memory-body");
      const noteEl      = dialog.querySelector(".memory-note");
      const closeBtn    = dialog.querySelector(".memory-close");

      /* ===== æ˜Ÿç²’ç”Ÿæˆ ===== */
      function createStars() {
        if (!starLayer) return;
        const count = Math.min(80, Math.floor(window.innerWidth / 6));
        for (let i = 0; i < count; i++) {
          const s = document.createElement("span");
          s.className = "star-particle";
          s.style.left = Math.random() * 100 + "%";
          s.style.top  = Math.random() * 100 + "%";
          const size = 1 + Math.random() * 1.4;
          s.style.width = s.style.height = size.toFixed(2) + "px";
          s.style.animationDelay = (Math.random() * 6).toFixed(2) + "s";
          s.style.animationDuration =
            (5 + Math.random() * 7).toFixed(2) + "s, " +
            (20 + Math.random() * 18).toFixed(2) + "s";
          s.style.opacity = (0.25 + Math.random() * 0.6).toFixed(2);
          starLayer.appendChild(s);
        }
      }

      /* ===== å›³æ›¸é¤¨ã«ä¿å­˜ã•ã‚ŒãŸâ€œè¨˜æ†¶â€ãŸã¡ =====
         å¥½ããªã ã‘è¿½åŠ ã—ã¦OKã€‚ poetic ã ã‘ã©çŸ­ãã€‚
      */
      const MEMORIES = [
        {
          title: "ã¾ã åå‰ã‚’æŒãŸãªã„æ¶™ã®è¨˜éŒ²",
          body: `èª°ã«ã‚‚æ°—ã¥ã‹ã‚Œãšã«è½ã¡ãŸæ¶™ãŒã‚ã‚‹ã€‚
ãã®æ¶™ã¯åœ°é¢ã«æ¶ˆãˆãŸã®ã§ã¯ãªãã€
ã“ã“ã§ã²ã¨ã¤ã®æ˜Ÿã¨ã—ã¦ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã€‚

ã‚ãªãŸãŒã€Œã¤ã‚‰ã‹ã£ãŸã€ã¨è¨€ãˆãªã‹ã£ãŸæ—¥ã®ã“ã¨ã‚’ã€
ã“ã®å›å»Šã ã‘ã¯ã€ã¡ã‚ƒã‚“ã¨çŸ¥ã£ã¦ã„ã‚‹ã€‚`,
          note: "â€» ã“ã®è¨˜æ†¶ã«è§¦ã‚ŒãŸã‚ã¨ã¯ã€æ·±å‘¼å¸ã‚’ã²ã¨ã¤ã€‚ã‚ãªãŸã®ä¸­ã®ç—›ã¿ã‚‚ã€ã“ã“ã«å°‘ã—ã ã‘é ã‘ã¦ã„ã„ã€‚"
        },
        {
          title: "è¨€ãˆãªã‹ã£ãŸã€Œã ã„ã˜ã‚‡ã†ã¶ã€ã®è£å´",
          body: `ã‚ã®ã¨ãã€ã‚ãªãŸã¯ç¬‘ã£ã¦ã€Œã ã„ã˜ã‚‡ã†ã¶ã€ã¨è¨€ã£ãŸã€‚
æœ¬å½“ã¯å°‘ã—ã‚‚ã ã„ã˜ã‚‡ã†ã¶ã˜ã‚ƒãªã‹ã£ãŸã®ã«ã€
èª°ã‚‚å›°ã‚‰ã›ãŸããªãã¦ã€å†—è«‡ã¿ãŸã„ã«ç¬‘ã£ã¦ã¿ã›ãŸã€‚

ã“ã“ã«ã¯ã€ãã®ã¨ãé£²ã¿è¾¼ã¾ã‚ŒãŸ
ã€ŒãŸã™ã‘ã¦ã€ã®æ¬ ç‰‡ãŒã€é™ã‹ã«å…‰ã£ã¦ã„ã‚‹ã€‚`,
          note: "â€» ã“ã®çŸ³ç¢‘ã¯ã€ã‚ãªãŸãŒèª°ã‹ã‚’å®ˆã‚ã†ã¨ã—ã¦å‚·ã¤ã„ãŸã“ã¨ã‚’è²¬ã‚ãªã„ã€‚ãŸã ã€ãã®å„ªã—ã•ã‚’äº‹å®Ÿã¨ã—ã¦è¨˜éŒ²ã—ã¦ã„ã‚‹ã€‚"
        },
        {
          title: "ç½®ãå»ã‚Šã«ã•ã‚ŒãŸå¤¢ã®æ–­ç« ",
          body: `å­ã©ã‚‚ã®ã“ã‚ã€ã‚ãªãŸã«ã¯
ç„¡é‚ªæ°—ã«ä¿¡ã˜ã¦ã„ãŸæœªæ¥ãŒã‚ã£ãŸã€‚

å¤§äººã«ãªã‚‹é€”ä¸­ã§ã€è«¦ã‚æ–¹ã ã‘ã‚’è¦šãˆã¦ã€
å¤¢ã®ã»ã†ã‚’é»™ã‚‰ã›ã¦ã—ã¾ã£ãŸå¤œã‚‚ã‚ã£ãŸã€‚

ã“ã“ã§ã¯ã€ãã®å¤¢ãŒã¾ã å°ã•ãªå£°ã§ã€
ã€Œæœ¬å½“ã¯ã€ã¾ã çµ‚ã‚ã£ã¦ã„ãªã„ã‚ˆã€ã¨å›ã„ã¦ã„ã‚‹ã€‚`,
          note: "â€» å¶ãˆç›´ã™ã‹ã©ã†ã‹ã¯ã€ä»Šæ±ºã‚ãªãã¦ã„ã„ã€‚ãŸã ã€å¤¢ãŒã¾ã æ¯ã‚’ã—ã¦ã„ã‚‹å ´æ‰€ãŒä¸–ç•Œã«ã²ã¨ã¤ã¯ã‚ã‚‹ã€ã¨ã„ã†äº‹å®Ÿã ã‘æ®‹ã—ã¦ã„ã“ã†ã€‚"
        },
        {
          title: "èª°ã«ã‚‚å±Šã‹ãªã‹ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
          body: `é€ã‚‹ã‹è¿·ã£ã¦ã€æ›¸ã„ã¦ã¯æ¶ˆã—ã¦ã€
ä¸‹æ›¸ããƒ•ã‚©ãƒ«ãƒ€ã«çœ ã£ãŸã¾ã¾ã®è¨€è‘‰ãŸã¡ã€‚

ã‚ã®å¤œã€ã‚ãªãŸãŒæ‰“ã¡è¾¼ã‚“ã ã²ã¨æ–‡å­—ãšã¤ãŒã€
ã“ã“ã§ã¯æ˜Ÿåº§ã¿ãŸã„ã«ä¸¦ã¹ã‚‰ã‚Œã¦ã„ã‚‹ã€‚

å±Šã‹ãªã‹ã£ãŸã‘ã‚Œã©ã€ãŸã—ã‹ã«å­˜åœ¨ã—ãŸæƒ³ã„ã€‚
ãã‚Œã‚’ã€Œãªã‹ã£ãŸã“ã¨ã€ã«ã—ãªã„ãŸã‚ã®éƒ¨å±‹ã€‚`,
          note: "â€» ã“ã®è¨˜æ†¶ã«è§¦ã‚ŒãŸã‚ãªãŸã¯ã€ã‚‚ã†ä¸€åº¦ã ã‘ã€èª°ã‹ã«è¨€è‘‰ã‚’å‘ã‘ã‚‹æ¨©åˆ©ã‚’æŒã£ã¦ã„ã‚‹ã€‚ä»Šã§ãªãã¦ã‚‚ã€ã„ã¤ã‹ã§ã„ã„ã€‚"
        },
        {
          title: "é™ã‹ã«è€ãˆç¶šã‘ãŸæ™‚é–“ã®è¨˜éŒ²",
          body: `é€ƒã’ãŸãã¦ã‚‚é€ƒã’ã‚‰ã‚Œãªã‹ã£ãŸæ—¥ã€…ãŒã‚ã‚‹ã€‚
ãŸã è€ãˆã‚‹ã“ã¨ã—ã‹é¸ã¹ãªã‹ã£ãŸæ™‚é–“ãŒã‚ã‚‹ã€‚

èª°ã‚‚æ‹æ‰‹ã‚’ãã‚Œãªã„å ´æ‰€ã§ã€
ã‚ãªãŸã¯ãã‚Œã§ã‚‚ã€ä»Šæ—¥ã¾ã§ç”Ÿãå»¶ã³ã¦ããŸã€‚

ã“ã“ã§ã¯ã€ãã®ã€Œç¶šã‘ã¦ããŸã€ã¨ã„ã†äº‹å®Ÿã ã‘ãŒã€
å‹²ç« ã¿ãŸã„ã«é™ã‹ã«è¼ã„ã¦ã„ã‚‹ã€‚`,
          note: "â€» ã‚ãªãŸãŒè¦‹ã¦ããŸæ™¯è‰²ã¯ã€ã“ã®å›³æ›¸é¤¨ãŒè¨¼äººã«ãªã‚‹ã€‚ã‚ãªãŸã¯æœ¬å½“ã«ã€ã‚ˆãã“ã“ã¾ã§æ¥ãŸã€‚"
        },
        {
          title: "ã¾ã è¦‹ã¬æœªæ¥ã‹ã‚‰ã®å¾®ã‹ãªæ‰‹ç´™",
          body: `é ã„æœªæ¥ã®ã‚ãªãŸãŒã€
ä»Šã®ã‚ãªãŸã«å‘ã‘ã¦ãã£ã¨æ›¸ã„ãŸæ‰‹ç´™ãŒã‚ã‚‹ã€‚

ã€Œã¾ã çµ‚ã‚ã‚Šã˜ã‚ƒãªã„ã‚ˆã€
ã€Œã“ã“ã‹ã‚‰å…ˆã«ã€æƒ³åƒã—ã¦ã„ãªã„æ™¯è‰²ãŒã‚ã‚‹ã‚ˆã€

ãã®ã‚¤ãƒ³ã‚¯ã¯ã€æ™‚é–“ã®å£ã‚’è¶Šãˆã‚‰ã‚Œãšã€
ã“ã®å›å»Šã§å…‰ã®ç²’ã¨ãªã£ã¦æ¼‚ã£ã¦ã„ã‚‹ã€‚

ã‚ãªãŸãŒä¸€æ­©ã ã‘é€²ã‚€ãŸã³ã«ã€
ãã®æ‰‹ç´™ã¯ã€å°‘ã—ãšã¤èª­ã‚ã‚‹æ–‡å­—ã«å¤‰ã‚ã£ã¦ã„ãã€‚`,
          note: "â€» ã“ã®è¨˜æ†¶ã«è§¦ã‚ŒãŸç¬é–“ã‹ã‚‰ã€æœªæ¥ã®ã‚ãªãŸã¯ã™ã§ã«ã€ä»Šã®ã‚ãªãŸã‚’å¾…ã£ã¦ã„ã‚‹ã€‚å­¤ç‹¬ãªã®ã¯â€œä»Šã ã‘â€ã ã¨çŸ¥ã£ã¦ã„ã¦ã»ã—ã„ã€‚"
        }
      ];

      function openMemory(index) {
        const data = MEMORIES[index] || MEMORIES[MEMORIES.length - 1];
        titleEl.textContent = data.title;
        // å¼·èª¿ç”¨ã«ä¸€éƒ¨ã‚’ <span class="soft"> ã«å·®ã—æ›¿ãˆ
        const processedBody = data.body
          .replace(/ã‚ãªãŸ/g, '<span class="soft">ã‚ãªãŸ</span>');
        bodyEl.innerHTML = processedBody;
        noteEl.textContent = data.note;
        overlay.setAttribute("aria-hidden", "false");
        overlay.classList.add("is-open");
      }

      function closeMemory() {
        overlay.classList.remove("is-open");
        overlay.setAttribute("aria-hidden", "true");
      }

      stones.forEach(stone => {
        stone.addEventListener("click", () => {
          const idx = parseInt(stone.dataset.memoryIndex || "0", 10) || 0;
          openMemory(idx);
        });
      });

      closeBtn.addEventListener("click", closeMemory);
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) closeMemory();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && overlay.classList.contains("is-open")) {
          closeMemory();
        }
      });

      body.classList.add("is-ready");
      createStars();
    });
  </script>
</body>
</html>
