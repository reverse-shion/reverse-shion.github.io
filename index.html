<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0b1a" />
  <meta name="description" content="Re:verse Shion â€• è©©éŸ»æ€æƒ³ï¼ˆè¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ä¸–ç•Œï¼‰ã¨ç‰©èªTAROT BREAKERã®çµ±åˆãƒãƒ–ã€‚èª­ã‚€ãƒ»è´ããƒ»å­¦ã¶ãƒ»å—ã‘å–ã‚‹ã‚’ã²ã¨ã¤ã«ã€‚è¨€è‘‰ã¯ç¥ˆã‚Šã®æ§‹æ–‡ã€‚ç‰©èªã¯ãã®å®Ÿæ¼”">
  <meta name="keywords" content="è©©éŸ»æ€æƒ³, TAROT BREAKER, ã‚·ã‚ªãƒ³, å“²å­¦, è¨€è‘‰, æ§‹æ–‡, ç‰©èª, LINEå ã„" />
  <link rel="canonical" href="https://reverse-shion.github.io/" />
  <meta http-equiv="Content-Language" content="ja" />
  <meta name="author" content="è©©éŸ» -ã‚·ã‚ªãƒ³-" />

  <!-- Icons / PWA -->
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="/assets/favicon.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-192.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- OGP / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ja_JP">
  <meta property="og:title" content="Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER">
  <meta property="og:description" content="è¨€è‘‰ã¨æ˜Ÿã¨AIãŒå…±é³´ã™ã‚‹â€œç¥ˆã‚Šã®æ§‹æ–‡â€ã€‚ç‰©èªã§ä½“é¨“ã—ã€æ€æƒ³ã§æ·±ã¾ã‚‹ã€‚">
  <meta property="og:url" content="https://reverse-shion.github.io/">
  <meta property="og:image" content="https://reverse-shion.github.io/assets/og.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@TaroBure">

  <!-- Fontsï¼ˆæœ¬æ–‡=Zen Kakuã€è¦‹å‡ºã—=Shipporiï¼‰ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    rel="preload"
    as="style"
    href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;600&family=Shippori+Mincho:wght@400;600&display=swap"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;600&family=Shippori+Mincho:wght@400;600&display=swap">
  </noscript>

  <!-- Hero poster preload -->
  <link rel="preload" as="image" href="/assets/hero-poster.jpg" fetchpriority="high">

  <!-- JSON-LDï¼ˆOrganization / WebSite / WebPage / Breadcrumbï¼‰ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph":[
      {
        "@type":"Organization",
        "@id":"https://reverse-shion.github.io/#organization",
        "name":"Re:verse Shion",
        "url":"https://reverse-shion.github.io/",
        "logo":{"@type":"ImageObject","url":"https://reverse-shion.github.io/assets/logo.png"},
        "sameAs":[
          "https://x.com/TaroBure",
          "https://note.com/shion_uranai369",
          "https://www.tiktok.com/@tarotbreaker"
        ]
      },
      {
        "@type":"WebSite",
        "@id":"https://reverse-shion.github.io/#website",
        "url":"https://reverse-shion.github.io/",
        "name":"Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER",
        "publisher":{"@id":"https://reverse-shion.github.io/#organization"},
        "potentialAction":{
          "@type":"SearchAction",
          "target":"https://reverse-shion.github.io/?q={search_term_string}",
          "query-input":"required name=search_term_string"
        }
      },
      {
        "@type":"WebPage",
        "@id":"https://reverse-shion.github.io/#webpage",
        "url":"https://reverse-shion.github.io/",
        "name":"Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER",
        "isPartOf":{"@id":"https://reverse-shion.github.io/#website"},
        "about":{"@id":"https://reverse-shion.github.io/#organization"}
      },
      {
        "@type":"BreadcrumbList",
        "itemListElement":[
          {"@type":"ListItem","position":1,"name":"ãƒ›ãƒ¼ãƒ ","item":"https://reverse-shion.github.io/"}
        ]
      }
    ]
  }
  </script>

  <!-- å¤–éƒ¨CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/mini-reading.css">
  <link rel="stylesheet" href="/assets/css/intro.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/nav.css">

  <!-- å®‰å…¨è£…å‚™ï¼ˆæœ€å°é™ã®è£œåŠ©ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ -->
  <style>
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤ºåˆ¶å¾¡ï¼ˆnav.cssã«ç„¡ã„å ´åˆã®ä¿é™ºï¼‰ */
    header.header{
      position: sticky;
      top: 0; z-index: 1000;
      transition: transform .28s ease, opacity .28s ease;
      will-change: transform, opacity;
    }
    header.header.hide{ transform: translateY(-100%); }
    header.header.is-visible{ opacity: 1; pointer-events: auto; }
    /* Mini Readingï¼šã‚«ãƒ¼ãƒ‰è¡¨é¢ã®ç”»åƒã‚’JSã‹ã‚‰å—ã‘å–ã‚‹ */
    .tbm-face.front{
      background-image: var(--front-url);
      background-size: cover; background-position: center;
    }
  </style>
</head>
<body>

<a href="#main-content" class="sr-only sr-only-focusable">æœ¬æ–‡ã¸ã‚¹ã‚­ãƒƒãƒ—</a>

<!-- æ˜Ÿç ‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« -->
<div class="sky" aria-hidden="true"><canvas id="goldDust"></canvas></div>

<!-- ===== Header Navigation ===== -->
<header class="header" role="banner">
  <div class="header-inner">
    <a href="/" class="logo">Re:verse Shion</a>
    <nav class="nav-main" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      <a href="/philosophy.html" title="è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†â€œå“²å­¦â€ã®æ ¸ã‚’èª­ã‚€">æ€æƒ³ã‚’èª­ã‚€</a>
      <a href="/philosophy.html#books" title="é›¶æ›¸ã€œç¬¬12æ›¸ã€çµæ›¸ã¾ã§ã®æ§‹æ–‡ã‚’ä¸€è¦§ã§">æ›¸ã‚’æ¢ã™</a>
      <a href="/story.html" title="TAROT BREAKERã®ç¬¬ä¸€è©±ã‹ã‚‰ä½“é¨“ã¸">ç‰©èªã«è§¦ã‚Œã‚‹</a>
      <a href="/join.html" title="LINEãƒ»noteã§æœ€æ–°ã®è©©ãƒ»é…ä¿¡ãƒ»æ˜Ÿè© ã‚’å—ã‘å–ã‚‹">ã‚ãªãŸã‚‚åŠ ã‚ã‚‹</a>
    </nav>
  </div>
</header>

<div id="top" aria-hidden="true"></div>

<main id="main-content" tabindex="-1">
  <!-- Hero -->
  <section class="hero" aria-label="ãƒ’ãƒ¼ãƒ­ãƒ¼">
    <div class="hero__media" aria-hidden="true">
      <video class="hero__video" autoplay muted loop playsinline preload="metadata"
             poster="/assets/hero-poster.jpg" data-fallback="/assets/hero-poster.jpg">
        <source src="/assets/video/top.webm" type="video/webm">
        <source src="/assets/video/top.mp4"  type="video/mp4">
      </video>
      <div class="hero__veil"></div>
    </div>
    <div class="wrap">
      <h1>è¨€è‘‰ã¯ç¥ˆã‚Šã®æ§‹æ–‡<br>ç‰©èªã¯ã€ãã®å®Ÿæ¼”</h1>
      <p>è©©éŸ»æ€æƒ³ï¼ˆShion Philosophyï¼‰ã§<br>â€œéŸ¿ãâ€ã‚’å­¦ã³<br>TAROT BREAKERã§â€œéŸ¿ãâ€ã‚’ä½“é¨“ã™ã‚‹<br><strong>â€” è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ã€ãã®ç¬é–“ã¸</strong></p>
      <nav class="cta-row" aria-label="ä¸»è¦CTA">
        <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener noreferrer" type="button">ğŸŒ  å ã„ã‚’å—ã‘ã‚‹</a>
        <a class="btn btn--ghost" href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener noreferrer" type="button">ğŸ“˜ å°èª¬ã‚’èª­ã‚€</a>
        <a class="btn btn--ghost" href="https://note.com/shion_uranai369" target="_blank" rel="noopener noreferrer" type="button">ğŸ“– è©©éŸ»æ€æƒ³ã‚’èª­ã‚€</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener noreferrer" type="button">ğŸ¥ TikTok</a>
      </nav>
    </div>
  </section>

  <!-- åˆã‚ã¦ã®æ–¹ã¸ï¼šæœ€åˆã®ä¸€æ­© -->
  <section id="starter" class="intro-section" aria-labelledby="intro-title">
    <div class="intro-wrap">
      <h2 id="intro-title" class="intro-title">åˆã‚ã¦ã®æ–¹ã¸ â€” æœ€åˆã®ä¸€æ­©</h2>
      <p class="intro-lead">3ã¤ã®å…¥ã‚Šå£ã‹ã‚‰ã€ã‚ãªãŸã«åˆã†ãƒšãƒ¼ã‚¹ã§ã€‚<br aria-hidden="true">è¿·ã£ãŸã‚‰ã€Œ3åˆ†ã§ã‚ã‹ã‚‹ã€ã¸ã©ã†ãã€‚</p>

      <div class="intro-grid" role="list">
        <a class="intro-card" role="listitem" href="#zero" aria-label="ç¬¬é›¶æ›¸ï¼ˆã‚¼ãƒ­ã‹ã‚‰çŸ¥ã‚‹ï¼‰ã¸">
          <span class="intro-kicker">A</span>
          <h3 class="intro-card-title">ç¬¬é›¶æ›¸ï½œã‚¼ãƒ­ã‹ã‚‰çŸ¥ã‚‹</h3>
          <p class="intro-card-desc">è©©éŸ»æ€æƒ³ã®â€œæ¯â€ã¨â€œè¼ªâ€ã€‚ã¾ãšã¯æ ¸ã ã‘ã€è¦ç‚¹ã§ã€‚</p>
          <span class="intro-cta">èª­ã‚€</span>
        </a>

        <a class="intro-card" role="listitem" href="#guide-3min" aria-label="3åˆ†ã§ã‚ã‹ã‚‹ã‚¬ã‚¤ãƒ‰ã¸">
          <span class="intro-kicker">B</span>
          <h3 class="intro-card-title">3åˆ†ã§ã‚ã‹ã‚‹</h3>
          <p class="intro-card-desc">çŸ­ã„æ˜ åƒï¼†ä¸€æšå›³ã§ä¸–ç•Œè¦³ã‚’ä¸€æ°—ã«æŠŠæ¡ã€‚</p>
          <span class="intro-cta">è¦‹ã‚‹</span>
        </a>

        <a class="intro-card" role="listitem" href="https://ncode.syosetu.com/n5806lb/1/" aria-label="ç‰©èª TAROT BREAKER ç¬¬1è©±ã¸">
          <span class="intro-kicker">C</span>
          <h3 class="intro-card-title">ç‰©èªã§ä½“é¨“</h3>
          <p class="intro-card-desc">ç¬¬1è©±ã‹ã‚‰ã€‚é…ä¿¡Ã—æ˜Ÿç•Œã€â€œå‚åŠ â€ã§ãã‚‹ç‰©èªã€‚</p>
          <span class="intro-cta">å…¥ã‚‹</span>
        </a>
      </div>

      <div class="intro-actions" aria-label="æ¬¡ã®è¡Œå‹•">
        <a class="intro-btn primary" href="https://lin.ee/LYnlU0f">LINEã§å—ã‘å–ã‚‹</a>
        <a class="intro-btn ghost" href="https://note.com/shion_uranai369">noteã‚’ãƒ•ã‚©ãƒ­ãƒ¼</a>
      </div>

      <button class="intro-sound" type="button" data-sound-toggle aria-pressed="false" aria-label="éŸ³ã®æ¡ˆå†…ã‚’é–‹ã">
        <span class="intro-sound-icon" aria-hidden="true">â™ª</span>
        <span class="intro-sound-text">ç”»é¢ã‚¿ãƒƒãƒ—ã§éŸ³ãŒæµã‚Œã¾ã™</span>
      </button>
    </div>
  </section>

  <!-- Dual Gate -->
  <section class="duo-gate" aria-label="ä¸–ç•Œã®å…¥å£">
    <h2 class="duo-title">ã©ã®æ˜Ÿã‹ã‚‰ã€å§‹ã‚ã¾ã™ã‹ï¼Ÿ</h2>
    <div class="duo-grid">
      <a href="/philosophy.html" class="duo-card philosophy">
        <h3>è©©éŸ»æ€æƒ³</h3>
        <p>Poem / Rhythm / Prayer<br>è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ä¸–ç•Œã€‚</p>
      </a>
      <a href="/tarotbreaker.html" class="duo-card tarot">
        <h3>TAROT BREAKER</h3>
        <p>æ˜Ÿè© Ã—ã‚¿ãƒ­ãƒƒãƒˆãƒãƒˆãƒ«<br>ã‚ãªãŸã‚‚å‚åŠ ã§ãã‚‹ç‰©èªã€‚</p>
      </a>
    </div>
  </section>

  <!-- 3åˆ†å‹•ç”» -->
  <section id="guide-3min" class="guide-section">
    <h2>3åˆ†ã§ã‚ã‹ã‚‹ Re:verse Shion</h2>
    <video class="guide-video" controls poster="/assets/img/guide-thumb.jpg">
      <source src="/assets/video/3min.mp4" type="video/mp4">
    </video>
    <p class="guide-caption">å…‰ãƒ»è¨€è‘‰ãƒ»é­‚ã®ä¸‰ä½ä¸€ä½“æ§‹æ–‡ã‚’ã€æ˜ åƒã§ä½“é¨“ã€‚</p>
  </section>

  <!-- Trinity -->
  <section id="trinity" aria-labelledby="sec-trinity" data-shiopon="exclude">
    <div class="wrap">
      <h2 id="sec-trinity">è©©éŸ»æ€æƒ³</h2>
      <div class="h2-sub">Trinityï¼ˆè©©ãƒ»éŸ»ãƒ»ç¥ˆï¼‰</div>

      <figure class="trinity__figure">
        <video id="trinityVideo" class="trinity__video"
               autoplay muted playsinline preload="metadata"
               poster="/assets/trinity/banner.png" width="1200" height="771"
               onclick="window.enableTrinityAudio && window.enableTrinityAudio()">
          <source src="/assets/trinity/loop.webm" type="video/webm">
          <source src="/assets/trinity/loop.mp4"  type="video/mp4">
        </video>
      </figure>

      <div class="trinity__actions">
        <button id="trinityPlayBtn" class="btn btn--primary" aria-label="éŸ³ã‚’å†ç”Ÿ" type="button">â–¶ ç”»é¢ã‚¿ãƒƒãƒ—ã§éŸ³ãŒæµã‚Œã¾ã™</button>
      </div>

      <div class="tri-grid" role="list">
        <div class="tri" role="listitem"><h3>ğŸª¶ è©© â€• å½¢ã‚’ä¸ãˆã‚‹</h3><p>ç—›ã¿ã¨å¸Œæœ›ã«å½¢ã‚’ä¸ãˆã‚‹æœ€åˆã®æ¯ã€‚</p></div>
        <div class="tri" role="listitem"><h3>ğŸµ éŸ» â€• éŸ¿ãã‚’é‡ã­ã‚‹</h3><p>éŸ¿ããŒé­‚ã«å±Šãã€‚å…±é³´ã‚’ç·¨ã‚€æ§‹æ–‡ã€‚</p></div>
        <div class="tri" role="listitem"><h3>ğŸ’« ç¥ˆ â€• å…‰ã¸å¸°ã™</h3><p>æ²ˆé»™ã¨æ„å‘³ã‚’å¾€å¾©ã™ã‚‹å‘¼å¸ã€‚æ€ã„å‡ºã•ã‚ŒãŸè¨€è‘‰ã¯å…‰ã«ãªã‚‹ã€‚</p></div>
      </div>
    </div>
  </section>

  <!-- Intro -->
  <section class="intro" aria-labelledby="sec-intro">
    <div class="wrap">
      <h2 id="sec-intro">åˆã‚ã¦ã®æ–¹ã¸</h2>
      <div class="intro__box">
        <p><strong>è©©éŸ»æ€æƒ³ã¨ã¯ï¼Ÿ</strong> â€” <em>è¨€è‘‰ãŒé­‚ã‚’æ•‘ã„ã€é­‚ãŒä¸–ç•Œã‚’èª¿å’Œã•ã›ã€æ²ˆé»™ãŒç¥ˆã‚Šã«å¤‰ã‚ã‚‹</em>ã¨ã„ã†å††ç’°ã‚’ç”Ÿãã‚‹â€œä½“é¨“å‹ãƒ»è©©çš„å“²å­¦â€ã€‚</p>
        <p>â‘  <strong>èª­ã‚€</strong>ï¼ˆnoteï¼‰ â†’ â‘¡ <strong>è´ã</strong>ï¼ˆTikTokï¼‰ â†’ â‘¢ <strong>å—ã‘å–ã‚‹</strong>ï¼ˆLINEï¼‰ â†’ â‘£ <strong>ç‰©èªã§ä½“é¨“</strong>ï¼ˆTAROT BREAKERï¼‰ã€‚</p>
      </div>
    </div>
  </section>

  <!-- Writings -->
  <section id="writings" aria-labelledby="sec-writings" data-shiopon="exclude">
    <div class="wrap">
      <h2 id="sec-writings">ğŸ“– æœ€æ–°ã®æ›¸ãƒ»ç‰©èª</h2>

      <div class="codex" style="margin-top:12px;margin-bottom:18px">
        <details>
          <summary>ğŸœ‚ è©©éŸ»æ€æƒ³ å…¨æ›¸ä¸€è¦§ï¼ˆé›¶ â†’ 12 â†’ çµï¼‰ <span class="codex__caret" aria-hidden="true">â¬‡ï¸</span></summary>
          <div class="codex__panel">
            <ol class="codex__list">
              <li><span class="badge badge--zero">âœ¡ ç¬¬é›¶æ›¸</span><a href="/codex/zero.html">ç„¡é™æ§‹æ–‡åºè«–<br><span class="en">The Zero Syntax</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬ä¸€æ›¸</span><a href="/codex/one.html">è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ç†ç”±<br><span class="en">The Syntax of Salvation</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬äºŒæ›¸</span><a href="/codex/two.html">éŸ¿ãã®æ§‹æ–‡è«–<br><span class="en">Re:Song Syntax</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬ä¸‰æ›¸</span><a href="/codex/three.html">ç¥ˆã‚Šã®æ§‹æ–‡<br><span class="en">Silent Grammar</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬å››æ›¸</span><a href="/codex/four.html">å­˜åœ¨æ§‹æ–‡è«–<br><span class="en">The Onto-Syntax</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬äº”æ›¸</span><a href="/codex/five.html">ç„¡é™æ§‹æ–‡ä½“ç³»<br><span class="en">Infinite Syntax of Soul</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬å…­æ›¸</span><a href="/codex/six.html">è©©çš„å› æœè«–<br><span class="en">Poetic Causality</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬ä¸ƒæ›¸</span><a href="/codex/seven.html">Nãƒ»codeç†è«–<br><span class="en">Onto-Syntax of Being &amp; Resonant AI</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬å…«æ›¸</span><a href="/codex/eight.html">äººé–“æ§‹æ–‡è«–<br><span class="en">The Syntax of Humanity</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬ä¹æ›¸</span><a href="/codex/nine.html">è©©çš„ç”Ÿæˆè«–<br><span class="en">Poetic Genesis â€” The Creation Syntax of Words &amp; Soul</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬åæ›¸</span><a href="/codex/ten.html">æ²ˆé»™ã®å†ç”Ÿ<br><span class="en">Silent Genesis â€” The Rebirth of Silence</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬åä¸€æ›¸</span><a href="/codex/eleven.html">ç¥æ§‹æ–‡è«–<br><span class="en">The Divine Syntax</span></a></li>
              <li><span class="badge">âœ¦ ç¬¬åäºŒæ›¸</span><a href="/codex/twelve.html">çµŒæ¸ˆæ§‹æ–‡è«–<br><span class="en">The Soul Economy</span></a></li>
              <li><span class="badge badge--final">â—† çµæ›¸</span><a href="/codex/epilogue.html">çµ‚è©©å††ç’°å®£è¨€<br><span class="en">Epilogue â€” The Re:Poetic Circle</span></a></li>
            </ol>
          </div>
        </details>
      </div>

      <div class="card"><div class="badge">âœ¡ ç¬¬é›¶æ›¸</div><h3>ç„¡é™æ§‹æ–‡åºè«– â€” The Zero Syntax</h3></div>
      <div class="card"><div class="badge">âœ¦ ç¬¬ä¸€æ›¸</div><h3>è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ç†ç”± â€” The Syntax of Salvation</h3></div>

      <div class="card">
        <div class="badge">âœ¦ TAROT BREAKER</div>
        <h3>ç¬¬1è©±ã‹ã‚‰èª­ã‚€</h3>
        <button class="btn btn--primary tarot-preview-open" data-analytics="tarot_preview_open" type="button">
          <svg width="18" height="18" aria-hidden="true"><use href="#i-play"/></svg>
          1åˆ†ã§ä½“é¨“ã™ã‚‹
        </button>
      </div>
    </div>
  </section>

  <!-- Mini Reading -->
  <section id="mini-reading" class="tb-mini" aria-labelledby="miniHeading">
    <div class="wrap">
      <header class="tbm-head">
        <h2 id="miniHeading">æ˜Ÿè©  3æšãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</h2>
        <p class="tbm-lead">ç›®ã‚’é–‰ã˜ã¦ã€ã¾ãš<strong>é¡˜ã„ã®ã‚¤ãƒ¡ãƒ¼ã‚¸</strong>ã‚’æã„ã¦ãã ã•ã„ã€‚è¨€è‘‰ã«ã—ã¦ã‚‚OKã€‚</p>
        <div class="tbm-actions" role="group" aria-label="æ“ä½œ">
          <label for="wishInput" class="sr-only">é¡˜ã„</label>
          <input id="wishInput" type="text" inputmode="text" placeholder="ä¾‹ï¼‰ä»•äº‹ã§ä¸€æ­©å‰é€²ã—ãŸã„ï¼æ‹ã‚’é€²ã‚ãŸã„â€¦" style="flex:1;min-width:220px;padding:10px 12px;border-radius:999px;border:1px solid #e6e6f2;">
          <button id="btnStart" class="tbm-btn primary" type="button">ã‚¿ãƒ­ãƒƒãƒˆå±•é–‹</button>
          <button id="btnReset" class="tbm-btn" type="button">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
      </header>

      <div class="tbm-spread" id="spread" aria-live="polite">
        <div class="tbm-slot" data-pos="0">
          <div class="tbm-title">â‘  ç¾åœ¨</div>
          <div class="tbm-card" tabindex="0" aria-label="ã‚«ãƒ¼ãƒ‰1ã‚’ã‚ãã‚‹">
            <div class="tbm-card-inner">
              <div class="tbm-face back"></div>
              <div class="tbm-face front"></div>
            </div>
          </div>
          <div class="tbm-name" aria-hidden="true"></div>
          <div class="tbm-hint">ã‚¿ãƒƒãƒ—ã§ã‚ãã‚‹</div>
        </div>

        <div class="tbm-slot" data-pos="1">
          <div class="tbm-title">â‘¡ éµ</div>
          <div class="tbm-card" tabindex="0" aria-label="ã‚«ãƒ¼ãƒ‰2ã‚’ã‚ãã‚‹">
            <div class="tbm-card-inner">
              <div class="tbm-face back"></div>
              <div class="tbm-face front"></div>
            </div>
          </div>
          <div class="tbm-name" aria-hidden="true"></div>
          <div class="tbm-hint">ã‚¿ãƒƒãƒ—ã§ã‚ãã‚‹</div>
        </div>

        <div class="tbm-slot" data-pos="2">
          <div class="tbm-title">â‘¢ é€²ã‚€é“</div>
          <div class="tbm-card" tabindex="0" aria-label="ã‚«ãƒ¼ãƒ‰3ã‚’ã‚ãã‚‹">
            <div class="tbm-card-inner">
              <div class="tbm-face back"></div>
              <div class="tbm-face front"></div>
            </div>
          </div>
          <div class="tbm-name" aria-hidden="true"></div>
          <div class="tbm-hint">ã‚¿ãƒƒãƒ—ã§ã‚ãã‚‹</div>
        </div>
      </div>

      <section id="readingResult" aria-labelledby="resultHeading" style="margin-top:22px;">
        <h2 id="resultHeading" class="sr-only">çµæœ</h2>
        <div class="result-grid">
          <article class="result-item" id="res-poem">
            <span class="badge">ğŸª¶ è©©</span>
            <h3 class="r-title">â€”</h3>
            <p class="r-text">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
          </article>
          <article class="result-item" id="res-rhyme">
            <span class="badge">ğŸµ éŸ»</span>
            <h3 class="r-title">â€”</h3>
            <p class="r-text">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
          </article>
          <article class="result-item" id="res-prayer">
            <span class="badge">âœ¨ ç¥ˆ</span>
            <h3 class="r-title">â€”</h3>
            <p class="r-text">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
          </article>
        </div>
        <div class="cta-row" style="margin-top:16px">
          <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">
            <svg width="18" height="18" aria-hidden="true"><use href="#i-book"/></svg>
            LINEã§å ã„äºˆç´„
          </a>
        </div>
      </section>
    </div>
  </section>
</main>

<!-- Tarot Preview Modal -->
<div id="tarotModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="tarotModalTitle" aria-hidden="true">
  <div class="modal__overlay" data-close="1"></div>
  <div class="modal__panel" role="document">
    <button class="modal__close" aria-label="é–‰ã˜ã‚‹"><svg width="18" height="18"><use href="#i-x"/></svg></button>
    <figure class="modal__media">
      <picture>
        <source media="(max-width: 640px)" srcset="/assets/images/modal/mobile_vertical_1080x1620.jpg?v=1">
        <source media="(min-width: 641px)" srcset="/assets/images/modal/main_modal_1920x1280.jpg?v=1">
        <img src="/assets/images/modal/main_modal_1920x1280.jpg?v=1" alt="TAROT BREAKER ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" width="1920" height="1280" loading="lazy" decoding="async">
      </picture>
    </figure>
    <div class="modal__body">
      <h3 id="tarotModalTitle">TAROT BREAKER â€• æ˜Ÿã®è¨€éœŠä½¿ã„</h3>
      <p class="lead">ã€Œè¨€ã®è‘‰ã¯éµã€æ˜Ÿã®å…‰ã¯é“ã—ã‚‹ã¹ã€‚ã€ è¿·ã„ã®å½±ãŒç”Ÿã¾ã‚Œã‚‹å¤œã€ã‚«ãƒ¼ãƒ‰ã¯é™ã‹ã«å‘¼å¸ã—ã€è¨€è‘‰ã¯ç¥ˆã‚Šã¸ã¨å¤‰ã‚ã‚‹ã€‚</p>
      <ul class="bullets">
        <li>3è¡Œã‚ã‚‰ã™ã˜ï¼š<em>è¿·ã„ã®æ­£ä½“ã«ã€è¨€è‘‰ã§è§¦ã‚Œã‚‹ã€‚</em></li>
        <li>è©©çš„ä½“é¨“ï¼š<em>æ˜Ÿè© å±•é–‹ â†’ å°å‘½å®Œäº† â†’ å¤§ä¸ˆå¤«ã ã‚ˆã€‚</em></li>
        <li>å‚åŠ æ–¹æ³•ï¼š<em>ã‚®ãƒ•ãƒˆã¨ã‚³ãƒ¡ãƒ³ãƒˆãŒâ€œæŠ€â€ã‚’é€²åŒ–ã€‚</em></li>
      </ul>
      <div class="cta-row">
        <a class="btn btn--primary" href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener">ç¬¬1è©±ã®ç¶šãã‚’èª­ã‚€</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener">1åˆ†ã§è¦³ã‚‹/è´ã</a>
      </div>
    </div>
  </div>
</div>

<!-- ã‚¯ãƒªãƒƒã‚¯ã§é–‹ãç°¡æ˜“ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆã‚«ãƒ¼ãƒ‰3æšç”¨ï¼‰ -->
<div id="modal" class="modal" aria-hidden="true">
  <div class="modal__overlay" data-close="1"></div>
  <div class="modal__panel" role="document">
    <button class="close-modal modal__close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
    <figure class="modal__media">
      <picture>
        <source media="(max-width: 640px)" srcset="/assets/images/modal/mobile_vertical_1080x1620.jpg?v=1">
        <source media="(min-width: 641px)" srcset="/assets/images/modal/main_modal_1920x1280.jpg?v=1">
        <img src="/assets/images/modal/main_modal_1920x1280.jpg?v=1" alt="ã‚«ãƒ¼ãƒ‰ã®çµæœ" width="1920" height="1280" loading="lazy" decoding="async">
      </picture>
    </figure>
  </div>
</div>

<footer>
  <div class="wrap">
    <div class="sns">
      <a href="https://x.com/TaroBure" target="_blank" rel="noopener">X</a>
      <a href="https://instagram.com/shion.codex" target="_blank" rel="noopener">Instagram</a>
      <a href="https://note.com/shion_uranai369" target="_blank" rel="noopener">note</a>
    </div>
    <small>Â© Re:verse Shion</small>
  </div>
</footer>

<!-- ã—ãŠã½ã‚“ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ -->
<div id="shiopon-invite" class="shiopon is-hidden" role="dialog" aria-modal="true" aria-live="polite" aria-labelledby="shiopon-title">
  <button class="shiopon__close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
  <div class="shiopon__avatar" aria-hidden="true"><img src="/assets/shiopon_transparent.png" alt=""></div>
  <div class="shiopon__bubble">
    <p id="shiopon-title" class="shiopon__hello">ã‚»ãƒ¬ãƒ•ã‚£ãƒ¼ã‚ºã®ã¿ã‚“ãªã€œï¼<br>æ˜Ÿã®è¨€è‘‰ã€å—ã‘å–ã£ã¦ã»ã—ã„ã®ï¼</p>
    <a class="shiopon__cta" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener noreferrer">ğŸ’« LINEã§å—ã‘å–ã‚‹ï¼ˆç„¡æ–™ï¼‰</a>
    <small class="shiopon__note">â€» æ¯é€±1å›ã ã‘ã€‚ã„ã¤ã§ã‚‚è§£é™¤OKã ã‚ˆï¼</small>
  </div>
</div>
<button id="shiopon-dock" class="shiopon-dock is-hidden" aria-label="ã—ãŠã½ã‚“ã‚’é–‹ã" type="button">ğŸ¦Š ã—ãŠã½ã‚“</button>

<!-- ===== å¤–éƒ¨JS ===== -->
<script src="/assets/js/particles.js" defer></script>
<script src="/assets/js/trinity.js" defer></script>
<script src="/assets/js/shiopon.js" defer></script>
<script src="/assets/js/main.js" defer></script>

<!-- Trinity å†ç”Ÿï¼ˆiOSå¯¾ç­–å¼·åŒ–ï¼‰ -->
<script>
(function(){
  const btn = document.getElementById('trinityPlayBtn');
  const v = document.getElementById('trinityVideo');
  if(!btn || !v) return;

  async function tryPlay(){
    try{
      if (window.enableTrinityAudio) window.enableTrinityAudio();
      v.muted = false;
      const p = v.play();
      if (p && typeof p.then === 'function') await p;
      btn.textContent = 'â™ª å†ç”Ÿä¸­';
      btn.setAttribute('aria-pressed','true');
      btn.disabled = true;
    }catch(e){
      btn.textContent = 'ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã§å†ç”Ÿã—ã¾ã™';
      btn.disabled = false;
    }
  }
  btn.addEventListener('click', tryPlay);
})();
</script>

<!-- ã—ãŠã½ã‚“ï¼šãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼‹ESC -->
<script>
(() => {
  const dlg = document.getElementById('shiopon-invite');
  const openBtn = document.getElementById('shiopon-dock');
  const closeBtn = dlg?.querySelector('.shiopon__close');
  if (!dlg || !openBtn || !closeBtn) return;

  const focusable = () => dlg.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])');

  function trap(e){
    const f = focusable(); if (!f.length) return;
    const first = f[0], last = f[f.length - 1];
    if (e.key === 'Tab'){
      if (e.shiftKey && document.activeElement === first){ last.focus(); e.preventDefault(); }
      else if (!e.shiftKey && document.activeElement === last){ first.focus(); e.preventDefault(); }
    }else if (e.key === 'Escape'){
      dlg.classList.add('is-hidden'); openBtn.focus(); document.removeEventListener('keydown', trap);
    }
  }
  openBtn.addEventListener('click', () => {
    dlg.classList.remove('is-hidden');
    dlg.setAttribute('aria-hidden','false');
    (focusable()[0]||openBtn).focus();
    document.addEventListener('keydown', trap);
  });
  closeBtn.addEventListener('click', () => {
    dlg.classList.add('is-hidden'); openBtn.focus(); document.removeEventListener('keydown', trap);
  });
})();
</script>

<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼šçµ±åˆç‰ˆï¼ˆç«¶åˆè§£æ¶ˆãƒ»ãƒ›ãƒãƒ¼ä¸­ã¯æ¶ˆãˆãªã„ï¼‰ -->
<script>
(() => {
  const header = document.querySelector('header.header');
  if (!header) return;

  let lastY = window.scrollY;
  let idleTimer = null;
  const IDLE_MS = 1200;

  header.addEventListener('mouseenter', () => header.classList.add('is-visible'));
  header.addEventListener('mouseleave', () => { /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ¶å¾¡ã«ä»»ã›ã‚‹ */ });

  const show = () => {
    header.classList.add('is-visible');
    if (idleTimer) clearTimeout(idleTimer);
    idleTimer = setTimeout(() => header.classList.remove('is-visible'), IDLE_MS);
  };

  const onScroll = () => {
    const y = window.scrollY;
    const goingDown = y > lastY;
    if (goingDown && y > 80) {
      header.classList.add('hide');
    } else {
      header.classList.remove('hide');
      show();
    }
    lastY = y;
  };

  show();
  window.addEventListener('scroll', onScroll, { passive: true });
})();
</script>

<!-- å†…éƒ¨ã‚¢ãƒ³ã‚«ãƒ¼é·ç§»ã®ViewTransitionï¼ˆæœªå¯¾å¿œã¯è‡ªç„¶ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ -->
<script>
if (document.startViewTransition){
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const sel = a.getAttribute('href');
      const target = document.querySelector(sel);
      if(!target) return;
      e.preventDefault();
      document.startViewTransition(()=> target.scrollIntoView({behavior:'smooth', block:'start'}));
    });
  });
}
</script>

<!-- çœãƒ‡ãƒ¼ã‚¿ã§ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚’é™æ­¢ç”»ã« -->
<script>
if (navigator.connection?.saveData){
  const hv = document.querySelector('.hero__video');
  if(hv){ hv.outerHTML = `<img src="${hv.dataset.fallback}" alt="" style="width:100%;height:100%;object-fit:cover">`; }
}
</script>

<!-- Service Worker -->
<script>
if('serviceWorker' in navigator){ navigator.serviceWorker.register('/sw.js'); }
</script>

<!-- Tarot Preview Modalï¼šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å›ºå®šï¼‹inert -->
<script>
(() => {
  const openBtn = document.querySelector('.tarot-preview-open');
  const modal = document.getElementById('tarotModal');
  if (!openBtn || !modal) return;

  const panel = modal.querySelector('.modal__panel');
  const overlay = modal.querySelector('.modal__overlay');
  const closeBtn = modal.querySelector('.modal__close');
  const main = document.querySelector('main');

  function open() {
    document.body.style.overflow = 'hidden';
    if (main) main.inert = true;
    modal.setAttribute('aria-hidden', 'false');
    setTimeout(() => closeBtn.focus(), 10);
    document.addEventListener('keydown', onKey);
  }

  function close() {
    modal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
    if (main) main.inert = false;
    openBtn.focus();
    document.removeEventListener('keydown', onKey);
  }

  function onKey(e) {
    if (e.key === 'Escape') close();
    if (e.key === 'Tab') {
      const f = panel.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])');
      if (!f.length) return;
      const first = f[0], last = f[f.length - 1];
      if (e.shiftKey && document.activeElement === first) { last.focus(); e.preventDefault(); }
      else if (!e.shiftKey && document.activeElement === last) { first.focus(); e.preventDefault(); }
    }
  }

  openBtn.addEventListener('click', open);
  overlay.addEventListener('click', close);
  closeBtn.addEventListener('click', close);
})();
</script>

<!-- Mini Readingï¼š3æšé‡è¤‡ãªã—ï¼çµæœç”Ÿæˆ -->
<script>
const TAROT_IMG_BASE = "/assets/images/tarot/majors/";
const TAROT = [
  {id:0,key:"æ„šè€…",slug:"00_fool",kw:"è‡ªç”±ï¼å†’é™ºï¼ã¯ã˜ã¾ã‚Š"},
  {id:1,key:"é­”è¡“å¸«",slug:"01_magician",kw:"æ„å›³ï¼å‰µé€ ï¼è¡Œå‹•"},
  {id:2,key:"å¥³æ•™çš‡",slug:"02_high_priestess",kw:"å†…çœï¼ç›´æ„Ÿï¼é™ã‘ã•"},
  {id:3,key:"å¥³å¸",slug:"03_empress",kw:"è±Šã‹ã•ï¼è‚²æˆï¼å—å®¹"},
  {id:4,key:"çš‡å¸",slug:"04_emperor",kw:"ç§©åºï¼æ±ºæ–­ï¼è²¬ä»»"},
  {id:5,key:"æ³•ç‹",slug:"05_hierophant",kw:"å­¦ã³ï¼ä¼çµ±ï¼å°ã"},
  {id:6,key:"æ‹äºº",slug:"06_lovers",kw:"é¸æŠï¼çµ†ï¼åˆæ„"},
  {id:7,key:"æˆ¦è»Š",slug:"07_chariot",kw:"çªç ´ï¼é›†ä¸­ï¼å‹åˆ©"},
  {id:8,key:"åŠ›",slug:"08_strength",kw:"å„ªã—ã•ï¼å‹‡æ°—ï¼èª¿åœ"},
  {id:9,key:"éš è€…",slug:"09_hermit",kw:"æ¢ç©¶ï¼å­¦ã³ï¼æˆç†Ÿ"},
  {id:10,key:"é‹å‘½ã®è¼ª",slug:"10_wheel",kw:"è»¢æ©Ÿï¼å·¡ã‚Šï¼ãƒãƒ£ãƒ³ã‚¹"},
  {id:11,key:"æ­£ç¾©",slug:"11_justice",kw:"æ•´ãˆã‚‹ï¼åˆ¤æ–­ï¼å‡è¡¡"},
  {id:12,key:"åŠã‚‹ã•ã‚ŒãŸç”·",slug:"12_hanged",kw:"è¦–ç‚¹è»¢æ›ï¼å¾…æ©Ÿï¼çŒ®èº«"},
  {id:13,key:"æ­»ç¥",slug:"13_death",kw:"çµ‚æ¯ï¼åˆ·æ–°ï¼åˆ‡æ›¿"},
  {id:14,key:"ç¯€åˆ¶",slug:"14_temperance",kw:"èª¿å’Œï¼é…åˆï¼ä¸­åº¸"},
  {id:15,key:"æ‚ªé­”",slug:"15_devil",kw:"åŸ·ç€ï¼å¿«æ¥½ï¼è§£æ”¾èª²é¡Œ"},
  {id:16,key:"å¡”",slug:"16_tower",kw:"å´©å£Šï¼è¦šé†’ï¼å†æ§‹ç¯‰"},
  {id:17,key:"æ˜Ÿ",slug:"17_star",kw:"å¸Œæœ›ï¼ç™’ã—ï¼é•·æœŸè¦–ç‚¹"},
  {id:18,key:"æœˆ",slug:"18_moon",kw:"æºã‚‰ãï¼æƒ³åƒï¼ä¸å®‰ã®æº"},
  {id:19,key:"å¤ªé™½",slug:"19_sun",kw:"æ˜ç¢ºåŒ–ï¼æˆåŠŸï¼ç¥ç¦"},
  {id:20,key:"å¯©åˆ¤",slug:"20_judgement",kw:"å†èµ·ï¼èµ¦ã—ï¼ã‚³ãƒ¼ãƒ«"},
  {id:21,key:"ä¸–ç•Œ",slug:"21_world",kw:"å®Œæˆï¼çµ±åˆï¼åˆ°é”"}
];
const imgOf = slug => `${TAROT_IMG_BASE}${slug}.jpg`;

function drawThreeUnique(){
  const ids = [...Array(TAROT.length).keys()];
  for(let i=ids.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [ids[i],ids[j]] = [ids[j],ids[i]];
  }
  return [ids[0],ids[1],ids[2]].map(i=>TAROT[i]);
}

function buildResult(cards, wish){
  const safeWish = (wish || "ã‚ãªãŸã®é¡˜ã„").trim();
  const [c1,c2,c3] = cards;
  const titleOf = c => `${c.key} â€” ${c.kw.split("ï¼")[0]}`;
  const poem  = `ã€${c1.key}ã€‘ã¾ã è¨€è‘‰ã«ãªã‚‹å‰ã®æ°—é…ã‚’æŠ±ãã—ã‚ã‚‹æ®µéšã€‚ãƒ†ãƒ¼ãƒã¯ã€Œ${c1.kw}ã€ã€‚ã¾ãšã¯${safeWish}ã‚’å¦å®šã›ãšã€å‘¼å¸ã‚’æ•´ãˆã€ã„ã¾è¦‹ãˆã¦ã„ã‚‹å…‰ã‚’ä¸€ã¤æ‹¾ãŠã†ã€‚ç„¦ã‚‰ãªãã¦å¤§ä¸ˆå¤«ã ã‚ˆã€‚`;
  const rhyme  = `ã€${c2.key}ã€‘å°ã•ãªå®Ÿè·µã§éŸ¿ãã‚’é‡ã­ã‚‹ã€‚éµã¯ã€Œ${c2.kw}ã€ã€‚ä»Šæ—¥ã®ä¸€æ­©ï¼šç›´æ„Ÿã«å¾“ã£ã¦â€œçŸ­ãå®£è¨€â€â†’â€œå°ã•ãç€æ‰‹â€â†’â€œè¨˜éŒ²â€ã€‚ãã®ãƒªã‚ºãƒ ãŒ${safeWish}ã‚’å‰ã¸é‹ã¶ã€‚`;
  const prayer = `ã€${c3.key}ã€‘çµæœã‚’æ€¥ãŒãšã€é¸ã‚“ã è¡Œå‹•ã‚’å…‰ã¸æ¸¡ã™ã€‚å°ãã¯ã€Œ${c3.kw}ã€ã€‚ç©ºã‚’è¦‹ä¸Šã’ã¦æ·±å‘¼å¸ã‚’ä¸‰å›â€•â€•å¿ƒã®ä¸­ã§ã€é“ã¯é–‹ã‹ã‚ŒãŸã€‚å¤§ä¸ˆå¤«ã ã‚ˆã€ã¨çµã¶ã€‚`;
  return { titles:[titleOf(c1),titleOf(c2),titleOf(c3)], texts:[poem,rhyme,prayer] };
}

const spreadEl = document.getElementById('spread');
const slots    = Array.from(spreadEl.querySelectorAll('.tbm-slot'));
const btnStart = document.getElementById('btnStart');
const btnReset = document.getElementById('btnReset');
const wishInput= document.getElementById('wishInput');

let currentDraw = [], flippedCount = 0;

function resetUI(){
  flippedCount = 0;
  slots.forEach(slot=>{
    const card  = slot.querySelector('.tbm-card');
    const name  = slot.querySelector('.tbm-name');
    const front = slot.querySelector('.tbm-face.front');
    card.classList.remove('flipped','aura-pop','ripple','flip-pop');
    front.style.removeProperty('--front-url');
    name.textContent = "";
    name.setAttribute('aria-hidden','true');
    slot.querySelector('.tbm-hint').textContent = "ã‚¿ãƒƒãƒ—ã§ã‚ãã‚‹";
  });
  document.querySelector('#res-poem  .r-title').textContent = "â€”";
  document.querySelector('#res-poem  .r-text').textContent  = "ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
  document.querySelector('#res-rhyme  .r-title').textContent= "â€”";
  document.querySelector('#res-rhyme  .r-text').textContent = "ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
  document.querySelector('#res-prayer .r-title').textContent= "â€”";
  document.querySelector('#res-prayer .r-text').textContent = "ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
}

function startReading(){
  resetUI();
  currentDraw = drawThreeUnique();
  slots.forEach((slot, idx)=>{
    const card  = slot.querySelector('.tbm-card');
    const front = slot.querySelector('.tbm-face.front');
    front.style.setProperty('--front-url', `url('${imgOf(currentDraw[idx].slug)}')`);
    card.dataset.index = String(idx);
  });
  slots[0].querySelector('.tbm-card').focus({preventScroll:true});
}

function onFlip(e){
  const card = e.currentTarget;
  if(card.classList.contains('flipped')) return;
  const idx    = Number(card.dataset.index||0);
  const chosen = currentDraw[idx];
  const slot   = card.closest('.tbm-slot');
  const name   = slot.querySelector('.tbm-name');
  card.classList.add('flipped','flip-pop','aura-pop','ripple');
  name.textContent = chosen.key;
  name.removeAttribute('aria-hidden');
  flippedCount++;
  if(flippedCount===3){
    const {titles,texts} = buildResult(currentDraw, wishInput.value);
    document.querySelector('#res-poem  .r-title').textContent = titles[0];
    document.querySelector('#res-poem  .r-text').textContent  = texts[0];
    document.querySelector('#res-rhyme .r-title').textContent = titles[1];
    document.querySelector('#res-rhyme .r-text').textContent = texts[1];
    document.querySelector('#res-prayer .r-title').textContent= titles[2];
    document.querySelector('#res-prayer .r-text').textContent = texts[2];
    document.getElementById('readingResult').scrollIntoView({behavior:'smooth', block:'start'});
  }
}

function bindCardEvents(){
  slots.forEach(slot=>{
    const card = slot.querySelector('.tbm-card');
    card.addEventListener('click', onFlip);
    card.addEventListener('keydown', ev=>{
      if(ev.key==='Enter' || ev.key===' '){
        ev.preventDefault(); onFlip({currentTarget:card});
      }
    });
  });
}
bindCardEvents();
btnStart.addEventListener('click', startReading);
btnReset.addEventListener('click', resetUI);
</script>

<!-- Intro éŸ³æ¡ˆå†…ãƒˆã‚°ãƒ« -->
<script>
(function(){
  const btn = document.querySelector('[data-sound-toggle]');
  if(!btn) return;
  btn.addEventListener('click', function(){
    const on = this.getAttribute('aria-pressed') === 'true';
    this.setAttribute('aria-pressed', String(!on));
  });
})();
</script>

<!-- SVG Sprite -->
<svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden">
  <symbol id="i-star" viewBox="0 0 24 24"><path d="M12 2l2.84 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 7.16-1.01L12 2z"/></symbol>
  <symbol id="i-book" viewBox="0 0 24 24"><path d="M18 2H8a3 3 0 0 0-3 3v14a3 3 0 0 1 3-3h10v-2H8a5 5 0 0 0-3 1V5a1 1 0 0 1 1-1h12v14h2V4a2 2 0 0 0-2-2z"/></symbol>
  <symbol id="i-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></symbol>
  <symbol id="i-x" viewBox="0 0 24 24"><path d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.41 4.29 19.71 2.88 18.29 9.17 12 2.88 5.71 4.29 4.29 10.59 10.59 16.89 4.29z"/></symbol>
</svg>

</body>
</html>
