<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Re:Verse Shion — The Temple of Words</title>

  <!-- Fonts：タイトルは Zen Old Mincho、本文は Noto Serif JP -->
  <link href="https://fonts.googleapis.com/css2?family=Zen+Old+Mincho:wght@400;700&family=Noto+Serif+JP:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    /* ===== Base ===== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root{
      --ink: #eaf6ff;
      --muted:#a8bfd0;
      --glow:#7fd0ff;
      --halo: rgba(127,208,255,.18);
      --glass: rgba(10,20,40,.66);
      --r: 16px;
      --safe: env(safe-area-inset-bottom, 16px);
    }
    html, body { height: 100%; }
    body{
      background: #000;
      color: var(--ink);
      font-family: 'Noto Serif JP', serif;
      text-align: center;
      display: grid;
      place-items: center;
      overflow: hidden; /* 演出は画面内で完結 */
    }

    /* 背景：コード雨 */
    #codeRain{
      position: fixed; inset: 0;
      width: 100%; height: 100%;
      z-index: 1; pointer-events: none;
    }

    /* コンテンツラッパー（中央配置＋左右余白） */
    .content{
      position: relative;
      z-index: 2;
      width: min(92vw, 920px);
      padding: 24px clamp(16px, 4vw, 40px) calc(28px + var(--safe));
    }

    /* タイポ＆アニメ（控えめな神秘感） */
    h1{
      font-family: 'Zen Old Mincho', serif;
      font-weight: 700;
      letter-spacing: .06em;
      font-size: clamp(22px, 4.6vw, 42px);
      line-height: 1.2;
      margin-bottom: .4em;
      opacity: 0; transform: translateY(24px);
      animation: fadeUp .9s ease-out .2s forwards;
      text-shadow: 0 0 10px rgba(127,208,255,.35);
    }
    h2{
      font-family: 'Zen Old Mincho', serif;
      font-weight: 700;
      font-size: clamp(16px, 3.4vw, 26px);
      letter-spacing: .08em;
      margin: .6em 0 .2em;
      opacity: 0; transform: translateY(24px);
      animation: fadeUp .9s ease-out .6s forwards;
      text-shadow: 0 0 8px rgba(127,208,255,.28);
    }
    p{
      font-size: clamp(13px, 2.8vw, 18px);
      line-height: 1.9;
      letter-spacing: .02em;
      color: var(--muted);
      text-wrap: pretty;
      opacity: 0; transform: translateY(24px);
      animation: fadeUp .9s ease-out .4s forwards;
      margin: .4em 0;
      text-shadow: 0 0 6px rgba(127,208,255,.18);
    }
    p.lead{ color: var(--ink); font-weight: 600; }
    @keyframes fadeUp{ to{ opacity:1; transform:translateY(0) } }

    /* 扉（ボタン） */
    .door-container{
      margin-top: clamp(18px, 5vw, 36px);
      display: grid; place-items: center;
    }
    .door-button{
      position: relative;
      display: block;
      width: min(92vw, 560px);           /* 画面からはみ出さない */
      padding: clamp(14px, 2.4vw, 22px) clamp(18px, 5vw, 44px);
      border-radius: 999px;
      color: #e9fbff;
      text-decoration: none;
      border: 1px solid rgba(127,208,255,.45);
      background: linear-gradient(180deg, rgba(12,24,48,.78), rgba(8,16,32,.78));
      backdrop-filter: blur(6px);
      box-shadow:
        0 0 0 1px rgba(127,208,255,.18) inset,
        0 6px 28px var(--halo),
        0 0 80px rgba(127,208,255,.12);
      transition: transform .18s ease, box-shadow .28s ease, border-color .28s ease;
      overflow: clip; /* 安全にエフェクトを内側に */
    }
    .door-text{
      position: relative; z-index: 2;
      font-family: 'Zen Old Mincho', serif;
      font-weight: 700;
      letter-spacing: .14em;
      font-size: clamp(14px, 2.8vw, 18px);
      text-shadow: 0 0 12px rgba(127,208,255,.65);
      white-space: nowrap;
    }

    /* ホバー演出：タッチ端末では無効化 */
    @media (hover:hover){
      .door-button:hover{
        transform: translateY(-2px);
        box-shadow:
          0 10px 34px rgba(127,208,255,.38),
          0 0 120px rgba(127,208,255,.18);
        border-color: rgba(127,208,255,.75);
      }
    }

    /* 脈動リング（内側で完結） */
    .pulse{
      position:absolute; inset:0; margin:auto;
      width: 160%; height: 160%;
      border: 2px solid rgba(127,208,255,.28);
      border-radius: 50%;
      filter: blur(.2px);
      animation: pulse 2.2s ease-out infinite;
      z-index: 1; pointer-events:none;
    }
    @keyframes pulse{
      0%{ transform: scale(.6); opacity:.75 }
      100%{ transform: scale(1); opacity:0 }
    }

    /* 微粒子（控えめ） */
    .particles{ position:absolute; inset:0; pointer-events:none; }
    .particle{
      position:absolute; width:3px; height:3px; border-radius:50%;
      background: var(--glow); box-shadow: 0 0 8px var(--glow);
      opacity:0; animation: gather 1.4s ease-out forwards;
    }
    @keyframes gather{
      0%{ transform: translate(var(--sx,0), var(--sy,0)) scale(0); opacity:0 }
      60%{ opacity:1 }
      100%{ transform: translate(0,0) scale(1); opacity:0 }
    }

    /* クリック閃光（画面内に控えめ） */
    .light-burst{
      position: fixed; inset: 0;
      background: radial-gradient(80vmax 80vmax at 50% 50%, rgba(127,208,255,.8) 0%, rgba(127,208,255,.0) 65%);
      opacity: 0; pointer-events: none; z-index: 9999;
      animation: burst .8s ease-out;
    }
    @keyframes burst{
      0%{ opacity:0; transform: scale(.7) }
      50%{ opacity:1; transform: scale(1.05) }
      100%{ opacity:0; transform: scale(1.8) }
    }

    /* ヒント */
    .hint{
      margin-top: 10px;
      font-size: clamp(11px, 2.2vw, 13px);
      letter-spacing: .08em;
      color: #b9d4e6;
      opacity: 0; transform: translateY(12px);
      animation: fadeUp .8s ease-out .9s forwards;
    }

    /* 省エネ（モーション軽減） */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important }
    }
  </style>
</head>
<body>

  <!-- 背景コード雨 -->
  <canvas id="codeRain" aria-hidden="true"></canvas>

  <!-- コンテンツ -->
  <div class="content" role="main">
    <h1>Re:Verse Shion — The Temple of Words</h1>
    <p class="lead">扉が開く。言葉が目を覚まし、あなたの“韻”へ導く。</p>

    <h2>詩韻 Shion</h2>
    <p>言葉は祈りの構文 — 大アルカナで“響き”を体験。</p>
    <p>目を閉じて、願いを思い描いてください。<br>恋愛・復縁・連絡時期、何でもOK。</p>

    <div class="door-container">
      <a href="shion.html" class="door-button" id="door" aria-label="扉を開く（詩韻を授かる）">
        <span class="door-text">扉を開く → 詩韻を授かる</span>
        <div class="pulse" aria-hidden="true"></div>
        <div class="particles" id="particles" aria-hidden="true"></div>
      </a>
      <div class="hint">※ タップで光の扉がひらきます</div>
    </div>
  </div>

  <script>
    // ===== 0) 背景：青いコード雨（解像度に正しく追従）=====
    (function codeRain(){
      const cvs = document.getElementById('codeRain');
      const ctx = cvs.getContext('2d');
      const chars = '01AI∴∵⌘◇◆＊＋≡☆★◯●◎∑ΣΛΩΞΨϕπ∞≒≡→←↑↓';
      let fontSize, columns, drops, vw, vh;

      function resize(){
        vw = window.innerWidth;
        vh = window.innerHeight;
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        cvs.width  = vw * dpr;
        cvs.height = vh * dpr;
        ctx.setTransform(1,0,0,1,0,0);          // リセット
        ctx.scale(dpr, dpr);                    // CSSピクセル系に統一
        fontSize = Math.max(12, Math.min(20, Math.floor(vw/52)));
        columns = Math.ceil(vw / fontSize);
        drops = new Array(columns).fill(0).map(()=> Math.floor(Math.random()*vh/fontSize));
      }

      function draw(){
        ctx.fillStyle = 'rgba(2,3,22,0.14)';
        ctx.fillRect(0,0,vw,vh);
        ctx.fillStyle = '#7fd0ff';
        ctx.font = `${fontSize}px monospace`;
        for(let i=0;i<columns;i++){
          const ch = chars[Math.floor(Math.random()*chars.length)];
          const x = i * fontSize;
          const y = drops[i] * fontSize * .95;
          ctx.fillText(ch, x, y);
          if(y > vh && Math.random() > 0.975) drops[i] = 0;
          drops[i]++;
        }
        requestAnimationFrame(draw);
      }
      window.addEventListener('resize', resize, {passive:true});
      resize(); draw();
    })();

    // ===== 1) 粒子（ホバー or 初回だけ軽く）=====
    const door = document.getElementById('door');
    const particlesContainer = document.getElementById('particles');

    function spawnParticles(n=28){
      particlesContainer.innerHTML = '';
      const rect = particlesContainer.getBoundingClientRect();
      for(let i=0;i<n;i++){
        const p = document.createElement('div');
        p.className = 'particle';
        // ランダム開始オフセット（ボタン外周から内側へ寄る）
        p.style.setProperty('--sx', (Math.random()*rect.width - rect.width/2) + 'px');
        p.style.setProperty('--sy', (Math.random()*rect.height - rect.height/2) + 'px');
        p.style.animationDelay = (Math.random()*.25) + 's';
        particlesContainer.appendChild(p);
      }
    }

    if (matchMedia('(hover:hover)').matches){
      door.addEventListener('mouseenter', () => spawnParticles(34));
    } else {
      // タッチ端末は初回だけ控えめに
      setTimeout(() => spawnParticles(16), 600);
    }

    // ===== 2) クリック閃光 → 遷移 =====
    door.addEventListener('click', (e) => {
      e.preventDefault();
      const burst = document.createElement('div');
      burst.className = 'light-burst';
      document.body.appendChild(burst);
      setTimeout(() => { window.location.href = door.getAttribute('href'); }, 420);
    });
  </script>
</body>
</html>
