/* ============ Reset & Base ============ */
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --ink:#1a0d38; --muted:#5a4a80; --violet:#5d3a98; --lav:#8c6cb9; --glow:#ffd76f;
  --haloA: rgba(255,215,111,.3); --haloB: rgba(156,124,201,.25);
  --hero-h: min(100vh, 860px);
}
html,body{height:100%}
body{
  font-family:'Noto Serif JP', serif; color:#f0e6ff; line-height:1.7; min-height:100vh;
  background:
    radial-gradient(1400px 800px at 50% -20%, rgba(156,124,201,.35), transparent 60%),
    radial-gradient(900px 600px at 80% 110%, rgba(255,215,111,.18), transparent 65%),
    linear-gradient(135deg, #2a1a4f 0%, #1a0d38 35%, #0d0626 100%);
  position:relative; overflow-x:hidden;
}
/* 星粒の薄ヴェール (強化) */
body::before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,.6) 0 1px, transparent 2px),
    radial-gradient(circle at 60% 80%, rgba(255,255,255,.55) 0 1px, transparent 2px),
    radial-gradient(circle at 85% 20%, rgba(255,255,255,.5) 0 1px, transparent 2px);
  background-size: 4px 4px, 5px 5px, 6px 6px;
  animation: twinkle 5s infinite ease-in-out alternate; opacity:.7;
}
@keyframes twinkle{ 50%{ opacity:1 } }

/* 粒子Canvas */
.particle-canvas{ position:fixed; inset:0; pointer-events:none; z-index:-2; opacity:0.4; }

/* ============ Hero Temple (霧追加) ============ */
.hero-temple{
  position:relative; height:var(--hero-h); overflow:hidden; isolation:isolate;
  background:#0a051a; color:#fff; font-family:"Great Vibes","Cormorant Garamond",serif;
}
.hero-layer{
  position:absolute; inset:0; background-size:cover; background-position:center;
  transform:scale(1.02);
  transition:opacity 1600ms ease, transform 2000ms ease; will-change:opacity,transform;
}
.hero-fog{ background-image:url("/assets/mystic-fog.jpg"); opacity:1; } /* 検索画像1使用 */
.hero-door{ background-image:url("/assets/temple-door.jpg"); opacity:0; }
.hero-hall{ background-image:url("/assets/temple-hall.jpg"); opacity:0; }

/* 光のヴェール (神秘強化) */
.hero-veil{
  position:absolute; inset:0;
  background: radial-gradient(150px 200px at 50% 60%, rgba(255,255,255,.9), transparent 60%),
              radial-gradient(80px 120px at 50% 60%, rgba(255,230,160,.85), transparent 65%);
  opacity:0; filter:blur(3px); pointer-events:none; transition:opacity 1100ms ease;
}
.hero-glow{
  position:absolute; inset:0;
  background: radial-gradient(900px 600px at 50% 60%, rgba(255,220,160,.25), transparent 70%),
              radial-gradient(1400px 800px at 50% 80%, rgba(124,98,255,.2), transparent 70%);
  mix-blend-mode:screen; opacity:0; pointer-events:none; transition:opacity 1800ms ease 400ms;
}

/* コピー */
.hero-copy{
  position:absolute; inset:0; display:grid; place-items:end center; gap:12px;
  padding:clamp(16px,4vw,40px); text-align:center; transform:translateY(12px); opacity:0;
  transition:opacity 800ms ease, transform 800ms ease;
}
.hero-copy h1{
  font-family:'Great Vibes',cursive; font-size:clamp(28px,5vw,48px); line-height:1.2; letter-spacing:.03em;
  text-shadow:0 8px 35px rgba(0,0,0,.5); margin:0 0 .25em;
}
.hero-copy p{
  font-size:clamp(15px,2.6vw,20px); color:rgba(255,255,255,.95);
  margin:0 0 20px; text-shadow:0 8px 28px rgba(0,0,0,.5);
}

/* 状態クラス (霧追加) */
.hero-temple.is-fog .hero-fog{ opacity:1; transform:scale(1.0) }
.hero-temple.is-opening .hero-veil{ opacity:1 }
.hero-temple.is-opening .hero-door{ opacity:1; transform:scale(1.0) }
.hero-temple.is-revealed .hero-hall{ opacity:1; transform:scale(1.0) }
.hero-temple.is-revealed .hero-door{ opacity:0; transform:scale(1.05) }
.hero-temple.is-revealed .hero-glow{ opacity:1 }
.hero-temple.is-cta .hero-copy{ opacity:1; transform:translateY(0) }

@media (max-width:480px){ :root{ --hero-h:92vh } }

/* ============ Layout (神秘カラー) ============ */
.container{ max-width:480px; margin:0 auto; padding:1rem }

/* Header */
.header{ text-align:center; padding:2rem 1rem 1.5rem }
.title{ font-family:'Great Vibes',cursive; font-size:2.2rem; color:#ffd76f; margin-bottom:.5rem; letter-spacing:.06em }
.subtitle{ font-size:.95rem; color:#ccc; font-weight:500 }

/* Intro */
.intro{
  text-align:center; padding:2rem 1rem; background:rgba(26,13,56,.8);
  border-radius:16px; margin:1rem; box-shadow:0 4px 12px rgba(0,0,0,.15);
}
.guide{ font-size:1.1rem; margin-bottom:1.5rem; color:#ddd }

/* Buttons (ゴールドアクセント) */
.btn-primary{
  appearance:none; border:0; background:linear-gradient(45deg,#8c6cb9,#5d3a98); color:#ffd76f;
  padding:.9rem 2rem; font-size:1.1rem; border-radius:999px; cursor:pointer; font-weight:700;
  box-shadow:0 8px 22px rgba(93,58,152,.4); transition:transform .2s, box-shadow .2s
}
.btn-primary:hover{ transform:translateY(-2px); box-shadow:0 12px 28px rgba(93,58,152,.5) }
.btn-restart{ background:transparent; color:#ffd76f; border:2px solid #ffd76f; padding:.7rem 1.5rem; border-radius:999px; font-size:.9rem; transition:.2s }
.btn-restart:hover{ background:#5d3a98; color:#ffd76f }

/* Tarot Section */
.tarot-section{ padding:2rem 1rem; text-align:center; position:relative; }
.tarot-section::before{ content:""; position:absolute; inset:0; background:url("/assets/mystic-fog.jpg") center/cover; opacity:0.3; z-index:-1; } /* 霧背景 */
.tarot-grid{ display:flex; justify-content:center; gap:1.5rem; flex-wrap:wrap; margin:2rem 0 }
.card-wrapper{ perspective:1000px; width:110px; height:180px; animation:float 6s ease-in-out infinite; }
@keyframes float{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-10px) } }
.card-back{ width:100%; height:100%; position:relative; cursor:pointer; transition:transform .6s; transform-style:preserve-3d }
.card-back.flipped{ transform:rotateY(180deg) }
.card-back.glow{ animation:glow 1.2s ease-in-out }
@keyframes glow{
  0%{ box-shadow:0 0 5px rgba(255,215,111,.5) }
  50%{ box-shadow:0 0 30px rgba(255,215,111,.9),0 0 50px rgba(255,215,111,.6) }
  100%{ box-shadow:0 0 5px rgba(255,215,111,.5) }
}
.card-inner{ position:relative; width:100%; height:100%; text-align:center; transition:transform .6s; transform-style:preserve-3d }
.card-face{
  position:absolute; inset:0; backface-visibility:hidden; border-radius:12px;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  box-shadow:0 4px 12px rgba(0,0,0,.2); overflow:hidden;
}
.card-back-face{
  background:#1a0d38 url("/assets/tarot/back.png") center/cover no-repeat; color:#ffd76f; padding:1rem;
}
.card-front-face{ background:#0d0626; transform:rotateY(180deg); border:2px solid #ffd76f }
.card-image{ width:100%; height:100%; object-fit:cover; border-radius:10px }
.label{ font-size:.9rem; font-weight:600; margin-bottom:.3rem }
.tap{ font-size:.78rem; opacity:.9; margin-top:.3rem }

/* Result (輝き追加) */
.result{ background:rgba(26,13,56,.9); border-radius:16px; padding:1.5rem; margin:2rem 1rem; box-shadow:0 6px 20px rgba(93,58,152,.3); text-align:left }
.result-item{ margin-bottom:1.2rem; position:relative; }
.result-item::before{ content:""; position:absolute; inset:0; box-shadow:0 0 15px rgba(255,215,111,.2); opacity:0; transition:opacity .5s; }
.result:hover .result-item::before{ opacity:1; }
.result-item .icon{ font-size:1.4rem; margin-right:.5rem; color:#ffd76f }
.result-item h3{ display:inline; font-size:1.1rem; color:#ffd76f; font-weight:600 }
.result-item p{ margin-top:.5rem; font-size:1rem; color:#ddd; padding-left:2rem }

/* CTA After */
.cta-after{ text-align:center; padding:1.5rem 1rem }
.next{ margin-bottom:1rem; color:#ccc; font-size:.95rem }
.btn-group{ display:flex; flex-direction:column; gap:.8rem; margin-bottom:1.5rem }
.btn-line,.btn-tiktok,.btn-note{
  display:block; padding:.8rem 1rem; border-radius:999px; font-size:.95rem; text-decoration:none; font-weight:700; transition:.2s
}
.btn-line{ background:#00b900; color:#fff }
.btn-tiktok{ background:#000; color:#fff }
.btn-note{ background:#fff; color:#333; border:2px solid #ddd }

/* Footer */
.footer{ text-align:center; padding:2rem 1rem; font-size:.8rem; color:#aaa }

/* Utils */
.hidden{ display:none !important }
@media (max-width:480px){ .title{ font-size:1.8rem } .card-wrapper{ width:100px; height:165px } }

/* Ritual (神秘オーバーレイ) */
.ritual{ position:fixed; inset:0; background:rgba(26,13,56,.95); display:grid; place-items:center; text-align:center; color:#ffd76f; font-family:'Great Vibes',cursive; font-size:1.2rem; z-index:10; transition:opacity .5s; }
.ritual.hide{ opacity:0; pointer-events:none; }
.chant{ opacity:0; animation:fadeIn 1s forwards; }
.chant:nth-child(1){ animation-delay:0.2s }
.chant:nth-child(2){ animation-delay:0.4s }
.chant:nth-child(3){ animation-delay:0.6s }
@keyframes fadeIn{ to{ opacity:1; } }
