/* /di/css/result.css
   TAROT BREAKER – RESULT OVERLAY (PRO STABLE v1.4.1)
   - iOS safe
   - No CSS nesting errors
   - No invisible click blockers
   - Overlay outside #app
*/

/* =====================================================
   ROOT (body直下に生成される #tbResultOverlayRoot)
   ===================================================== */

#tbResultOverlayRoot{
  position: fixed;
  inset: 0;
  z-index: 2147483647;

  background: transparent;
  isolation: isolate;
  contain: layout paint style;
  transform: translateZ(0);

  /* 初期状態：完全非表示＆タップ無効 */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;

  transition:
    opacity .18s ease,
    visibility 0s linear .18s;
}

/* 表示状態 */
#tbResultOverlayRoot.tb-active{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;

  transition:
    opacity .18s ease,
    visibility 0s linear 0s;
}


/* =====================================================
   APP CUT（ゲーム画面を隠す）
   ===================================================== */

#app.tb-result-active *{
  visibility: hidden !important;
}


/* =====================================================
   SHELL
   ===================================================== */

#tbResultOverlayRoot .tbResultOverlayShell{
  position:absolute;
  inset:0;

  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;

  gap:14px;
  padding:16px;
}


/* =====================================================
   BACKGROUND
   ===================================================== */

#tbResultOverlayRoot .tbResultOverlayBlack{
  position:absolute;
  inset:0;
  z-index:0;

  background:
    radial-gradient(circle at 50% 44%,
      rgba(18,20,28,0.18) 0%,
      rgba(0,0,0,0.88) 56%,
      rgba(0,0,0,0.98) 100%);
}


/* =====================================================
   EYE
   ===================================================== */

#tbResultOverlayRoot .tbEyeStage{
  position:relative;
  z-index:1;
  width:min(92vw,540px);
  display:flex;
  justify-content:center;
  align-items:center;
}

#tbResultOverlayRoot .tbEye{
  position:relative;
  width:min(92vw,540px);
  aspect-ratio:1/1;
  border-radius:999px;
  overflow:hidden;

  background-image:url("/di/dico_eye_result.png");
  background-size:190%;
  background-position:37% 33%;
  background-repeat:no-repeat;

  box-shadow:
    0 28px 90px rgba(0,0,0,0.72),
    0 0 0 1px rgba(255,255,255,0.14) inset;
}


/* =====================================================
   RESONANCE GAUGE
   ===================================================== */

#tbResultOverlayRoot .tbResGauge{
  position:absolute;
  inset:12.5%;
  border-radius:999px;
  pointer-events:none;
}

#tbResultOverlayRoot .tbResGaugeBase,
#tbResultOverlayRoot .tbResGaugeFill{
  position:absolute;
  inset:0;
  border-radius:999px;

  -webkit-mask: radial-gradient(circle,
    transparent calc(100% - 3.6%),
    #fff calc(100% - 3.6% + 0.8%));
  mask: radial-gradient(circle,
    transparent calc(100% - 3.6%),
    #fff calc(100% - 3.6% + 0.8%));
}

/* グレー基礎リング（0%でも表示） */
#tbResultOverlayRoot .tbResGaugeBase{
  background:rgba(190,190,190,0.34);
  opacity:.95;
}

/* ARU進捗リング */
#tbResultOverlayRoot .tbResGaugeFill{
  background:conic-gradient(
    from -90deg,
    var(--tb-aru) 0deg,
    var(--tb-aru) var(--tb-res-angle),
    transparent var(--tb-res-angle)
  );

  opacity:0.98;

  filter:
    drop-shadow(0 0 8px var(--tb-aru))
    drop-shadow(0 0 24px var(--tb-aru));
}


/* =====================================================
   CORE
   ===================================================== */

#tbResultOverlayRoot .tbCore{
  position:absolute;
  inset:40%;
  border-radius:999px;

  background:
    radial-gradient(circle at 36% 32%,
      rgba(255,255,255,0.55) 0%,
      rgba(235,235,235,0.22) 18%,
      rgba(120,120,120,0.30) 44%,
      rgba(40,40,40,0.85) 78%,
      rgba(0,0,0,0.95) 100%);
}


/* =====================================================
   TEXT
   ===================================================== */

#tbResultOverlayRoot .tbResPercent{
  font-size:56px;
  font-weight:900;
  color:rgba(245,245,242,0.92);
}

#tbResultOverlayRoot .tbResLabel{
  font-size:11px;
  letter-spacing:.18em;
  color:rgba(245,245,242,0.68);
}


/* =====================================================
   BUTTON
   ===================================================== */

#tbResultOverlayRoot .tbBtn{
  border:0;
  padding:12px 16px;
  border-radius:14px;

  font-weight:900;
  letter-spacing:.14em;

  background:rgba(255,255,255,0.12);
  color:rgba(245,245,242,0.92);

  box-shadow:0 18px 52px rgba(0,0,0,0.45);
}
