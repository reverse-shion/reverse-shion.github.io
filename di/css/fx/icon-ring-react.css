/* =========================================================
   ICON RING – DUAL SPIN + TAROT MOTIF (CSS ONLY)
   ✅ target is #avatarRingSkin (separate layer)
   ✅ NO translate(-50%) needed because we use inset-based sizing
   ========================================================= */

#avatarRingSkin{
  /* position/inset/z-index は hud.css 側で固定済み想定 */
  will-change: transform, filter;

  /* base spin */
  --ring-speed: 12s; /* slow (world-safe) */
  animation: ringSpinSkin var(--ring-speed) linear infinite;

  /* palette */
  --tarot-cyan: rgba(0,240,255,0.70);
  --tarot-violet: rgba(156,60,255,0.55);
  --tarot-gold: rgba(255,210,120,0.55);
  --tarot-white: rgba(255,255,255,0.18);
}

/* =========================================================
   Layer A (slow): ticks + engraving feel
========================================================= */
#avatarRingSkin::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:999px;
  pointer-events:none;

  background:
    repeating-conic-gradient(
      from -90deg,
      rgba(255,255,255,0.0) 0deg 28deg,
      var(--tarot-gold) 28deg 29.6deg
    ),
    repeating-conic-gradient(
      from 0deg,
      rgba(255,255,255,0.0) 0deg 8deg,
      var(--tarot-cyan) 8deg 8.5deg
    ),
    radial-gradient(circle at 50% 50%,
      rgba(255,255,255,0.00) 0%,
      rgba(255,255,255,0.00) 56%,
      rgba(255,210,120,0.10) 60%,
      rgba(0,240,255,0.08) 67%,
      rgba(255,255,255,0.00) 72%
    );

  -webkit-mask: radial-gradient(circle, transparent 57%, #000 60%);
          mask: radial-gradient(circle, transparent 57%, #000 60%);

  filter:
    drop-shadow(0 0 10px rgba(0,240,255,0.20))
    drop-shadow(0 0 14px rgba(255,210,120,0.12));
  opacity: 0.92;
}

/* =========================================================
   Layer B (faster): sweep wedge + star dust
========================================================= */
#avatarRingSkin::after{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:999px;
  pointer-events:none;

  background:
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,0.00) 0px 6px,
      rgba(255,255,255,0.06) 6px 7px
    ),
    conic-gradient(
      from 0deg,
      rgba(156,60,255,0.00) 0deg 300deg,
      rgba(156,60,255,0.00) 300deg 334deg,
      rgba(255,210,120,0.00) 334deg 338deg,
      rgba(255,210,120,0.55) 338deg 345deg,
      rgba(0,240,255,0.65) 345deg 352deg,
      rgba(0,240,255,0.00) 352deg 360deg
    );

  -webkit-mask: radial-gradient(circle, transparent 66%, #000 69%);
          mask: radial-gradient(circle, transparent 66%, #000 69%);

  filter:
    drop-shadow(0 0 16px rgba(156,60,255,0.22))
    drop-shadow(0 0 18px rgba(255,210,120,0.15));
  opacity: 0.78;

  --sweep-speed: 7.2s;
  animation: sweepSpin var(--sweep-speed) linear infinite;
}

/* =========================================================
   Hit / Boost (optional): skin ring only
   ※JSで #avatarRingSkin に class を付けるなら効く
========================================================= */
#avatarRingSkin.fx-hit{
  animation:
    ringSpinSkin var(--ring-speed) linear infinite,
    fxRingGlow 120ms ease-out both;
}
#avatarRingSkin.fx-boost{ --ring-speed: 5.0s; }
#avatarRingSkin.fx-boost::after{ --sweep-speed: 3.4s; }

/* =========================================================
   Keyframes
========================================================= */
@keyframes ringSpinSkin{
  from{ transform: rotate(0deg); }
  to{   transform: rotate(360deg); }
}
@keyframes sweepSpin{
  from{ transform: rotate(0deg); }
  to{   transform: rotate(360deg); }
}
@keyframes fxRingGlow{
  0%   { filter: brightness(1); }
  40%  { filter: brightness(1.55); }
  100% { filter: brightness(1); }
}
