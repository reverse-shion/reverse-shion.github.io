/* /di/css/fx/icon-ring-react.css
   ICON RING — DUAL SPIN + TAROT MOTIF v2.2 (SAFE POSITION)
   ------------------------------------------------------------
   ✅ Self-contained positioning (won't vanish if hud.css changes)
   ✅ Uses pseudo only (no extra DOM)
   ✅ Does not touch #avatarRing (base ring) → no collisions
*/

#avatarRingSkin{
  position:absolute;
  inset:-18px;             /* ringより少し外へ */
  border-radius:999px;
  pointer-events:none;
  z-index: 3;              /* base ring(2想定)より上、faceより下にしたいなら hud.css で調整 */

  will-change: transform, filter, opacity;

  /* speed vars */
  --ring-speed: 12s;
  --sweep-speed: 7.2s;

  /* palette */
  --tarot-cyan: rgba(0,240,255,0.70);
  --tarot-violet: rgba(156,60,255,0.55);
  --tarot-gold: rgba(255,210,120,0.55);

  animation: ringSpinSkin var(--ring-speed) linear infinite;
}

/* Layer A: ticks / engraving */
#avatarRingSkin::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:inherit;

  background:
    repeating-conic-gradient(
      from -90deg,
      rgba(255,255,255,0.0) 0deg 28deg,
      var(--tarot-gold) 28deg 29.6deg
    ),
    repeating-conic-gradient(
      from 0deg,
      rgba(255,255,255,0.0) 0deg 8deg,
      var(--tarot-cyan) 8deg 8.5deg
    );

  -webkit-mask: radial-gradient(circle, transparent 57%, #000 60%);
          mask: radial-gradient(circle, transparent 57%, #000 60%);

  filter:
    drop-shadow(0 0 10px rgba(0,240,255,0.20))
    drop-shadow(0 0 14px rgba(255,210,120,0.12));
  opacity: 0.90;
}

/* Layer B: sweep wedge / dust */
#avatarRingSkin::after{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:inherit;

  background:
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,0.00) 0px 6px,
      rgba(255,255,255,0.06) 6px 7px
    ),
    conic-gradient(
      from 0deg,
      rgba(156,60,255,0.00) 0deg 338deg,
      rgba(255,210,120,0.55) 338deg 345deg,
      rgba(0,240,255,0.65) 345deg 352deg,
      rgba(0,240,255,0.00) 352deg 360deg
    );

  -webkit-mask: radial-gradient(circle, transparent 66%, #000 69%);
          mask: radial-gradient(circle, transparent 66%, #000 69%);

  filter:
    drop-shadow(0 0 16px rgba(156,60,255,0.22))
    drop-shadow(0 0 18px rgba(255,210,120,0.15));
  opacity: 0.76;

  animation: sweepSpin var(--sweep-speed) linear infinite;
}

/* optional hit (if JS adds fx-hit to skin too) */
#avatarRingSkin.fx-hit{
  animation:
    ringSpinSkin var(--ring-speed) linear infinite,
    fxRingGlow 120ms ease-out both;
}

@keyframes ringSpinSkin{
  from{ transform: rotate(0deg); }
  to  { transform: rotate(360deg); }
}
@keyframes sweepSpin{
  from{ transform: rotate(0deg); }
  to  { transform: rotate(360deg); }
}
@keyframes fxRingGlow{
  0%   { filter: brightness(1); }
  40%  { filter: brightness(1.45); }
  100% { filter: brightness(1); }
}
