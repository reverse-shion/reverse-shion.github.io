/* /di/css/fx/absorb.css
   PRO LIGHT (absorb) — thin stream + dash particles toward avatar ring
   - uses vars:
     --fx-x, --fx-y   : start (px)
     --fx-ang         : angle (deg)
     --fx-len         : length (px)
     --fx-dur         : duration (ms)
*/

.fxAbsorb{
  position: fixed;
  left: 0; top: 0;
  width: 1px; height: 1px;
  transform: translate(var(--fx-x, 0px), var(--fx-y, 0px));
  pointer-events: none;
  z-index: 2147483000;
}

.fxAbsorb .beam{
  position:absolute;
  left: 0; top: 0;
  width: var(--fx-len, 200px);
  height: 2px; /* keep thin */
  transform-origin: 0 50%;
  transform: rotate(var(--fx-ang, 0deg));
  border-radius: 999px;

  /* main beam */
  background: linear-gradient(90deg,
    rgba(255,255,255,0.0) 0%,
    rgba(0,240,255,0.45) 18%,
    rgba(156,60,255,0.35) 52%,
    rgba(255,255,255,0.70) 78%,
    rgba(255,255,255,0.0) 100%
  );

  filter: drop-shadow(0 0 8px rgba(0,240,255,0.22))
          drop-shadow(0 0 10px rgba(156,60,255,0.16));
  opacity: 0;
  animation: fxBeamIn var(--fx-dur, 240ms) ease-out both;
}

.fxAbsorb .beam::after{
  content:"";
  position:absolute;
  inset:-8px 0 -8px 0;
  border-radius: 999px;

  /* dash particles: repeating gradient that scrolls */
  background: repeating-linear-gradient(90deg,
    rgba(255,255,255,0.0) 0 10px,
    rgba(255,255,255,0.60) 10px 14px,
    rgba(0,240,255,0.0) 14px 20px,
    rgba(0,240,255,0.55) 20px 24px,
    rgba(156,60,255,0.0) 24px 32px,
    rgba(156,60,255,0.45) 32px 36px,
    rgba(255,255,255,0.0) 36px 46px
  );
  opacity: 0;
  mask-image: linear-gradient(90deg,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,1) 18%,
    rgba(0,0,0,1) 85%,
    rgba(0,0,0,0) 100%
  );
  animation:
    fxDash var(--fx-dur, 240ms) linear both,
    fxDashFade var(--fx-dur, 240ms) ease-out both;
}

.fxAbsorb.is-perfect .beam{
  /* B: 2〜3本の束（芯は同じ、補助線を薄く追加） */
  height: 2px;
}

.fxAbsorb.is-perfect .beam::before{
  content:"";
  position:absolute;
  left:0; top:50%;
  width:100%;
  height:1px;
  transform: translateY(-6px);
  border-radius:999px;
  background: linear-gradient(90deg,
    rgba(0,0,0,0) 0%,
    rgba(0,240,255,0.28) 20%,
    rgba(156,60,255,0.22) 60%,
    rgba(255,255,255,0.0) 100%
  );
  opacity: 0;
  animation: fxBeamIn var(--fx-dur, 240ms) ease-out both;
  filter: drop-shadow(0 0 6px rgba(0,240,255,0.16));
}

.fxAbsorb.is-perfect .beam i{
  position:absolute;
  left:0; top:50%;
  width:100%;
  height:1px;
  transform: translateY(6px);
  border-radius:999px;
  background: linear-gradient(90deg,
    rgba(0,0,0,0) 0%,
    rgba(156,60,255,0.24) 22%,
    rgba(0,240,255,0.18) 58%,
    rgba(255,255,255,0.0) 100%
  );
  opacity: 0;
  animation: fxBeamIn var(--fx-dur, 240ms) ease-out both;
  filter: drop-shadow(0 0 6px rgba(156,60,255,0.14));
}

@keyframes fxBeamIn{
  0%   { opacity:0; }
  20%  { opacity:1; }
  100% { opacity:0; }
}

@keyframes fxDash{
  0%   { background-position: 0 0; }
  100% { background-position: 140px 0; }
}

@keyframes fxDashFade{
  0%   { opacity:0; }
  25%  { opacity:0.90; }
  100% { opacity:0; }
}
