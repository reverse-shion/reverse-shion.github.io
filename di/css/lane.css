/* /di/css/lane.css */
/* Gameplay lane / hit zone / target / judge / result */

.hitZone{
  position:absolute;
  inset: 0;
  z-index:4;
  pointer-events:none;
}

/* Make the visible lane area thin so the dance video is seen */
.stage::before{
  content:"";
  position:absolute;
  left: 50%;
  top: calc(env(safe-area-inset-top) + 22px);
  transform: translateX(-50%);
  width: min(420px, 70vw);
  height: calc(100% - (var(--bottomH) + 34px + env(safe-area-inset-bottom)));
  z-index:4;
  border-radius: 22px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  outline: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 0 0 1px rgba(0,240,255,.06), 0 22px 65px rgba(0,0,0,.30);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  pointer-events:none;
  opacity:.70;
}

/* TARGET core */
.targetRoot{
  position:absolute;
  left:50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 180px;
  height: 180px;
  z-index:6;
  pointer-events:none;
}

.targetOuter, .targetCore, .targetRing{
  position:absolute;
  inset:0;
  border-radius: 999px;
}

.targetOuter{
  background:
    radial-gradient(circle at 50% 50%, rgba(0,0,0,.0) 45%, rgba(0,0,0,.40) 78%, rgba(0,0,0,.55) 100%);
  outline: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 12px 44px rgba(0,0,0,.42);
}
.targetCore{
  inset: 42px;
  background:
    radial-gradient(circle at 45% 40%, rgba(255,255,255,.18), rgba(255,255,255,.06) 40%, rgba(0,0,0,.18) 76%);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.targetRing{
  inset: 14px;
  border: 2px solid rgba(0,240,255,.22);
  box-shadow:
    0 0 0 1px rgba(156,60,255,.10),
    0 0 20px rgba(0,240,255,.16),
    0 0 26px rgba(230,201,107,.10);
}

/* scan line */
.scanLine{
  position:absolute;
  left: 18px;
  right: 18px;
  top: 50%;
  height: 2px;
  transform: translateY(-50%);
  background: linear-gradient(90deg, transparent, rgba(0,240,255,.65), transparent);
  filter: blur(.2px);
  opacity:.0;
  animation: scanMove 1.25s ease-in-out infinite;
}

/* flash on hit (engine toggles) */
.hitFlash{
  position:absolute;
  inset:-8px;
  border-radius:999px;
  background: radial-gradient(circle at 50% 50%, rgba(0,240,255,.28), transparent 62%);
  opacity:0;
  transform: scale(.98);
  transition: opacity .10s ease, transform .10s ease;
}
.app[data-state="playing"] .scanLine{ opacity:.9; }

/* JUDGE */
.judge{
  position:absolute;
  left:50%;
  top: calc(50% - 150px);
  transform: translateX(-50%);
  z-index:7;
  pointer-events:none;
  text-align:center;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.20);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 12px 40px rgba(0,0,0,.35);
  opacity:0;
}
.judgeMain{
  font-size: 20px;
  font-weight: 1000;
  letter-spacing: .10em;
}
.judgeSub{
  margin-top: 2px;
  font-size: 11px;
  letter-spacing: .22em;
  color: var(--muted);
}

/* RESULT modal */
.result{
  position:absolute;
  inset:0;
  z-index:20;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
  background: rgba(0,0,0,.48);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  opacity:0;
  pointer-events:none;
}
.resultCard{
  width: min(520px, 92vw);
  border-radius: var(--r2);
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.08);
  box-shadow: var(--sh1);
  padding: 18px 18px 16px;
  animation: pop .18s ease both;
}
.resultTitle{
  font-weight: 1000;
  letter-spacing: .22em;
  font-size: 14px;
  color: var(--muted);
}
.resultRow{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  padding: 10px 0 0;
}
.resultKey{
  color: var(--muted);
  letter-spacing:.14em;
  font-size: 12px;
}
.resultVal{
  font-weight: 1000;
  font-size: 18px;
}
.resultDivider{
  height:1px;
  background: rgba(255,255,255,.12);
  margin: 14px 0;
}

/* ARU ring */
.aruWrap{ display:flex; flex-direction:column; gap: 10px; align-items:center; }
.aruRing{
  width: 220px;
  height: 220px;
  position:relative;
  display:grid;
  place-items:center;
}
.aruSvg{
  width: 220px;
  height: 220px;
  filter: drop-shadow(0 14px 40px rgba(0,0,0,.35));
}
.aruTrack{
  fill:none;
  stroke: rgba(255,255,255,.12);
  stroke-width: 10;
}
.aruProg{
  fill:none;
  stroke: url(#aruGrad);
  stroke-width: 10;
  stroke-linecap: round;
  stroke-dasharray: 276.46; /* 2*pi*44 */
  stroke-dashoffset: 276.46;
  transition: stroke-dashoffset .18s ease;
}
.aruText{
  position:absolute;
  text-align:center;
}
.aruLabel{
  font-size: 11px;
  letter-spacing: .22em;
  color: var(--muted);
}
.aruValue{
  margin-top: 4px;
  font-size: 22px;
  font-weight: 1000;
}
.dicoLine{
  text-align:center;
  max-width: 460px;
  font-size: 13px;
  color: var(--text);
  opacity:.92;
}

/* show/hide states (main.js can set data-state and aria-hidden) */
.app[data-state="result"] #result{
  opacity:1;
  pointer-events:auto;
}
.app[data-state="result"] .judge{
  opacity:0 !important;
}

/* fallback: if you toggle #judge / #result aria-hidden in JS */
#judge[aria-hidden="false"]{ opacity:1; }
#result[aria-hidden="false"]{ opacity:1; pointer-events:auto; }

/* mobile tweaks */
@media (max-width: 720px){
  .targetRoot{ width: 160px; height: 160px; }
  .judge{ top: calc(50% - 130px); }
  .aruRing, .aruSvg{ width: 200px; height: 200px; }
}
