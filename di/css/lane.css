/* /di/css/lane.css */
/* DiCo LANE – neon thin lane + bright judge + readable target + result */

.hitZone{
  position:absolute;
  inset:0;
  z-index:4;
  pointer-events:none;
}

/* =========================
   CENTER LANE (thin + full height + neon edges)
   - Always centered
   - Extends beyond screen a bit
   - Edge neon lines
   ========================= */
.stage::before{
  content:"";
  position:absolute;
  left:50%;
  top:-10vh;              /* extend beyond top */
  bottom:-12vh;           /* extend beyond bottom */
  transform: translateX(-50%);

  /* ✅ thin: just enough for notes */
  width: min(220px, 54vw);

  z-index:4;
  pointer-events:none;

  border-radius: 28px;

  /* glass lane body */
  background:
    linear-gradient(180deg,
      rgba(255,255,255,.10),
      rgba(255,255,255,.03)
    );

  outline: 1px solid rgba(255,255,255,.10);

  /* ✅ neon edges + subtle depth */
  box-shadow:
    inset 3px 0 0 rgba(0,240,255,.62),     /* left cyan edge */
    inset -3px 0 0 rgba(156,60,255,.52),   /* right violet edge */
    inset 0 0 42px rgba(0,240,255,.08),
    0 0 0 1px rgba(0,240,255,.10),
    0 22px 70px rgba(0,0,0,.18);

  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  opacity:.82;
}

/* soft moving shimmer inside lane (DiCo vibe) */
.stage::after{
  content:"";
  position:absolute;
  left:50%;
  top:-10vh;
  bottom:-12vh;
  transform: translateX(-50%);
  width: min(220px, 54vw);
  z-index:4;
  pointer-events:none;
  border-radius: 28px;

  background:
    linear-gradient(115deg,
      transparent 0%,
      rgba(0,240,255,.16) 22%,
      rgba(156,60,255,.12) 48%,
      rgba(230,201,107,.10) 62%,
      transparent 80%
    );
  mix-blend-mode: screen;
  opacity:.45;
  filter: blur(.2px);
  animation: laneShimmer 2.6s linear infinite;
}

@keyframes laneShimmer{
  0%   { background-position: -240px 0; }
  100% { background-position:  240px 0; }
}

/* =========================
   TARGET (brighter + cleaner)
   ========================= */
.targetRoot{
  position:absolute;
  left:50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 176px;
  height: 176px;
  z-index:6;
  pointer-events:none;
}

.targetOuter, .targetCore, .targetRing{
  position:absolute;
  inset:0;
  border-radius: 999px;
}

.targetOuter{
  background:
    radial-gradient(circle at 50% 50%,
      rgba(255,255,255,.06) 0%,
      rgba(255,255,255,.04) 44%,
      rgba(0,0,0,.16) 78%,
      rgba(0,0,0,.22) 100%);
  outline: 1px solid rgba(255,255,255,.14);
  box-shadow:
    0 10px 40px rgba(0,0,0,.22),
    0 0 32px rgba(0,240,255,.10);
}

.targetCore{
  inset: 44px;
  background:
    radial-gradient(circle at 45% 40%,
      rgba(255,255,255,.26),
      rgba(255,255,255,.10) 40%,
      rgba(0,0,0,.10) 76%);
  border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.targetRing{
  inset: 12px;
  border: 2px solid rgba(0,240,255,.34);
  box-shadow:
    0 0 0 1px rgba(156,60,255,.14),
    0 0 22px rgba(0,240,255,.22),
    0 0 34px rgba(156,60,255,.18),
    0 0 26px rgba(230,201,107,.12);
}

/* scan line */
.scanLine{
  position:absolute;
  left: 16px;
  right: 16px;
  top: 50%;
  height: 2px;
  transform: translateY(-50%);
  background: linear-gradient(90deg,
    transparent,
    rgba(0,240,255,.88),
    rgba(156,60,255,.62),
    transparent);
  opacity:0;
  filter: blur(.2px);
  animation: scanMove 1.15s ease-in-out infinite;
}
@keyframes scanMove{
  0%,100%{ transform: translateY(-50%) scaleX(.92); }
  50%    { transform: translateY(-50%) scaleX(1.06); }
}

/* flash on hit (engine toggles opacity) */
.hitFlash{
  position:absolute;
  inset:-10px;
  border-radius:999px;
  background: radial-gradient(circle at 50% 50%,
    rgba(0,240,255,.38),
    rgba(156,60,255,.18) 42%,
    transparent 68%);
  opacity:0;
  transform: scale(.98);
  transition: opacity .10s ease, transform .10s ease;
}
.app[data-state="playing"] .scanLine{ opacity:.92; }

/* =========================
   JUDGE (bright + readable)
   ========================= */
.judge{
  position:absolute;
  left:50%;
  top: calc(50% - 150px);
  transform: translateX(-50%);
  z-index:7;
  pointer-events:none;
  text-align:center;

  padding: 10px 16px;
  border-radius: 999px;

  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.14);  /* ✅ brighter */
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  box-shadow:
    0 12px 38px rgba(0,0,0,.18),
    0 0 26px rgba(0,240,255,.14);

  opacity:0;
}

.judgeMain{
  font-size: 20px;
  font-weight: 1000;
  letter-spacing: .10em;
  text-shadow:
    0 0 22px rgba(0,240,255,.22),
    0 0 14px rgba(156,60,255,.16);
}

.judgeSub{
  margin-top: 2px;
  font-size: 11px;
  letter-spacing: .22em;
  color: rgba(245,245,242,.78);
}

/* show/hide states */
#judge[aria-hidden="false"]{ opacity:1; }

/* =========================
   RESULT modal
   ========================= */
.result{
  position:absolute;
  inset:0;
  z-index:20;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;

  /* slightly lighter than “movie black” */
  background: rgba(0,0,0,.34);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  opacity:0;
  pointer-events:none;
}

.resultCard{
  width: min(520px, 92vw);
  border-radius: var(--r2);
  border: 1px solid rgba(255,255,255,.18);

  background:
    linear-gradient(180deg,
      rgba(255,255,255,.14),
      rgba(255,255,255,.08)
    );

  box-shadow:
    0 22px 70px rgba(0,0,0,.24),
    0 0 40px rgba(0,240,255,.10);

  padding: 18px 18px 16px;
  animation: pop .18s ease both;
}

@keyframes pop{
  from{ transform: translateY(8px) scale(.98); opacity:.0; }
  to  { transform: translateY(0)  scale(1);   opacity:1; }
}

.resultTitle{
  font-weight: 1000;
  letter-spacing: .22em;
  font-size: 14px;
  color: rgba(245,245,242,.78);
}

.resultRow{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  padding: 10px 0 0;
}

.resultKey{
  color: rgba(245,245,242,.68);
  letter-spacing:.14em;
  font-size: 12px;
}

.resultVal{
  font-weight: 1000;
  font-size: 18px;
}

.resultDivider{
  height:1px;
  background: rgba(255,255,255,.14);
  margin: 14px 0;
}

/* ARU ring */
.aruWrap{ display:flex; flex-direction:column; gap: 10px; align-items:center; }

.aruRing{
  width: 220px;
  height: 220px;
  position:relative;
  display:grid;
  place-items:center;
}

.aruSvg{
  width: 220px;
  height: 220px;
  filter:
    drop-shadow(0 14px 40px rgba(0,0,0,.26))
    drop-shadow(0 0 22px rgba(0,240,255,.12));
}

.aruTrack{
  fill:none;
  stroke: rgba(255,255,255,.14);
  stroke-width: 10;
}

.aruProg{
  fill:none;
  stroke: url(#aruGrad);
  stroke-width: 10;
  stroke-linecap: round;
  stroke-dasharray: 276.46; /* 2*pi*44 */
  stroke-dashoffset: 276.46;
  transition: stroke-dashoffset .18s ease;
}

.aruText{
  position:absolute;
  text-align:center;
}

.aruLabel{
  font-size: 11px;
  letter-spacing: .22em;
  color: rgba(245,245,242,.72);
}

.aruValue{
  margin-top: 4px;
  font-size: 22px;
  font-weight: 1000;
  text-shadow: 0 0 20px rgba(0,240,255,.14);
}

.dicoLine{
  text-align:center;
  max-width: 460px;
  font-size: 13px;
  color: rgba(245,245,242,.92);
}

/* state */
.app[data-state="result"] #result{
  opacity:1;
  pointer-events:auto;
}
.app[data-state="result"] .judge{
  opacity:0 !important;
}
#result[aria-hidden="false"]{ opacity:1; pointer-events:auto; }

/* =========================
   Mobile tweaks
   ========================= */
@media (max-width: 720px){
  .targetRoot{ width: 160px; height: 160px; }
  .judge{ top: calc(50% - 132px); }
  .aruRing, .aruSvg{ width: 200px; height: 200px; }
}

@media (max-width: 560px){
  .stage::before,
  .stage::after{
    width: min(200px, 58vw);
    border-radius: 26px;
  }
}
