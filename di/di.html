<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
<meta name="theme-color" content="#05060b" />
<meta name="format-detection" content="telephone=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<title>DiCo ARU – Phase1</title>

<!-- ===============================
     CORE LAYOUT (順序固定)
================================ -->
<link rel="stylesheet" href="./css/themes.css" />
<link rel="stylesheet" href="./css/core.css" />
<link rel="stylesheet" href="./css/hud.css" />
<link rel="stylesheet" href="./css/lane.css" />
<link rel="stylesheet" href="./css/result.css" />
<link rel="stylesheet" href="./css/aru-gauge.css" />

<!-- ===============================
     FX LAYER (順序厳守)
================================ -->
<link rel="stylesheet" href="./css/fx/fx-layer.css" />
<link rel="stylesheet" href="./css/fx/fx-particles.css" />
<link rel="stylesheet" href="./css/fx/fx-ring.css" />
<link rel="stylesheet" href="./css/fx/icon-ring-react.css" />
<link rel="stylesheet" href="./css/fx/ring-beat.css" />
<link rel="stylesheet" href="./css/fx/crit-flash.css" />
<link rel="stylesheet" href="./css/fx/absorb.css" />
<link rel="stylesheet" href="./css/fx/fx-max.css" />

<!-- ===============================
     PRELOAD
================================ -->
<link rel="preload" href="./idle/dico_idle.jpg" as="image" fetchpriority="high" />
<link rel="preload" href="./video/di_dance.mp4" as="video" type="video/mp4" />
<link rel="preload" href="./audio/music.mp3" as="audio" />
<link rel="preload" href="./audio/se_tap.wav" as="audio" />
<link rel="preload" href="./audio/se_perfect.wav" as="audio" />

<link rel="preload" href="./faces/dico_face_1.png" as="image" />
<link rel="preload" href="./faces/dico_face_2.png" as="image" />
<link rel="preload" href="./faces/dico_face_3.png" as="image" />
<link rel="preload" href="./faces/dico_face_4.png" as="image" />
<link rel="preload" href="./faces/dico_face_5.png" as="image" />
</head>

<body>

<main id="app"
      class="app"
      data-state="idle"
      data-aru-state="low"
      style="--aru-value:0.17"
      aria-label="DiCo ARU Rhythm">

<!-- ===============================
     IDLE BACKGROUND
================================ -->
<div class="idleBg" aria-hidden="true">
  <img class="idleImg"
       src="./idle/dico_idle.jpg"
       alt=""
       draggable="false"
       decoding="async"
       loading="eager" />
  <canvas id="idleParticles" class="idleParticles"></canvas>
  <div class="idleLine">キミの想いを、共鳴に変えて。</div>
</div>

<video id="bgVideo"
       class="bgVideo"
       src="./video/di_dance.mp4"
       playsinline
       muted
       loop
       preload="auto"></video>

<!-- ===============================
     FX ROOT（最前面管理）
================================ -->
<div id="fxLayer" class="fxLayer"></div>

<!-- ===============================
     LEFT HUD
================================ -->
<aside class="sideHud sideHudLeft">
  <div class="sideCard sideScore">
    <div class="sideScoreValue" id="sideScore">000000</div>
    <div class="sideScoreSub">SUBJECT: SHION</div>
  </div>

  <div class="sideCard sideCombo">
    <div class="sideComboValue" id="sideCombo">0</div>
    <div class="sideComboLabel">COMBO</div>
    <div class="sideComboMeta">
      <span class="metaLabel">MAX</span>
      <span class="metaValue" id="sideMaxCombo">0</span>
    </div>
  </div>
</aside>

<!-- ===============================
     RIGHT HUD
================================ -->
<aside class="sideHud sideHudRight">
  <div class="sideCard sidePlayer">

    <div class="sideTop">
      <div class="sideName">
        <div class="sideNameMain" id="playerName">DiCo</div>
        <div class="sideNameSub">RESONANCE</div>
      </div>

      <!-- AVATAR -->
      <div class="sideAvatar">
        <div id="avatarRing" class="avatarRing res-ring"></div>
        <img id="dicoFace"
             class="dicoFace"
             src="./faces/dico_face_1.png"
             alt="DiCo"
             draggable="false"
             decoding="async"
             loading="eager" />
        <div id="avatarRingSkin" class="avatarRingSkin"></div>
      </div>
    </div>

    <div class="sideGauge">
      <div class="sideGaugeRow">
        <div class="sideGaugeLabel">RESONANCE</div>
        <div class="sideGaugeValue">
          <span id="resValue">0</span><span class="pct">%</span>
        </div>
      </div>

      <div class="sideGaugeBar">
        <div id="resFill" class="sideGaugeFill"></div>
      </div>

      <div class="sideTimeRow">
        <div class="sideTimeLabel">TIME</div>
        <div class="sideTimeValue" id="time">--</div>
      </div>
    </div>

  </div>
</aside>

<!-- ===============================
     STAGE
================================ -->
<section id="stage" class="stage">
  <canvas id="noteCanvas" class="noteCanvas"></canvas>
  <div id="hitZone" class="hitZone"></div>

  <div id="judge" class="judge">
    <div id="judgeMain" class="judgeMain">GREAT</div>
    <div id="judgeSub" class="judgeSub">SYNC</div>
  </div>
</section>

<!-- ===============================
     CONTROLS
================================ -->
<footer class="bottom">
  <button id="startBtn" class="btn primary" type="button">START</button>
  <button id="stopBtn" class="btn" type="button">STOP</button>
  <button id="restartBtn" class="btn" type="button">RESTART</button>
</footer>

<!-- ===============================
     AUDIO
================================ -->
<audio id="music" src="./audio/music.mp3" preload="auto"></audio>
<audio id="seTap" src="./audio/se_tap.wav" preload="auto"></audio>
<audio id="seGreat" src="./audio/se_perfect.wav" preload="auto"></audio>

</main>

<script src="./js/common.js" defer></script>
<script type="module" src="./js/main.js"></script>

</body>
</html>
