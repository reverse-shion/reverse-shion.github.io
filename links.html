<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TAROT BREAKER / 時間記録殿（Chronologium）</title>

<style>
:root{
  color-scheme: dark;
  --bg:#05070d;
  --glass:rgba(10,16,28,.55);
  --glass-strong:rgba(6,10,20,.75);
  --line:rgba(120,220,255,.35);
  --cyan:#7fe6ff;
  --violet:#c6a6ff;
  --amber:#ffe0a6;
  --muted:rgba(230,240,255,.7);
  --shadow:0 24px 60px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{
  margin:0;
  font-family:"Noto Sans JP","Yu Gothic",sans-serif;
  background:var(--bg);
  color:#edf7ff;
}

body{
  min-height:100vh;
  background:url("assets/chronologium.png") center/cover fixed;
  overflow-x:hidden;
}
@media(max-width:820px){
  body{background-attachment:scroll}
}

body::before,body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
}
body::before{
  background:linear-gradient(180deg,rgba(5,6,12,.5),rgba(6,8,16,.25),rgba(4,6,10,.5));
}
body::after{
  background:
    repeating-linear-gradient(0deg,rgba(255,255,255,.04),rgba(255,255,255,.04) 1px,transparent 1px,transparent 4px),
    radial-gradient(circle at 20% 20%,rgba(125,220,255,.1),transparent 40%);
  mix-blend-mode:screen;
  opacity:.6;
}

main{
  position:relative;
  z-index:1;
  padding:120px 6vw 140px;
  display:flex;
  flex-direction:column;
  gap:36px;
}

header,.panel{
  max-width:1100px;
  margin:auto;
  background:var(--glass);
  border-radius:26px;
  border:1px solid rgba(120,220,255,.2);
  box-shadow:var(--shadow);
  backdrop-filter:blur(14px);
  padding:32px;
}

header h1{
  margin:0 0 8px;
  color:var(--cyan);
  letter-spacing:.12em;
}
header p{color:var(--muted)}

.latest{
  display:grid;
  grid-template-columns:1fr auto;
  gap:24px;
}
@media(max-width:820px){
  .latest{grid-template-columns:1fr}
}

.latest h2{
  color:var(--amber);
  letter-spacing:.2em;
}

#latestPreview{
  background:rgba(6,10,20,.7);
  border:1px solid rgba(120,220,255,.25);
  border-radius:18px;
  padding:18px 20px;
  line-height:1.7;
  position:relative;
  overflow:hidden;
}

/* scanline */
#latestPreview::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
  opacity:.35;
  background:
    repeating-linear-gradient(
      180deg,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 1px,
      transparent 4px,
      transparent 6px
    );
  animation:scan 6s linear infinite;
}
@keyframes scan{
  from{transform:translateY(-10%)}
  to{transform:translateY(10%)}
}
@media(prefers-reduced-motion:reduce){
  #latestPreview::after{animation:none}
}

#latestPreview[data-error="true"]{
  color:#ffb1b1;
  border-color:rgba(255,120,120,.35);
}

.actions{
  display:flex;
  flex-direction:column;
  gap:14px;
}

.btn{
  text-decoration:none;
  text-align:center;
  padding:12px 20px;
  border-radius:14px;
  border:1px solid rgba(120,220,255,.45);
  color:#eef7ff;
  letter-spacing:.18em;
  background:linear-gradient(135deg,rgba(24,44,76,.9),rgba(14,22,40,.95));
  transition:.2s;
}
.btn:hover{transform:translateY(-2px)}
.btn.secondary{border-color:rgba(198,166,255,.45);color:var(--violet)}

.log-band{
  padding:18px;
  background:rgba(6,10,20,.65);
  border-radius:22px;
  border:1px solid rgba(120,220,255,.18);
  overflow:hidden;
}
.log-track{
  display:flex;
  gap:28px;
  animation:marquee 40s linear infinite;
  width:max-content;
}
@keyframes marquee{
  from{transform:translateX(0)}
  to{transform:translateX(-50%)}
}

.log-item a{
  color:var(--cyan);
  text-decoration:none;
  border:1px solid rgba(120,220,255,.25);
  padding:6px 10px;
  border-radius:999px;
}

.link-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:18px;
}
.link-node{
  text-decoration:none;
  color:#edf7ff;
  padding:18px;
  border-radius:18px;
  border:1px solid rgba(120,220,255,.2);
  background:rgba(6,12,22,.6);
  transition:.2s;
}
.link-node:hover{transform:translateY(-4px)}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(3,6,12,.88);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.overlay.hidden{opacity:0;visibility:hidden}

.boot-panel{
  background:var(--glass-strong);
  padding:28px 30px;
  border-radius:20px;
  border:1px solid rgba(120,220,255,.3);
  letter-spacing:.18em;
}
.skip-button{
  border:1px solid rgba(198,166,255,.5);
  background:none;
  color:var(--violet);
  padding:8px 16px;
  border-radius:999px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="overlay" id="bootOverlay">
  <div class="boot-panel">
    <div class="boot-line"></div>
    <div class="boot-line"></div>
    <div class="boot-line"></div>
    <div class="boot-line"></div>
    <div class="boot-line"></div>
    <button class="skip-button" id="skipBoot">SKIP</button>
  </div>
</div>

<main>

<header>
  <h1>時間記録殿（Chronologium）</h1>
  <p>これはリンク集ではない。<br>記録と不可逆を観測する装置である。</p>
</header>

<section class="panel latest">
  <div>
    <h2>最新話ログ</h2>
    <pre id="latestPreview">> LOADING LOG...</pre>
  </div>
  <div class="actions">
    <a class="btn" href="https://ncode.syosetu.com/n8578lq/12/" target="_blank">▶ 再生</a>
    <a class="btn secondary" href="star-memory.html">STAR MEMORY</a>
  </div>
</section>

<section class="panel log-band">
  <div class="log-track">
    <div class="log-item"><a href="https://ncode.syosetu.com/n8578lq/">NAROU</a></div>
    <div class="log-item"><a href="https://kakuyomu.jp/works/822139843408910379">KAKUYOMU</a></div>
    <div class="log-item"><a href="https://note.com/shion_uranai369">NOTE</a></div>
    <div class="log-item"><a href="https://x.com/TaroBure">X</a></div>
    <div class="log-item"><a href="https://www.instagram.com/shionverse_official">INSTAGRAM</a></div>
  </div>
</section>

</main>

<script>
/* ===== BOOT ===== */
const overlay=document.getElementById("bootOverlay");
const skip=document.getElementById("skipBoot");
const lines=document.querySelectorAll(".boot-line");

const seed=new Date().getDate();
const bootText=[
"> CHRONOLOGIUM // BOOT",
"> LINK : STAR MEMORY",
"> NAME / REPLY / IRREVERSIBLE",
seed%2?"> SYNC ... DELTA":"> SYNC ... STABLE",
"> ACCESS GRANTED"
];
lines.forEach((l,i)=>l.textContent=bootText[i]);

document.body.style.overflow="hidden";
setTimeout(hide,1800);
skip.onclick=hide;
overlay.onclick=hide;

function hide(){
  overlay.classList.add("hidden");
  document.body.style.overflow="";
}

/* ===== LOG FETCH ===== */
const preview=document.getElementById("latestPreview");
let timer,abort;

function typeText(text){
  if(timer)clearInterval(timer);
  abort={stop:false};
  preview.textContent="";
  let i=0;
  timer=setInterval(()=>{
    if(abort.stop){clearInterval(timer);return}
    preview.textContent+=text[i++]||"";
    if(i>=text.length)clearInterval(timer);
  },16);
}

fetch("./latest.txt",{cache:"no-store"})
.then(r=>r.ok?r.text():Promise.reject())
.then(t=>{
  const text=t.trim();
  if(!text)throw 0;
  typeText(text);
})
.catch(()=>{
  preview.textContent="> ERROR: LOG UNAVAILABLE";
  preview.dataset.error="true";
});

/* ===== MARQUEE TOGGLE ===== */
const band=document.querySelector(".log-band");
const track=document.querySelector(".log-track");
let paused=false;
band.onclick=()=>{
  paused=!paused;
  track.style.animationPlayState=paused?"paused":"running";
};
</script>

</body>
</html>
