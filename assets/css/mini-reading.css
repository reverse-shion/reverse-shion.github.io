/* =========================================================
   Re:verse Shion — Mini Reading (3-cards) scoped stylesheet
   Version: 2025-11-02 stable
   役割：#mini-reading セクション専用（UI・カード反転・結果表示）
   注意：全体CSSと重複/競合しないよう、.tb-mini でスコープ。
   ========================================================= */

.tb-mini{
  --ink:#26263a;
  --muted:#727297;
  --halo:#ffd76f80;
  --accent:#7e66ff;
  --panel:#ffffffcc;
  --r:16px;

  /* 裏面画像：ここで一元管理（存在する実ファイルに合わせて更新） */
  --card-back-url: url("/assets/tarot/back.png?v=1");

  color:var(--ink);
}
.tb-mini *{box-sizing:border-box}

/* ===== Head ===== */
.tb-mini .tbm-head{
  padding:20px 16px 8px;
  background:linear-gradient(#fff,#fff8);
  backdrop-filter:saturate(140%) blur(6px);
  border-radius:18px
}
.tb-mini .tbm-head h2{margin:0 0 6px;font-size:20px}
.tb-mini .tbm-lead{margin:0 0 12px;color:var(--muted);font-size:14px}
.tb-mini .tbm-actions{display:flex;gap:12px;flex-wrap:wrap}
.tb-mini .tbm-btn{
  appearance:none;border:none;border-radius:999px;padding:10px 16px;background:#eee;color:#333;
  font-weight:700;cursor:pointer;transition:transform .05s ease
}
.tb-mini .tbm-btn.primary{
  background:linear-gradient(135deg,#ffb3cf,#ffd76f 60%,#ffe8a8);
  box-shadow:0 8px 24px -10px var(--halo)
}
.tb-mini .tbm-btn:active{transform:translateY(1px)}

/* ===== Spread ===== */
.tb-mini .tbm-spread{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:20px;padding:18px 0 28px
}
@media (max-width:780px){
  .tb-mini .tbm-spread{grid-template-columns:1fr}
}

.tb-mini .tbm-slot{
  position:relative;background:var(--panel);border-radius:20px;padding:16px;
  border:1px solid #eee;box-shadow:0 10px 30px -20px rgba(0,0,0,.2);
  display:flex;flex-direction:column;align-items:center;gap:10px
}
.tb-mini .tbm-title{margin:0 0 6px;font-size:15px;color:var(--muted)}
.tb-mini .tbm-name{
  font-weight:800; font-size:14px; letter-spacing:.02em;
  color:#5a4a86; margin:2px 0 0; min-height:1.6em; /* レイアウト揺れ防止 */
}
.tb-mini .tbm-hint{margin:8px 2px 0;font-size:14px;min-height:2.4em;color:#454562;text-align:center}

/* ===== Card core ===== */
.tb-mini .tbm-card{
  position:relative;width:100%;aspect-ratio:2/3;border-radius:14px;cursor:pointer;
  perspective:1000px;outline:none;will-change:transform,box-shadow;overflow:hidden;
  /* 触ってもサイズは変えない（拡大禁止） */
  transition:box-shadow .35s ease, filter .35s ease;
  box-shadow: 0 8px 22px rgba(0,0,0,.18);
}
.tb-mini .tbm-card:hover{ box-shadow: 0 12px 28px rgba(126,102,255,.28) }

.tb-mini .tbm-card-inner{
  position:absolute; inset:0; transform-style:preserve-3d;
  border-radius:inherit; transition:transform .6s cubic-bezier(.2,.8,.2,1)
}
.tb-mini .tbm-face{
  position:absolute; inset:0; border-radius:inherit; backface-visibility:hidden;
  background-size:cover; background-position:center; box-shadow:0 10px 30px -12px rgba(0,0,0,.35)
}
/* 裏面（常時表示） */
.tb-mini .tbm-face.back{ background-image:var(--card-back-url) }
/* 表面（JSで --front-url を付与） */
.tb-mini .tbm-face.front{ transform:rotateY(180deg); background-image:var(--front-url, none) }

/* 反転（サイズ不変） */
.tb-mini .tbm-card.flipped .tbm-card-inner{ transform:rotateY(180deg) }

/* Focusリング */
.tb-mini .tbm-card:focus-visible{ box-shadow:0 0 0 3px #c9b4ff80 }

/* ===== Tap演出（光・リップル） ===== */
.tb-mini .tbm-card.aura-pop{
  animation:tbmAura .6s ease-out
}
@keyframes tbmAura{
  0%{box-shadow:0 0 0 0 rgba(126,102,255,.00),0 0 0 0 rgba(255,215,111,.00)}
  50%{box-shadow:0 0 24px 8px rgba(126,102,255,.35),0 0 60px 18px rgba(255,215,111,.25)}
  100%{box-shadow:0 2px 24px -10px rgba(0,0,0,.35)}
}
/* ripple（タップ位置に応じて） */
.tb-mini .tbm-card::after{
  content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
  background:radial-gradient(circle at var(--tap-x,50%) var(--tap-y,50%),
    rgba(255,255,255,.55) 0%, rgba(255,215,111,.45) 20%, rgba(126,102,255,.35) 40%, rgba(126,102,255,.00) 60%);
  opacity:0;transform:scale(.6);
}
.tb-mini .tbm-card.ripple::after{animation:tbmRipple .7s ease-out}
@keyframes tbmRipple{
  0%{opacity:0;transform:scale(.6)}
  10%{opacity:.85}
  60%{opacity:.45}
  100%{opacity:0;transform:scale(2.2)}
}

/* ===== Result（詩／韻／祈） ===== */
#readingResult{ margin-top:22px }
#readingResult .result-grid{
  display:grid; gap:14px; max-width:980px; margin:16px auto 0;
}
@media (min-width:720px){ #readingResult .result-grid{ grid-template-columns:repeat(3,1fr) } }
#readingResult .result-item{
  background: linear-gradient(180deg, #ffffff0b, #00000006);
  border:1px solid #FFFFFF26; border-radius:14px; padding:12px 14px;
  box-shadow:0 8px 18px rgba(0,0,0,.12)
}
#readingResult .result-item .badge{
  display:inline-block; font-size:12px; color:#201630; background:#e9deff;
  padding:2px 8px; border-radius:999px; margin-bottom:6px; font-weight:800;
}
#readingResult .result-item .r-title{ margin:.2em 0; font-size:17px; color:#503080; font-weight:800 }
#readingResult .result-item .r-text{ margin:0; color:#3a3058; line-height:1.85; font-size:14.5px }

/* ===== Motion Safety ===== */
@media (prefers-reduced-motion: reduce){
  .tb-mini .tbm-card-inner{transition:none}
  .tb-mini .tbm-card.aura-pop,.tb-mini .tbm-card.ripple{animation:none}
}
