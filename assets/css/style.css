:root{
  --bg-deep:#0b0b1a; --bg-1:#120c1f; --bg-2:#1b1035;
  --ink:#EEEAF9; --muted:#BFB8D9;
  --lav:#CBB6FF; --gold:#FFD76F;
  --outline:#ffffff26;
  --radius:14px;
  /* 裏面画像（差し替えOK） */
  --card-back-url:url("/assets/tarot/back.jpg");
}

*{ box-sizing:border-box }
body{
  margin:0; color:var(--ink);
  background:
    radial-gradient(1200px 800px at 50% -20%, #ffffff12 0%, transparent 60%),
    radial-gradient(1400px 900px at 50% 120%, #b598ff14 0%, transparent 70%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  background-color: var(--bg-deep);
  font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
.wrap{ width:min(1120px,92vw); margin-inline:auto; padding:28px 0 }
h1{ margin:0 0 8px; font-size:clamp(24px,3.6vw,28px) }
.lead{ margin:0 0 12px; color:var(--muted) }
.sr-only{ position:absolute!important; width:1px; height:1px; overflow:hidden; clip:rect(0,0,0,0) }

.btn{
  appearance:none; cursor:pointer; color:var(--ink);
  border:1px solid var(--outline);
  background:linear-gradient(180deg,#ffffff16,#ffffff0a);
  border-radius:999px; padding:10px 16px;
  transition:transform .18s ease, border-color .2s ease, opacity .2s ease;
}
.btn:hover{ transform:translateY(-1px); border-color:#ffffff66 }
.btn:disabled{ opacity:.6; cursor:not-allowed }
.btn--primary{
  border-color:#ffffff40;
  background:
    radial-gradient(120% 200% at 50% -80%, #ffffff20 0%, transparent 55%),
    linear-gradient(180deg, #c7b3ff2a, #7b51ff23);
}

/* 願い */
.wish-input{
  width:100%; max-width:680px; display:block;
  color:var(--ink); background:#ffffff10; border:1px solid var(--outline);
  padding:12px 14px; border-radius:12px; outline:none;
}
.wish-input::placeholder{ color:#ddd8 }

/* 束（初期） */
.deck-stage{ text-align:center; padding: 28px 0 8px; position:relative; z-index:1 }
.deck-stack{ width:min(280px,70vw); margin:12px auto 10px; position:relative }
.deck-back{
  border-radius:var(--radius); aspect-ratio:2/3;
  background: var(--card-back-url) center/cover no-repeat, linear-gradient(180deg,#0006,#0008);
  border:1px solid #ffffff22; box-shadow:0 10px 28px rgba(174,138,255,.24);
}
.deck-back + .deck-back{ margin-top:-30px }
.layer-1{ transform: rotate(-3.2deg) translateY(6px) }
.layer-2{ transform: rotate(2.8deg) translateY(12px) }
.layer-3{ transform: rotate(-.6deg) translateY(18px) }
.deck-stack .aura{
  position:absolute; inset:-6% -6%;
  background:
    radial-gradient(70% 50% at 50% 0%, rgba(255,215,111,.22), transparent 65%),
    radial-gradient(70% 50% at 50% 100%, rgba(203,182,255,.18), transparent 65%);
  border-radius:22px; filter:blur(8px); opacity:0; transition:opacity .45s ease;
}
.deck-stack.glow .aura{ opacity:1 }
.controls{ display:flex; gap:10px; justify-content:center; align-items:center; margin-top:12px }
.hint{ margin:0; color:var(--muted); font-size:13px }

/* 展開後（3枚横並び固定） */
.reading-area{ position:relative; padding: 10px 0 28px; z-index:1 }
.tap-hint{ text-align:center; color:#e9deff; opacity:0; transform:translateY(4px); transition:opacity .25s, transform .25s }
.tap-hint.on{ opacity:1; transform:translateY(0) }

/* ★ここを flex で固定（モバイルでも1列に崩さない） */
.tarot-row{
  margin: 12px auto 18px;
  display:flex; justify-content:center; align-items:flex-start; gap:clamp(10px,3vw,24px);
  flex-wrap:nowrap; max-width: min(95vw, 1100px);
}

/* ★カード幅：画面の約1/9（= 11vw）に固定。最小90px～最大160pxの安全域 */
.tarot-card{
  position:relative; aspect-ratio:2/3; width:clamp(90px, 11vw, 160px);
  border-radius:var(--radius); overflow:hidden;
  border:1px solid var(--outline);
  box-shadow:0 10px 30px rgba(90,60,160,.25);
  background: var(--card-back-url) center/cover no-repeat, linear-gradient(180deg,#ffffff0e,#00000014);
  transform:translateY(8px) scale(.985); opacity:0;
  transition:transform .4s cubic-bezier(.2,.7,.2,1), opacity .4s ease, box-shadow .2s ease;
}
.tarot-card.show{ transform:translateY(0) scale(1); opacity:1 }
.tarot-card:hover{ box-shadow:0 16px 38px rgba(126,102,255,.32) }

.tarot-card.is-back .face{ opacity:0 }
.tarot-card.flipped{ background:#0f0b18 }

.tarot-card .face{
  position:absolute; inset:0; display:grid; place-items:center;
  transition:opacity .28s ease;
  background: var(--face-url, linear-gradient(160deg,#8f79ff26,#e7deff14 60%)) center/cover no-repeat;
}
.tarot-card .face.dummy{ border:1px solid #ffffff22 }
.face .glyph{
  width:68%; aspect-ratio:1/1; display:grid; place-items:center; border-radius:18%;
  border:1px solid #ffffff36; background:radial-gradient(90% 70% at 50% 30%, #ffffff18 0%, transparent 60%), #0f0b18;
  box-shadow: inset 0 0 40px #ffffff20, 0 0 30px #bfa9ff24; font-size:clamp(28px,7vw,38px);
}
.face .title{ margin-top:10px; font-weight:700; letter-spacing:.06em; color:#f3efff; text-shadow:0 2px 16px #bfa9ff55; font-size:clamp(12px,2vw,15px) }

.rubric{
  position:absolute; inset:auto 8px 8px 8px;
  font-size:12px; font-weight:800; color:#2a1030;
  background:rgba(255,215,111,.22); border:1px solid rgba(255,215,111,.5);
  padding:4px 8px; border-radius:999px; pointer-events:none;
}

.ripple{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none }

/* 結果 */
.result-grid{
  display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:8px;
}
.result-item{
  border:1px solid var(--outline); border-radius:12px; padding:12px 14px;
  background:linear-gradient(180deg,#ffffff0b,#00000006);
  box-shadow:0 10px 28px rgba(70,40,120,.22);
}
.badge{ display:inline-block; font-size:12px; color:#201630; background:#E9DEFF; padding:2px 8px; border-radius:999px; margin-bottom:6px }
.item-title{ margin:.2em 0 6px; font-weight:700; color:#f0eaff }
.item-text{ margin:0; color:#d8d2ee; line-height:1.8 }

/* クローズ */
.closing{ text-align:center; margin-top:16px }
.closing-line{ margin:0 0 8px; color:#eaddff }
.close-text{ margin:6px 0 12px; color:#fff }
.closing-actions{ display:flex; justify-content:center; gap:10px }

/* モーション安全 */
@media (prefers-reduced-motion:reduce){
  *{ animation:none !important; transition:none !important }
}
