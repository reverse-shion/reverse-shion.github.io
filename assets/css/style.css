/* =========================================================
  Shion Theme — Lavender × White Light (Global)
  File: style.css
  Author: 詩韻（Shion）
  Notes:
   - 全体トーン統一（紫苑×白光）
   - ヒーローの可読性改善（透過ヴェール＋テキストシャドウ）
   - 星詠3枚リーディング用スタイル同梱
   - 画像パスは --card-back-url を差し替え可能
========================================================= */

/* ========== Theme Tokens ========== */
:root{
  --bg-deep: #0b0b1a;         /* 夜空の深み */
  --bg-1: #120c1f;
  --bg-2: #1b1035;
  --ink: #EEEAF9;             /* 本文色（白光） */
  --muted: #BFB8D9;           /* 補助テキスト */
  --lavender: #CBB6FF;        /* 主彩 */
  --lavender-2:#A88BFF;       /* 濃い紫苑 */
  --gold: #FFD76F;            /* 祈りの金色 */
  --outline: #FFFFFF26;       /* 淡い枠線 */
  --shadow: 0 10px 30px rgba(70,40,120,.22);
  --radius: 14px;

  /* ★タロット裏面画像（必要なら差し替え） */
  --card-back-url: url("/assets/tarot/back.jpg");
}

/* ========== Global Base ========== */
html,body{
  margin:0;
  color:var(--ink);
  background:
    radial-gradient(1200px 800px at 50% -20%, #ffffff12 0%, transparent 60%),
    radial-gradient(1400px 900px at 50% 120%, #b598ff14 0%, transparent 70%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  background-color: var(--bg-deep);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  font-family: "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
}

a{ color: var(--lavender); text-decoration: none; }
a:hover{ text-decoration: underline; }

/* コンテンツ幅の基準 */
.container, .wrap{ width:min(1120px,92vw); margin-inline:auto; }

/* ========== Hero / Top Banner 可読性改善 ========== */
.hero{ position: relative; overflow: clip; }
.hero__veil{
  /* 背景上に薄い黒×ぼかしのヴェールを敷く */
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(8,8,16,.44), rgba(8,8,16,.18) 40%, rgba(8,8,16,.44));
  backdrop-filter: blur(2.8px);
  pointer-events: none;
}
.hero-title,
.hero h1{
  position: relative;
  margin: 0;
  padding: clamp(12px,2.2vw,16px) clamp(10px,2vw,14px);
  line-height: 1.25;
  letter-spacing: .02em;
  text-shadow: 0 2px 10px rgba(0,0,0,.65), 0 0 20px rgba(20,10,40,.35);
  z-index: 1; /* ヴェールより上 */
}
.hero-lead{
  position: relative;
  color: var(--ink);
  opacity: .96;
  text-shadow: 0 1px 8px rgba(0,0,0,.55);
  z-index: 1;
}

/* ヒーロー内ボタンが重なる場合の軽いガラス */
.hero .cta-glass{
  background: linear-gradient(180deg,#ffffff18,#ffffff0a);
  border: 1px solid var(--outline);
  border-radius: 12px;
  box-shadow: var(--shadow);
}

/* ========== Buttons（全体共通） ========== */
.btn{
  appearance:none; border:1px solid var(--outline); color:var(--ink);
  background: linear-gradient(180deg,#ffffff12,#ffffff08);
  border-radius: 10px; padding:10px 14px; cursor:pointer;
  box-shadow: var(--shadow);
  transition: transform .18s ease, border-color .2s ease, background .2s ease, opacity .2s;
}
.btn:hover{ transform: translateY(-1px); border-color:#ffffff66; }
.btn:disabled{ opacity:.5; cursor:not-allowed; }
.btn--primary{
  border-color:#ffffff40;
  background:
    radial-gradient(120% 180% at 50% -40%, #ffffff1f 0%, transparent 60%),
    linear-gradient(180deg, #c7b3ff2a, #7b51ff23);
}

/* =========================================================
   星詠 3枚リーディング（Wish Reading）
   対応HTML側：<section id="wish-reading"> … </section>
========================================================= */

/* セクション背景：黒ベタ→紫×白光の星屑 */
#wish-reading{
  position: relative;
  padding: clamp(32px, 5vw, 60px) 0;
  background:
    radial-gradient(1000px 700px at 50% -20%, rgba(230,220,255,.08), transparent 70%),
    radial-gradient(1200px 800px at 50% 120%, rgba(168,139,255,.08), transparent 80%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  overflow: clip;
}

/* タイトル＋サブ */
#wish-reading h2{
  font: 700 clamp(22px,2.6vw,28px)/1.2 "Noto Sans JP", system-ui;
  margin:0 0 6px; letter-spacing:.02em;
  display:flex; align-items:center; gap:.6em;
}
#wish-reading .h2-sub{
  color: var(--muted);
  font-size: clamp(13px,1.6vw,14.5px);
  margin-bottom: 22px;
}

/* 操作ボタン群 */
.wish-actions{ display:flex; gap:10px; flex-wrap:wrap; margin:16px 0 24px; }

/* デッキ：3列カード */
.wish-deck{
  display:grid; grid-template-columns: repeat(3, 1fr); gap: clamp(14px,3.6vw,22px);
  position: relative; z-index: 1;
}
.card-wrap{ display:flex; flex-direction:column; align-items:center; gap:10px; }

/* カード本体（裏面は常時見せる） */
.tarot-card{
  width: min(280px, 28vw); aspect-ratio: 2/3;
  border-radius: var(--radius);
  border: 1px solid var(--outline);
  position:relative; overflow:hidden;
  box-shadow: var(--shadow);
  cursor: not-allowed;
  background: #120d1f;
}
.tarot-card.is-ready{ cursor:pointer; }

/* 裏面（常時表示）：パスがあれば画像、無ければ白光パターン */
.tarot-card::before{
  content:""; position:absolute; inset:0;
  background-image: var(--card-back-url),
    radial-gradient(180% 120% at 50% -10%, #ffffff1f 0%, transparent 60%),
    radial-gradient(140% 100% at 50% 120%, #bfa9ff18 0%, transparent 70%),
    conic-gradient(from 0deg at 50% 40%, #ffffff10, #c9b6ff16, #ffffff10);
  background-size: cover, auto, auto, auto;
  background-position: center;
  filter: saturate(1.02);
}

/* 表面フェイス（画像/ダミー）は反転時に見せる */
.tarot-card .face{
  position:absolute; inset:0; display:grid; place-items:center; padding:10px;
  opacity:0; transition: opacity .28s ease;
  background: #0f0b18;
}
.tarot-card .face img{ width:100%; height:100%; object-fit:cover; display:block; }
.tarot-card.is-flipped .face{ opacity:1; }

/* 表面が未用意の時のダミー */
.tarot-card .dummy{
  width:100%; height:100%; display:grid; place-items:center; text-align:center;
  background:
    radial-gradient(120% 100% at 50% 0%, #ffffff14 0%, transparent 60%),
    linear-gradient(160deg, #8f79ff26, #e7deff14 60%);
  border:1px solid #ffffff22;
}
.dummy .glyph{
  width: 72%; aspect-ratio: 1/1; border-radius: 20%;
  border:1px solid #ffffff36;
  display:grid; place-items:center;
  background:
    radial-gradient(90% 70% at 50% 30%, #ffffff18 0%, transparent 60%),
    #0f0b18;
  box-shadow: inset 0 0 40px #ffffff20, 0 0 30px #bfa9ff24;
}
.dummy .title{
  margin-top: 12px; font-weight: 700; letter-spacing:.08em;
  color:#f3efff; text-shadow: 0 2px 16px #bfa9ff55;
  font-size: clamp(14px, 2.2vw, 16px);
}

/* カード名（カード下の固定キャプション） */
.card-caption{
  font: 600 14px/1.4 "Noto Sans JP", system-ui;
  color: var(--muted); min-height: 1.4em; text-align:center;
}

/* 結果パネル（最初から枠を表示：UX安定） */
#wishResult{ margin-top: 22px; }
.result-grid{
  display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px;
}
.result-item{
  border:1px solid var(--outline);
  border-radius:12px; padding:12px 14px;
  background: linear-gradient(180deg, #ffffff0b, #00000006);
  box-shadow: var(--shadow);
}
.badge{
  display:inline-block; font-size:12px; color:#201630; background:#e9deff; padding:2px 8px; border-radius:999px; margin-bottom:6px;
}
.item-title{ font-weight:700; margin:2px 0 6px; color:#f0eaff; }
.item-text{ color:#d8d2ee; font-size:14px; }

/* 「タロットクローズ」「大丈夫だよ」締め */
.reading-close{
  margin-top: 10px; color: var(--muted);
}
.reading-safe{
  margin-top: 4px; font-weight: 700; color: var(--ink);
}

/* タップ時の星紋エリア（Canvas） */
#rippleCanvas{
  position:absolute; inset:0; width:100%; height:100%;
  pointer-events:none; z-index:0; /* カードの下／背景の上に置くなら調整可 */
}

/* ========== Utilities ========== */
.glow-edge{ box-shadow: 0 0 0 1px #ffffff22, 0 8px 30px rgba(90, 60, 160, .28); }
.center{ display:grid; place-items:center; }

/* ========== Responsive ========== */
@media (max-width: 960px){
  .result-grid{ grid-template-columns: 1fr; }
  .wish-deck{ gap: 14px; }
  .tarot-card{ width: 100%; }
}
@media (max-width: 600px){
  .hero-title, .hero h1{ font-size: clamp(22px, 7vw, 32px); }
  .hero-lead{ font-size: clamp(14px, 4vw, 16px); }
}

/* ========== Motion Safety ========== */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}
