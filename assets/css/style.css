/* =========================================================
   Shion Theme — Lavender × White Light (v1.1)
   Focus: Trinity, Wish, Chime, CTA, Prayer Particles
========================================================= */

:root{
  --bg-deep:#0b0b1a;
  --bg-1:#120c1f;
  --bg-2:#1b1035;
  --ink:#EEEAF9;
  --muted:#BFB8D9;
  --lavender:#CBB6FF;
  --gold:#FFD76F;
  --outline:#FFFFFF26;
  --shadow:0 10px 30px rgba(70,40,120,.22);
  --radius:14px;
}

*{ box-sizing:border-box }
html{ -webkit-text-size-adjust:100%; scroll-behavior:smooth }
body{
  margin:0; color:var(--ink);
  font-family:"Noto Sans JP",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  background:
    radial-gradient(1200px 800px at 50% -20%, #ffffff12 0%, transparent 60%),
    radial-gradient(1400px 900px at 50% 120%, #b598ff14 0%, transparent 70%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  background-color:var(--bg-deep);
}

.wrap{ width:min(1120px,92vw); margin-inline:auto; padding:28px 0 60px }
a{ color:var(--lavender) }

/* アクセシビリティ */
.sr-only{ position:absolute!important; left:-9999px; width:1px; height:1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap }

.page-head h1{ margin:.2em 0 .2em; font-size:clamp(22px,3.8vw,28px) }
.page-head .lead{ margin:.2em 0 1rem; color:var(--muted) }

/* ===== Wish form ===== */
.wish-form{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:center;
  margin: 8px 0 18px;
}
.wish-form input{
  width:min(560px, 86vw);
  padding:12px 14px; border-radius:12px;
  border:1px solid var(--outline);
  background:linear-gradient(180deg,#ffffff12,#ffffff08);
  color:var(--ink);
  box-shadow:var(--shadow);
}
.wish-form input::placeholder{ color:#cfc7e8 }
.btn{
  appearance:none; border:1px solid var(--outline); color:var(--ink);
  background:linear-gradient(180deg,#ffffff12,#ffffff08);
  border-radius:12px; padding:10px 16px; cursor:pointer;
  box-shadow:var(--shadow);
  transition:transform .18s ease, border-color .2s ease, background .2s ease, opacity .2s;
}
.btn:hover{ transform:translateY(-1px); border-color:#ffffff66 }
.btn:disabled{ opacity:.55; cursor:not-allowed }
.btn--primary{
  border-color:#ffffff40;
  background:
    radial-gradient(120% 180% at 50% -40%, #ffffff1f 0%, transparent 60%),
    linear-gradient(180deg, #c7b3ff2a, #7b51ff23);
}

/* ===== Deck ===== */
#wish-reading{ padding:6px 0 0 }
.wish-deck{
  display:grid; gap:clamp(14px,3.6vw,22px);
  grid-template-columns:repeat(3,1fr);
  align-items:start;
}

/* カード：表面で出現（光のオーラ＋祈り粒子） */
.tarot-card{
  width:min(320px,30vw); aspect-ratio:2/3; border-radius:var(--radius);
  border:1px solid var(--outline); position:relative; overflow:hidden;
  box-shadow:var(--shadow);
  background:#120d1f;
  background-image: var(--face-url);
  background-size:cover; background-position:center;
  opacity:0; transform:scale(.92) translateY(16px);
  transition: opacity .8s ease, transform .8s ease, box-shadow .8s ease;
  isolation:isolate;
}

/* 出現 */
.tarot-card.show{
  opacity:1; transform:scale(1) translateY(0);
  box-shadow:0 16px 44px rgba(126,102,255,.32);
}

/* 光のオーラ */
.tarot-card::after{
  content:""; position:absolute; inset:-15%;
  background:
    radial-gradient(60% 40% at 30% 30%, #ffd76f55, transparent 55%),
    radial-gradient(60% 40% at 70% 70%, #cbb6ff55, transparent 55%);
  filter:blur(8px) saturate(120%); opacity:0; transform:scale(.9);
  transition:opacity .8s ease, transform .8s ease;
  mix-blend-mode:screen; pointer-events:none;
}
.tarot-card.show::after{
  opacity:1; transform:scale(1);
  animation: prayerParticles 3s ease-in-out infinite;
}
@keyframes prayerParticles{
  0%,100%{ transform:scale(1) rotate(0deg) }
  50%{ transform:scale(1.08) rotate(2.2deg) }
}

/* 微小な鼓動 */
.tarot-card.pulse{ animation:pulse 1.6s ease-out 1 .1s }
@keyframes pulse{
  0%{ transform:scale(1) }
  50%{ transform:scale(1.015) }
  100%{ transform:scale(1) }
}

/* ===== Result（Trinityラベル） ===== */
.result-grid{
  display:grid; gap:14px; margin-top:22px;
  grid-template-columns:repeat(3,1fr);
}
.result-item{
  border:1px solid var(--outline);
  border-radius:12px; padding:12px 14px;
  background:linear-gradient(180deg,#ffffff0b,#00000006);
  box-shadow:var(--shadow);
  position:relative;
}
.result-item::before{
  content:attr(data-trinity);
  display:block;
  font-size:11.5px; letter-spacing:.02em;
  color:var(--gold); opacity:.92;
  margin-bottom:4px;
}
.item-title{ font-weight:700; margin:.15em 0 .35em; color:#f0eaff }
.item-text{ color:#d8d2ee; font-size:14px; line-height:1.8 }

/* 閉じとCTA */
.closing{ margin:16px 0 8px; color:var(--muted); text-align:center }
.cta{ display:grid; place-items:center; gap:8px; margin:8px 0 0; opacity:0; transform:translateY(6px) }
.cta.is-show{ opacity:1; transform:translateY(0); transition:opacity .36s ease, transform .36s ease }
.cta .cta-glow{
  display:inline-block; text-decoration:none;
  border:1px solid var(--outline);
  background:
    radial-gradient(120% 180% at 50% -40%, #ffffff1f 0%, transparent 60%),
    linear-gradient(180deg, #c7b3ff2a, #7b51ff23);
  border-radius:12px; padding:12px 16px; color:var(--ink);
  box-shadow:0 12px 32px rgba(126,102,255,.28);
}
.cta .cta-note{ margin:0; font-size:13px; color:#cfc7e8 }

/* ===== Responsive ===== */
@media (max-width: 960px){
  .wish-deck{ grid-template-columns:1fr }
  .tarot-card{ width:100% }
  .result-grid{ grid-template-columns:1fr }
}

/* ===== Motion Safety ===== */
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important }
}
