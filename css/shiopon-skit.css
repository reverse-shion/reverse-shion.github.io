/* =========================
   Shionverse Talk Button (DIRECT FIX)
   ========================= */

:root{
  --sv-talk-right: 22px;
  --sv-talk-bottom: 45px;

  --sv-btn-size: clamp(62px, 9vh, 84px);
  --sv-border: rgba(246, 243, 255, 0.42);
  --sv-glow: rgba(196, 170, 255, 0.34);
  --sv-glow-2: rgba(255, 236, 190, 0.22);
  --sv-radius: 16px;
}

#svTalkBtn{
  position: fixed !important;

  right: calc(var(--sv-talk-right) + env(safe-area-inset-right, 0px)) !important;
  bottom: calc(var(--sv-talk-bottom) + env(safe-area-inset-bottom, 0px)) !important;

  top: auto !important;
  left: auto !important;

  z-index: 9999 !important;

  width: var(--sv-btn-size);
  height: var(--sv-btn-size);
  padding: 0;

  border-radius: var(--sv-radius);
  border: 1px solid var(--sv-border);
  background: rgba(10, 12, 28, 0.55);

  box-shadow:
    0 12px 26px rgba(0,0,0,0.25),
    0 0 0 1px rgba(255,255,255,0.06) inset,
    0 0 18px var(--sv-glow);

  overflow: hidden;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;

  transform-origin: 50% 70%;
  animation: svBreath 3.8s ease-in-out infinite;
}

#svTalkBtn .sv-talk__img{
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  border-radius: var(--sv-radius);
  transform: translateZ(0);
}

@media (hover:hover){
  #svTalkBtn:hover{
    border-color: rgba(255, 248, 230, 0.52);
    box-shadow:
      0 14px 30px rgba(0,0,0,0.28),
      0 0 0 1px rgba(255,255,255,0.08) inset,
      0 0 22px var(--sv-glow),
      0 0 18px var(--sv-glow-2);
  }
}

#svTalkBtn:active{
  transform: translateY(1px) scale(0.985);
}

#svTalkBtn::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius: var(--sv-radius);
  background: radial-gradient(
    160px 100px at 35% 50%,
    rgba(255,255,255,0.18),
    transparent 72%
  );
  opacity: 0;
  transform: translateX(-18px);
  transition: opacity 200ms ease, transform 420ms ease;
  pointer-events:none;
}

#svTalkBtn:active::after{
  opacity: 0.45;
  transform: translateX(18px);
}

#svTalkBtn:focus-visible{
  outline: 2px solid rgba(255,255,255,0.35);
  outline-offset: 3px;
}

@keyframes svBreath{
  0%, 100%{ transform: translateZ(0) scale(1); }
  50%{ transform: translateZ(0) scale(1.02); }
}
