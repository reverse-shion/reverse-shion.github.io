<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>æ˜Ÿç•Œãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚° â€” è©©éŸ»ç¥ˆ | è©©éŸ» Shion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#faf7f0" />
  <meta name="description" content="ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨ã€è©©ï¼ˆPoemï¼‰ãƒ»éŸ»ï¼ˆRhythmï¼‰ãƒ»ç¥ˆï¼ˆPrayerï¼‰ãŒé¡•ç¾ã—ã€ç¶šã„ã¦ä¹è¡Œã®â€œæ˜Ÿç•Œè©©â€ãŒä¸€è¡Œãšã¤é™ã‚Šã¦ãã¾ã™ã€‚" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ========== Theme (ä¹³ç™½ï¼‹æ·¡é‡‘å…‰ï¼‹æ˜Ÿç²’) ========== */
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    :root{
      --bg:#faf8f2;
      --ink:#3a3240;
      --muted:#7a6f84;
      --gold:#d0aa42;
      --r:16px;
      --tarot-back-url:url("back.png"); /* â†å·®ã—æ›¿ãˆå¯ */
    }
    @media (color-gamut:p3){ :root{ --gold:color(display-p3 0.82 0.72 0.30) } }

    /* èƒŒæ™¯ï¼šå¢ƒç•ŒãŒç›®ç«‹ãŸãªã„å¤šæ®µã‚°ãƒ©ãƒ‡ï¼‹æ¥µè–„ãƒã‚¤ã‚º */
    body{
      color:var(--ink);
      font-family:'Noto Serif JP',serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
      overflow-x:hidden;
      background:
        radial-gradient(120vmax 90vmax at 50% -15%, #ffffff 0%, #fffdf6 28%, #fcf5df 52%, #faf2d3 67%, #f9f0cf 82%, transparent 96%),
        radial-gradient(110vmax 80vmax at 50% 120%, #fff9e8 0%, #fff3d4 35%, #f8ecd2 60%, #f5e9d0 78%, transparent 96%),
        var(--bg);
      background-attachment:fixed,fixed,scroll;
      background-blend-mode:soft-light,normal,normal;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
      opacity:.06; mix-blend-mode:multiply;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='table' tableValues='0 0.65'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-size:160px 160px;
    }

    /* æ˜Ÿç²’ï¼ˆCanvasï¼‰ */
    .stars{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.75}

    /* ã‚³ãƒ¼ãƒ‰é›¨ã®æ®‹å½±ï¼ˆPCã®ã¿ï¼‰ */
    .glyph-column{
      position:fixed; top:0; bottom:0; width:min(16vw,140px); z-index:1; pointer-events:none;
      opacity:.14; mix-blend-mode:multiply; mask:linear-gradient(180deg,#000 20%,transparent 95%);
      display:none;
    }
    .glyph-column--l{left:0; background:repeating-linear-gradient(180deg, rgba(208,170,66,.22) 0 22px, transparent 22px 44px)}
    .glyph-column--r{right:0; background:repeating-linear-gradient(180deg, rgba(180,150,80,.18) 0 26px, transparent 26px 52px)}
    @media (min-width:1024px){ .glyph-column{display:block} }

    /* Header */
    .hdr{ position:sticky; top:0; z-index:5; backdrop-filter: blur(12px);
      background:color-mix(in oklab, #ffffff 76%, #fff2c6 24%);
      border-bottom:1px solid rgba(208,170,66,.22) }
    .hdr__in{ max-width:1100px; margin:0 auto; padding:10px 16px;
      display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px;
      font-family:"Cormorant Garamond",serif }
    .logo{ text-decoration:none; color:#8a6a12; font-weight:700; font-size:1.35rem; letter-spacing:.03em }
    .nav{ display:flex; gap:18px; justify-content:center }
    .nav a{ color:#5a4d24; text-decoration:none; font-weight:700; opacity:.9 }
    .nav a:hover{ opacity:.65 }
    .cta{
      display:inline-flex; align-items:center; gap:8px; text-decoration:none;
      color:#2b2510; font-weight:800; letter-spacing:.04em;
      background:linear-gradient(90deg,#fff2c6,#ffe493 70%);
      border:1px solid rgba(208,170,66,.45);
      box-shadow:0 8px 20px rgba(208,170,66,.25), inset 0 0 10px rgba(255,240,200,.35);
      height:38px; padding:0 14px; border-radius:999px;
    }

    /* Hero */
    .hero{ position:relative; z-index:2; display:grid; place-items:center; text-align:center;
      padding:clamp(40px,8vw,80px) 16px 24px }
    .hero__title{
      font-family:"Cormorant Garamond",serif; font-size:clamp(26px,6vw,46px);
      line-height:1.2; letter-spacing:.05em;
      background:linear-gradient(92deg,#7d6b2b 0%, var(--gold) 35%, #e9d58a 60%, var(--gold) 100%);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 0 30px rgba(240,215,140,.35)
    }
    .hero__lead{ margin:10px auto 0; max-width:800px; color:#6a5e72; line-height:1.9 }

    /* Tarot */
    .tarot{ position:relative; z-index:2; padding:28px 16px 8px;
      display:flex; gap:clamp(12px,3vw,24px); justify-content:center; align-items:center; flex-wrap:wrap }
    .card{ width:clamp(112px,22vw,168px); aspect-ratio:62/110; perspective:1100px; position:relative; cursor:pointer;
      filter: drop-shadow(0 10px 30px rgba(180,150,80,.25)); outline:0 }
    .card__inner{
      width:100%; height:100%; position:relative; border-radius:14px; overflow:hidden;
      transform-style:preserve-3d;
      transition:transform .68s cubic-bezier(.2,.7,.2,1), box-shadow .3s;
      box-shadow:0 8px 24px rgba(0,0,0,.08)
    }
    .card:focus-visible .card__inner{ box-shadow:0 0 0 3px rgba(208,170,66,.45) }
    .card.is-flipped .card__inner{ transform:rotateY(180deg) }
    .card__face{ position:absolute; inset:0; border-radius:14px; backface-visibility:hidden; overflow:hidden;
      display:grid; place-items:center }
    .card__back{ background:#efe9da }
    .card__back::before{ content:""; position:absolute; inset:0;
      background: var(--tarot-back-url) center/cover no-repeat; filter:contrast(1.02) saturate(1.02) }
    .card__back > img{ width:100%; height:100%; object-fit:cover; display:block; opacity:0 } /* iOSä¿é™º */
    .card__front{
  transform:rotateY(180deg);
  /* ç”»åƒã‚’JSã§æŒ¿å…¥ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆè–„ã„é‡‘ã®ã‚°ãƒ©ãƒ‡ï¼‰ */
  background:
    radial-gradient(120% 120% at 50% 20%, rgba(255,242,200,.75), transparent 60%),
    linear-gradient(135deg,#fff3bf,#ead7ff);
  background-position:center;
  background-size:cover;
}    .card--glow .card__inner{
      box-shadow:0 0 0 2px rgba(240,220,160,.55), 0 0 40px 14px rgba(255,240,200,.35), 0 20px 60px rgba(208,170,66,.25);
      animation: glowpop .6s ease-out
    }
    @keyframes glowpop{ 0%{filter:brightness(1.1)} 60%{filter:brightness(1.35)} 100%{filter:brightness(1)} }

    /* 2è¡Œè§£èª¬ï¼ˆã‚«ãƒ¼ãƒ‰ã®ç›´ä¸‹ï¼‰ */
    .meanings{ position:relative; z-index:2; display:grid; gap:12px; grid-template-columns:1fr;
      max-width:1100px; margin:10px auto 4px; padding:0 16px }
    @media (min-width:760px){ .meanings{ grid-template-columns:repeat(3,1fr) } }
    .m-item{
      background:rgba(255,255,255,.55); border:1px solid rgba(208,170,66,.30);
      border-radius:14px; padding:14px 16px; min-height:92px;
      box-shadow:inset 0 0 18px rgba(255,240,200,.25); opacity:0; transform:translateY(6px)
    }
    .m-item.is-show{ opacity:1; transform:none; transition:opacity .55s ease, transform .55s ease }
    .m-head{ color:#7a6328; font-weight:800; letter-spacing:.16em; font-size:.92rem; margin-bottom:6px }
    .m-body{ color:#4b4250; line-height:1.85 }

    /* è©©éŸ»ç¥ˆã‚¿ã‚¤ãƒˆãƒ«ï¼ä¹è¡Œè©©ï¼CTA */
    .block{ position:relative; z-index:2; text-align:center; padding:18px 16px }
    .block h2{ font-family:"Cormorant Garamond",serif; font-size:clamp(24px,5.4vw,38px);
      letter-spacing:.12em; color:#6f5a28; opacity:0; transform:translateY(6px) }
    .block h2.is-show{ opacity:1; transform:none; transition:opacity 900ms ease, transform 900ms ease }
    .poem{ max-width:900px; margin:10px auto 0; padding:0 16px 10px; list-style:none; display:flex; flex-direction:column; gap:10px }
    .poem li{ color:#554a2a; line-height:1.95; letter-spacing:.04em; opacity:0; transform:translateY(6px);
      text-shadow:0 0 18px rgba(255,240,200,.45), 0 0 4px rgba(255,255,255,.5) }
    .poem li.is-show{ opacity:1; transform:none; transition:opacity 700ms ease, transform 700ms ease }
    .actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:18px 0 40px; opacity:0; transform:translateY(8px) }
    .actions.is-show{ opacity:1; transform:none; transition:opacity 650ms ease, transform 650ms ease }
    .btn{ appearance:none; border:1px solid rgba(208,170,66,.48); border-radius:999px;
      padding:14px 22px; font-weight:800; letter-spacing:.04em; cursor:pointer;
      background:#fff6d6; color:#3a2e10; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
      box-shadow:0 8px 22px rgba(208,170,66,.22), inset 0 0 12px rgba(255,240,200,.35);
      transition:transform .15s ease, filter .2s ease, box-shadow .25s ease }
    .btn:hover{ transform:translateY(-1px) }
    .btn--ghost{ background:rgba(255,255,255,.6); color:#4a4160; border:1px solid rgba(120,100,150,.28);
      box-shadow:0 6px 16px rgba(120,100,150,.18), inset 0 0 10px rgba(255,255,255,.45) }

    /* å›ºå®šã€Œç¥æ®¿ã¸ã€ */
    .back{ position:fixed; left:14px; bottom:14px; z-index:4; text-decoration:none; font-weight:800; letter-spacing:.04em;
      color:#3a2e10; background:#fff1c7; border:1px solid rgba(208,170,66,.45); border-radius:999px; padding:10px 14px;
      box-shadow:0 8px 18px rgba(208,170,66,.22), inset 0 0 10px rgba(255,240,200,.35) }

    /* å…¨ç”»é¢ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ3æšç›®ã§ç™ºå…‰ï¼‰ */
    .flashlayer{
      position:fixed; inset:0; z-index:60; pointer-events:none; opacity:0;
      mix-blend-mode:screen;
      background:
        radial-gradient(52vmax 38vmax at 50% 44%,
          rgba(255,248,220,.95) 0%,
          rgba(255,255,255,.92) 22%,
          rgba(255,242,190,.70) 44%,
          rgba(255,255,255,0) 68%),
        linear-gradient(180deg, rgba(255,240,200,.85), rgba(255,255,255,0) 60%);
      filter: blur(.3px);
    }
    .flashlayer.is-on{ animation: templeFlash 900ms ease-out both }
    @keyframes templeFlash{
      0%{opacity:0} 18%{opacity:1} 55%{opacity:.88} 100%{opacity:0}
    }

    /* Motion care */
    @media (prefers-reduced-motion:reduce){
      .card__inner,.block h2,.poem li,.actions{ transition:none !important; animation:none !important }
    }
  </style>
</head>
<body>
  <!-- å…¨ç”»é¢ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ -->
  <div class="flashlayer" aria-hidden="true"></div>

  <!-- èƒŒæ™¯ï¼šæ˜Ÿç²’ -->
  <canvas class="stars" id="stars" aria-hidden="true"></canvas>
  <!-- ã‚³ãƒ¼ãƒ‰é›¨ã®æ®‹å½± -->
  <div class="glyph-column glyph-column--l" aria-hidden="true"></div>
  <div class="glyph-column glyph-column--r" aria-hidden="true"></div>

  <!-- Header -->
  <header class="hdr" role="banner">
    <div class="hdr__in">
      <a href="shion.html" class="logo" aria-label="ç¥æ®¿ãƒˆãƒƒãƒ—ã¸">Re:verse Shion</a>
      <nav class="nav" aria-label="è£œåŠ©">
        <a href="/reading.html" aria-current="page">ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</a>
        <a href="/about.html">è©©éŸ»ã¨ã¯</a>
      </nav>
      <a class="cta" href="https://lin.ee/9RBqOl4" target="_blank" rel="noopener noreferrer">é‘‘å®šã¸</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" aria-labelledby="t">
    <h1 id="t" class="hero__title">æ˜Ÿç•Œã®ç™½ã„é–“ã€ˆã¾ã€‰ã«ã€è¨€è‘‰ãŒç›®ã‚’è¦šã¾ã™ã€‚</h1>
    <p class="hero__lead">ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹ã¨ã€ã¾ãšã€Œè©©ã€ã€ŒéŸ»ã€ã€Œç¥ˆã€ã€‚ç¶šã„ã¦ä¹è¡Œã®â€œæ˜Ÿç•Œè©©â€ãŒä¸€è¡Œãšã¤é™ã‚Šã¦ãã¾ã™ã€‚</p>
  </section>

  <!-- Cards -->
  <section class="tarot" id="tarot" aria-label="ä¸‰æšã®ã‚«ãƒ¼ãƒ‰">
    <div class="card" data-i="0" tabindex="0" aria-label="è©©ï¼ˆPoemï¼‰">
      <div class="card__inner">
        <div class="card__face card__back" aria-hidden="true"><img src="back.png" alt=""></div>
        <div class="card__face card__front" aria-hidden="true"></div>
      </div>
    </div>
    <div class="card" data-i="1" tabindex="0" aria-label="éŸ»ï¼ˆRhythmï¼‰">
      <div class="card__inner">
        <div class="card__face card__back" aria-hidden="true"><img src="assets/tarot/back.png" alt=""></div>
        <div class="card__face card__front" aria-hidden="true"></div>
      </div>
    </div>
    <div class="card" data-i="2" tabindex="0" aria-label="ç¥ˆï¼ˆPrayerï¼‰">
      <div class="card__inner">
        <div class="card__face card__back" aria-hidden="true"><img src="assets/tarot/back.png" alt=""></div>
        <div class="card__face card__front" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- 2è¡Œè§£èª¬ -->
  <section class="meanings" aria-label="è©©ãƒ»éŸ»ãƒ»ç¥ˆã®æ„å‘³">
    <article class="m-item"><div class="m-head">ã€è©©ã€‘</div><div class="m-body" id="m0">ã‚«ãƒ¼ãƒ‰ã‚’é–‹ãã¨ã€ã“ã“ã«â€œè©©â€ã®2è¡Œè§£èª¬ãŒç¾ã‚Œã¾ã™ã€‚</div></article>
    <article class="m-item"><div class="m-head">ã€éŸ»ã€‘</div><div class="m-body" id="m1">ã‚«ãƒ¼ãƒ‰ã‚’é–‹ãã¨ã€ã“ã“ã«â€œéŸ»â€ã®2è¡Œè§£èª¬ãŒç¾ã‚Œã¾ã™ã€‚</div></article>
    <article class="m-item"><div class="m-head">ã€ç¥ˆã€‘</div><div class="m-body" id="m2">ã‚«ãƒ¼ãƒ‰ã‚’é–‹ãã¨ã€ã“ã“ã«â€œç¥ˆâ€ã®2è¡Œè§£èª¬ãŒç¾ã‚Œã¾ã™ã€‚</div></article>
  </section>

  <!-- è©©éŸ»ç¥ˆ â†’ ä¹è¡Œè©© â†’ CTA -->
  <section class="block" aria-live="polite">
    <h2 id="sy" aria-hidden="true">â€” è©©ãƒ»éŸ»ãƒ»ç¥ˆ â€”</h2>
    <ol class="poem" id="poem" aria-label="æ˜Ÿç•Œè©©"></ol>
    <div class="actions" id="actions">
      <a class="btn" href="https://lin.ee/9RBqOl4" target="_blank" rel="noopener noreferrer">âœ¨ åˆ¹é‚£ã«æ•‘ã‚ã‚Œã‚‹ï¼ˆå€‹äººé‘‘å®šã¸ï¼‰</a>
      <a class="btn btn--ghost" href="shion2.html" aria-label="ç¥æ®¿ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹">ğŸ” ã‚‚ã†ä¸€åº¦å ã†ã®</a>
    </div>
  </section>

  <!-- å›ºå®šã®â€œç¥æ®¿ã¸â€ -->
  <a class="back" href="shion.html" aria-label="ç¥æ®¿ãƒˆãƒƒãƒ—ã¸">â›© ç¥æ®¿ã¸</a>

  <script>
    /* ===== èƒŒæ™¯ï¼šæ˜Ÿç²’ ===== */
    (function(){
      const cvs=document.getElementById('stars'),ctx=cvs.getContext('2d');
      let dpr=1,stars=[];
      function resize(){
        dpr=Math.min(2,window.devicePixelRatio||1);
        cvs.width=innerWidth*dpr; cvs.height=innerHeight*dpr;
        cvs.style.width=innerWidth+"px"; cvs.style.height=innerHeight+"px";
        ctx.setTransform(dpr,0,0,dpr,0,0);
        stars=new Array(Math.floor(Math.min(180,innerWidth/8))).fill().map(()=>({
          x:Math.random()*innerWidth, y:Math.random()*innerHeight,
          r:Math.random()*1.2+.2, a:Math.random()*0.5+.2, s:Math.random()*0.3+.05
        }));
      }
      function draw(){
        ctx.clearRect(0,0,innerWidth,innerHeight);
        for(const st of stars){
          ctx.beginPath(); ctx.arc(st.x,st.y,st.r,0,Math.PI*2);
          ctx.fillStyle=`rgba(240,226,170,${st.a})`; ctx.fill();
          st.y-=st.s*.12; if(st.y<-2) st.y=innerHeight+2;
          st.x+=Math.sin(st.y*0.005)*0.05;
        }
        requestAnimationFrame(draw);
      }
      addEventListener('resize',resize,{passive:true}); resize(); draw();
    })();

    /* ===== ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœ¬ä½“ï¼š3æšâ†’è§£èª¬â†’ãƒ•ãƒ©ãƒƒã‚·ãƒ¥â†’è©©éŸ»ç¥ˆâ†’ä¹è¡Œâ†’CTA ===== */
    (function(){
      const cards=[...document.querySelectorAll('.card')];
      const title=document.getElementById('sy');
      const poemBox=document.getElementById('poem');
      const actions=document.getElementById('actions');
      const flash=document.querySelector('.flashlayer');

      const mBodies=[document.getElementById('m0'),document.getElementById('m1'),document.getElementById('m2')];
      const mItems=[...document.querySelectorAll('.m-item')];

      // ã‚¿ã‚¤ãƒŸãƒ³ã‚°
      const T_FLASH=900, T_SY_FADE=900, T_PAUSE=600, LINE_DELAY=850;

      /* ===== 22æšãƒ•ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ï¼šç”»åƒã¨2è¡Œè§£èª¬ã‚’1ã‚«ãƒ¼ãƒ‰ã«ç´ä»˜ã‘ ===== */
const MAJOR = [
  { id:0,  key:'fool',        n:'The Fool',        img:'/assets/tarot/00_fool.jpg',        two:['æœ€åˆã®ä¸€æ­©ã¯ã€æã‚Œã‚ˆã‚Šè»½ã„ã€‚','å¤±æ•—ã¯åˆå›³â€”â€”ä¸–ç•Œã¯å›ã«é–‹ãã€‚']},
  { id:1,  key:'magician',    n:'The Magician',    img:'/assets/tarot/01_magician.jpg',    two:['æ„å¿—ã¯æ‰‹ã‚’ã€è¨€è‘‰ã¯ç¾å®Ÿã‚’å‹•ã‹ã™ã€‚','è¶³ã‚Šãªã„ã‚‚ã®ã¯ã€ã™ã§ã«å›ã®ä¸­ã«ã‚ã‚‹ã€‚']},
  { id:2,  key:'priestess',   n:'The High Priestess', img:'/assets/tarot/02_priestess.jpg', two:['æ²ˆé»™ãŒçœŸå®Ÿã®è¼ªéƒ­ã‚’ç…§ã‚‰ã™ã€‚','å†…ãªã‚‹æœˆã«ã€è€³ã‚’æ¾„ã¾ã›ã€‚']},
  { id:3,  key:'empress',     n:'The Empress',     img:'/assets/tarot/03_empress.jpg',     two:['å„ªã—ã•ã¯åŠ›ã€å—ã‘å–ã‚‹ã“ã¨ã¯å‰µé€ ã€‚','è‚²ã¦ãŸã‚‚ã®ãŒã€å›ã‚’è‚²ã¦ã‚‹ã€‚']},
  { id:4,  key:'emperor',     n:'The Emperor',     img:'/assets/tarot/04_emperor.jpg',     two:['è¿·ã„ã¯æ§‹é€ ã§è§£ã‘ã‚‹ã€‚','å¢ƒç•Œç·šã¯ã€å›ã‚’å®ˆã‚‹åŸã€‚']},
  { id:5,  key:'hierophant',  n:'The Hierophant',  img:'/assets/tarot/05_hierophant.jpg',  two:['ä¼çµ±ã¯æª»ã§ã¯ãªã„ã€åœŸå£Œã ã€‚','å­¦ã³ã¯ç¶™æ‰¿ã§å¼·ããªã‚‹ã€‚']},
  { id:6,  key:'lovers',      n:'The Lovers',      img:'/assets/tarot/06_lovers.jpg',      two:['é¸ã¶ã“ã¨ã¯ã€èª°ã‹ã‚’æ„›ã™ã‚‹ã“ã¨ã€‚','æ„›ã™ã‚‹ã“ã¨ã¯ã€é¸ã³ç¶šã‘ã‚‹ã“ã¨ã€‚']},
  { id:7,  key:'chariot',     n:'The Chariot',     img:'/assets/tarot/07_chariot.jpg',     two:['å‘ã‹ã†å…ˆãŒé€Ÿã•ã‚’æ±ºã‚ã‚‹ã€‚','æ‰‹ç¶±ã¯å¿ƒã€é€²è·¯ã¯æ„å¿—ã€‚']},
  { id:8,  key:'strength',    n:'Strength',        img:'/assets/tarot/08_strength.jpg',    two:['å„ªã—ã„åŠ›ã¯ã€ä¸–ç•Œã‚’å¾“ã‚ã›ãªã„ã€‚','ãã‚Œã§ã‚‚ã€ä¸–ç•Œã¯å¾“ã†ã€‚']},
  { id:9,  key:'hermit',      n:'The Hermit',      img:'/assets/tarot/09_hermit.jpg',      two:['ç‹¬ã‚Šã®ç¯ã‚ŠãŒã€ç¾¤è¡†ã‚ˆã‚Šé ãã‚’ç…§ã‚‰ã™ã€‚','æ¢ã—ã¦ã„ãŸã®ã¯ã€æ¢ã—ã¦ã„ã‚‹è‡ªåˆ†ã ã£ãŸã€‚']},
  { id:10, key:'wheel',       n:'Wheel of Fortune',img:'/assets/tarot/10_wheel.jpg',       two:['å·¡ã‚‹ã®ã¯é‹ã§ã¯ãªãã€é¸æŠã€‚','ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã€æº–å‚™ã‚’æ„›ã—ã¦ã„ã‚‹ã€‚']},
  { id:11, key:'justice',     n:'Justice',         img:'/assets/tarot/11_justice.jpg',     two:['ã‚„ã•ã—ã•ã«ã‚‚åˆƒãŒã‚ã‚‹ã€‚','å…¬å¹³ã•ã¯å›ã¨ç›¸æ‰‹ã‚’åŒæ™‚ã«æ•‘ã†ã€‚']},
  { id:12, key:'hanged',      n:'The Hanged Man',  img:'/assets/tarot/12_hanged.jpg',      two:['ä¸–ç•Œã‚’é€†ã•ã«ã—ã¦è¦‹ã‚ˆã€‚','æ­¢ã¾ã‚‹ã“ã¨ãŒé€²ã‚€ã“ã¨ã«ãªã‚‹æ—¥ã‚‚ã‚ã‚‹ã€‚']},
  { id:13, key:'death',       n:'Death',           img:'/assets/tarot/13_death.jpg',       two:['çµ‚ã‚ã‚Šã¯åå‰ã®é•ã†å§‹ã¾ã‚Šã€‚','è„±çš®ã®ç—›ã¿ã¯ã€ç”Ÿãã¦ã„ã‚‹è¨¼ã€‚']},
  { id:14, key:'temperance',  n:'Temperance',      img:'/assets/tarot/14_temperance.jpg',  two:['æ··ãœã‚‹ã€å¾…ã¤ã€æ•´ãˆã‚‹ã€‚','ãã®ä¸­é–“ã«ã€ç­”ãˆã¯æ£²ã‚€ã€‚']},
  { id:15, key:'devil',       n:'The Devil',       img:'/assets/tarot/15_devil.jpg',       two:['é–ã¯å¿ƒã®å†…å´ã«çµã°ã‚Œã¦ã„ã‚‹ã€‚','éµã‚‚ã¾ãŸã€å†…å´ã«ã‚ã‚‹ã€‚']},
  { id:16, key:'tower',       n:'The Tower',       img:'/assets/tarot/16_tower.jpg',       two:['å£Šã‚Œã‚‹ã®ã¯å£Šã™ã¹ãã‚‚ã®ã€‚','ç©ºã„ãŸéš™é–“ãŒå…‰ã®é€šã‚Šé“ã€‚']},
  { id:17, key:'star',        n:'The Star',        img:'/assets/tarot/17_star.jpg',        two:['é¡˜ã„ã¯å¤œã®æ°´é¢ã§å¼·ããªã‚‹ã€‚','å¸Œæœ›ã¯ã€æ‰‹ã‚’æ´—ã†ã¿ãŸã„ã«ç°¡å˜ã€‚']},
  { id:18, key:'moon',        n:'The Moon',        img:'/assets/tarot/18_moon.jpg',        two:['ä¸å®‰ã¯æƒ³åƒåŠ›ã®å‰¯ä½œç”¨ã€‚','æ›™ã¯å¿…ãšæ¥ã‚‹ã€‚']},
  { id:19, key:'sun',         n:'The Sun',         img:'/assets/tarot/19_sun.jpg',         two:['å–œã³ã¯æˆ¦ç•¥ã«ãªã‚‹ã€‚','ç¬‘é¡”ã¯æœªæ¥ã®å…ˆè¡ŒæŠ•è³‡ã€‚']},
  { id:20, key:'judgement',   n:'Judgement',       img:'/assets/tarot/20_judgement.jpg',   two:['èµ¦ã™ã®ã§ã¯ãªã„ã€å‘¼ã³æˆ»ã™ã®ã ã€‚','ã„ã¾ã®å›ã§ã€ã‚„ã‚Šç›´ã›ã€‚']},
  { id:21, key:'world',       n:'The World',       img:'/assets/tarot/21_world.jpg',       two:['è¼ªã¯é–‰ã˜ã¦ã€é“ã¯é–‹ãã€‚','å®Œæˆå½¢ã¯æ¬¡ã®ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ã€‚']},
];

/* 3æšå¼•ãï¼ˆæš—å·å­¦çš„ä¹±æ•°ã§é‡è¤‡ãªã—ï¼‰ */
function drawThree(){
  const pool = [...MAJOR];
  const picks = [];
  for(let i=0;i<3;i++){
    const r = crypto.getRandomValues(new Uint32Array(1))[0] % pool.length;
    picks.push(pool.splice(r,1)[0]);
  }
  return picks;
}

let opened = 0;
let selected = drawThree();

/* ãƒ•ãƒ­ãƒ³ãƒˆé¢ã«å¯¾å¿œç”»åƒã‚’æ•·ã */
function setFrontImage(cardEl, imgUrl){
  const front = cardEl.querySelector('.card__front');
  if(!front) return;
  front.style.backgroundImage = `url("${imgUrl}")`;
  front.style.backgroundPosition = 'center';
  front.style.backgroundSize = 'cover';
}

/* ã‚¯ãƒªãƒƒã‚¯ã§åè»¢ â†’ ç”»åƒåæ˜  â†’ 2è¡Œè§£èª¬ â†’ å…¨é–‹æ™‚ã¯ç¶šãã¸ */
function flip(i){
  const el = cards[i];
  if(!el || el.classList.contains('is-flipped')) return;

  const d = selected[i];                 // â† ã“ã“ãŒã€Œæ„å‘³ï¼ç”»åƒã€ã®ã‚»ãƒƒãƒˆ
  setFrontImage(el, d.img);              // è¡¨é¢ç”»åƒã‚’ã‚«ãƒ¼ãƒ‰ã«å³é©ç”¨
  el.classList.add('is-flipped','card--glow');
  setTimeout(()=>el.classList.remove('card--glow'),620);

  // 2è¡Œè§£èª¬
  mBodies[i].innerHTML = `ã€Š${d.n}ã€‹<br>${d.two[0]}<br>${d.two[1]}`;
  mItems[i].classList.add('is-show');

  opened++;
  if(opened===3) runSequence();
}

      const POEMS=[
        ["é¢¨ã¯åã‚’æŒãŸãšã€ã‚ãªãŸã®é¡˜ã„ã ã‘ã‚’çŸ¥ã£ã¦ã„ã‚‹ã€‚","è¿·ã£ãŸè¶³è·¡ã¯ã€åœ°å›³ã«æãç›´ã›ã‚‹ã€‚","å„ªã—ã•ã¯æ­¦å™¨ã§ã¯ãªã„â€”â€”ãã‚Œã§ã‚‚é—‡ã‚’é ã–ã‘ã‚‹ã€‚","æ¶™ã¯è¨€è‘‰ã®å‰å¥ã€æ²ˆé»™ã¯ç¥ˆã‚Šã®æœ¬è³ªã€‚","é¸ã¶ã“ã¨ã¯ã€æœªæ¥ã®è²¬ä»»ã‚’æŠ±ãã—ã‚ã‚‹ã“ã¨ã€‚","æã‚Œã®å¥¥ã«ã¯ã€å‡ºç™ºã®éµç©´ãŒã‚ã‚‹ã€‚","æ‰‹æ”¾ã™ã¨ã¯ã€ã‚ˆã‚Šå¤§ããªå¾ªç’°ã¸è¿”ã™å„€å¼ã€‚","å‘¼å¸ã‚’ä¸€åº¦ã€é•·ãã€‚ä¸–ç•Œã¯ãã‚Œã ã‘ã§åºƒãŒã‚‹ã€‚","ãã—ã¦ã€ã„ã¾ã€‚å°ã•ãªä¸€æ­©ãŒã€ã‚ãªãŸã‚’æ•‘ã†ã€‚"],
        ["ã‚„ã•ã—ã„å…‰ã¯ã€é…ã‚Œã¦å±Šãç´„æŸã®ã‚ˆã†ã ã€‚","ä¸å®‰ã®è¼ªéƒ­ã¯ã€ç¢ºã‹ã‚ã‚‹ã»ã©è–„ããªã‚‹ã€‚","èª°ã‹ã‚’èµ¦ã™ãŸã³ã€è‡ªåˆ†ãŒè‡ªç”±ã«ãªã‚‹ã€‚","é¡˜ã„ã‚’éš ã•ãªã„æ—¥ã€æ™‚é–“ã¯å‘³æ–¹ã«å¤‰ã‚ã‚‹ã€‚","é–“é•ã„ã¯ã€æ­£ã—ãé€²ã‚€ãŸã‚ã®æ–¹ä½ç£çŸ³ã€‚","å¯„ã‚Šã‹ã‹ã‚Œã‚‹å£ã¯ã€å¼·ã•ã®è¨¼æ˜ã€‚","å¸Œæœ›ã¯ã€æ‰‹ã‚’æ´—ã†ã¿ãŸã„ã«ç°¡å˜ã ã€‚","æœªæ¥ã¯éå»ã‚’è²¬ã‚ãªã„â€”â€”ãŸã æŠ±ãã—ã‚ç›´ã™ã€‚","å¤§ä¸ˆå¤«ã€‚ã‚ãªãŸã¯â€œã„ã¾â€ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã‚‹ã€‚"],
        ["å­¤ç‹¬ã¯æ•µã§ã¯ãªã„ã€ç¯å°ã®å…‰æºã ã€‚","è¶³ã‚Šãªã„ã¨æ„Ÿã˜ã‚‹å ´æ‰€ã«ã€å‡ºä¼šã„ã¯ç”Ÿã¾ã‚Œã‚‹ã€‚","å¤±ã†ã“ã¨ã¯ã€ç©ºãã‚’ã¤ãã‚‹ã“ã¨ã€‚","ãã®ç©ºãã«ã€è´ˆã‚Šç‰©ã¯å…¥ã£ã¦ãã‚‹ã€‚","å¾…ã¤åŠ›ã¯ã€é€²ã‚€åŠ›ã¨åŒã˜é‡ã•ã‚’æŒã¤ã€‚","æ„›ã¯é¸æŠã€é¸æŠã¯å‹‡æ°—ã€å‹‡æ°—ã¯ç·´ç¿’ã§è‚²ã¤ã€‚","å¿ƒã®æ¸©åº¦ã‚’ã²ã¨ã¤ä¸Šã’ãŸã‚‰ã€æ™¯è‰²ãŒå¤‰ã‚ã£ãŸã€‚","ã‚ã‚ŠãŒã¨ã†ã¯ã€æœªæ¥ã‚’å‰æ‰•ã„ã™ã‚‹è¨€è‘‰ã€‚","ã•ã‚ã€æ¬¡ã®ä¸€æ­©ã¸ã€‚"],
        ["æ‰‰ã¯å¤–ã«ã¯ãªãã€èƒ¸ã®å†…å´ã«ä»˜ã„ã¦ã„ã‚‹ã€‚","éµã¯ã„ã¤ã‚‚ã€ã‚ãªãŸã®æ‰‹ã®ä¸­ã«ã‚ã£ãŸã€‚","æ¯”è¼ƒã¯é¡ã€ã§ã‚‚é“ã—ã‚‹ã¹ã§ã¯ãªã„ã€‚","å°Šæ•¬ã¯è·é›¢ã‚’æ¸¬ã‚Šã€æ„›ã¯è·é›¢ã‚’è¶Šãˆã‚‹ã€‚","å¤±æ•—ã¯çµ‚ã‚ã‚Šã§ã¯ãªãã€è©©ã®å¥èª­ç‚¹ã€‚","é¸ã³ç›´ã™ã“ã¨ã¯ã€ä¸–ç•Œã‚’æ›¸ãæ›ãˆã‚‹æŠ€æ³•ã€‚","å°ã•ãªå…‰ã§ã„ã„ã€ç¶™ç¶šãŒæ˜Ÿåº§ã‚’ã¤ãã‚‹ã€‚","ã‚ãªãŸã®å£°ã¯ã€ã‚ãªãŸã‚’æ•‘ã†ã€‚","å‘¼ã‚“ã§ã„ã‚‹ã€‚é€²ã‚‚ã†ã€‚"],
        ["å‚·ã¯å¼±ç‚¹ã§ã¯ãªã„ã€ã‚„ã•ã—ã•ã®å…¥å£ã ã€‚","æ‹’ã¾ã‚ŒãŸã¨æ„Ÿã˜ãŸæ—¥ã‚‚ã€åˆ¥ã®æ‰‰ã¯é–‹ã„ã¦ã„ãŸã€‚","é¡˜ã„ã¯ã€èª°ã‹ã‚’å–œã°ã›ã‚‹å½¢ã§å¶ã†ã¨å¼·ã„ã€‚","æã‚Œã‚’ã”ã¾ã‹ã•ãšã€æŠ±ãˆã¦æ­©ãã¨è»½ããªã‚‹ã€‚","æ­£ã—ã•ã‚ˆã‚Šã‚‚ã€ã‚ãŸãŸã‹ã•ãŒå…ˆã«å±Šãã€‚","æ¶™ã¯ç¥ˆã‚Šã®æ¶²ä½“ã€ä¹¾ããŸã³ã«å¼·ããªã‚‹ã€‚","å¥½ãã¯ç†ç”±ã«ãªã‚Šã€ç´„æŸã¯é“ã«ãªã‚‹ã€‚","å®ˆã‚ŠãŸã„ã‚‚ã®ã®ãŸã‚ã«ã€ä»Šæ—¥ã§ãã‚‹ä¸€æ‰‹ã‚’ã€‚","ã»ã‚‰ã€å…‰ã ã€‚"],
        ["æœã¯å¿…ãšæ¥ã‚‹ã€‚ã ã‹ã‚‰å¤œã¯å½¹ç›®ã‚’æœãŸã›ã‚‹ã€‚","ç–‘ã„ã¨ç¢ºä¿¡ã¯ã€åŒã˜å ´æ‰€ã‹ã‚‰ç”Ÿã¾ã‚Œã‚‹åŒå­ã€‚","è¨€è‘‰ã¯åˆƒã«ã‚‚æ©‹ã«ã‚‚ãªã‚‹â€”â€”ã‚ãªãŸã¯æ©‹ã«ã§ãã‚‹ã€‚","æ€’ã‚Šã¯å¢ƒç•Œã®åˆå›³ã€ä¼ãˆæ–¹ãŒæœªæ¥ã‚’æ±ºã‚ã‚‹ã€‚","ãŸã‚æ¯ã‚’ã²ã¨ã¤ã€ã‚„ã•ã—ã„å‘¼å¸ã«å¤‰æ›ã™ã‚‹ã€‚","â€œå¤§ä¸ˆå¤«ã ã‚ˆâ€ã¯ã€ä¸–ç•Œã‚’æºã‚‰ã™å‘ªæ–‡ã ã€‚","æ‰‹æ”¾ã—ãŸã‚ã¨ã«æ®‹ã‚‹ã‚‚ã®ãŒã€ã»ã‚“ã¨ã†ã®ç¸ã€‚","æœŸå¾…ã‚ˆã‚Šã‚‚ã€ä¿¡é ¼ã‚’é¸ã¶æ—¥ã€‚","ã„ã¾ã€ã“ã®ç¬é–“ãŒæ‰‰ã€‚"],
        ["ã†ã¾ãã„ã‹ãªã„æ—¥ã¯ã€å­¦ã³ãŒå¤šã„æ—¥ã ã€‚","ç„¦ã‚Šã¯é¡˜ã„ã®è£è¿”ã—ã€‚é¡˜ã„ã‚’ã‚‚ã†ä¸€åº¦ã€ä¸å¯§ã«ã€‚","æº–å‚™ã¯å¥‡è·¡ã®å‘¼ã³æ°´ã€‚å°ã•ãã¦ååˆ†ã€‚","ç¬‘é¡”ã¯æˆ¦ç•¥ã«ãªã‚‹ã€‚è»½è¦–ã—ãªã„ã§ã€‚","é å›ã‚Šã¯ã€æ ¹ã‚’æ·±ãã™ã‚‹ãŸã‚ã®æ™‚é–“ã€‚","ã²ã¨ã‚Šã§æŠ±ãˆãªã„ã¨æ±ºã‚ãŸç¬é–“ã€é‡ã•ã¯åŠåˆ†ã«ãªã‚‹ã€‚","èª å®Ÿã•ã¯æœ€çŸ­è·é›¢ã€‚é å›ã‚Šã«è¦‹ãˆã¦ã‚‚ã€‚","éå»ã®è‡ªåˆ†ã«â€œã‚ˆãã‚„ã£ãŸâ€ã‚’æ¸¡ã™ã€‚","ãã—ã¦å‰ã‚’å‘ãã€‚"],
        ["ç¸ã¯å¶ç„¶ã«è¦‹ãˆã¦ã€å‘¼ã³åˆã£ã¦ã„ã‚‹ã€‚","å‹‡æ°—ã®å®šç¾©ã¯ã€æ€–ã•ã‚’æŒã£ãŸã¾ã¾é€²ã‚€ã“ã¨ã€‚","å–„æ„ã¯ä¸‡èƒ½ã§ã¯ãªã„ã€ã§ã‚‚å§‹ã¾ã‚Šã«ã¯ãªã‚‹ã€‚","æ­£è§£ã¯ä¸€ã¤ã˜ã‚ƒãªã„ã€ç´å¾—ã¯ä¸€äººä¸€ã¤ãšã¤ã€‚","ç›®ã®å‰ã®äººã«ã§ãã‚‹ã“ã¨ã‚’ã€ç›®ã®å‰ã§ã™ã‚‹ã€‚","é¡˜ã„ã¯å£°ã«å‡ºã™ã¨ã€å‘³æ–¹ãŒç¾ã‚Œã‚‹ã€‚","å„ªå…ˆé †ä½ã¯â€œã„ã¾æ•‘ãˆã‚‹ã‚‚ã®â€ã‹ã‚‰ã€‚","æ„›ã•ã‚ŒãŸã„ã¯ã€æ„›ã—ãŸã„ã®åˆ¥åã€‚","ä»Šæ—¥ã®å…‰ã‚’é›†ã‚ã‚ˆã†ã€‚"],
        ["ä¸–ç•Œã¯ã‚ãªãŸã«å³ã—ããªã„ã€ãŸã æ­£ç›´ãªã ã‘ã ã€‚","æ‰èƒ½ã¯ç‰¹åˆ¥ã§ã¯ãªã„ã€ç¶šã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒç‰¹åˆ¥ã ã€‚","æ¯”ã¹ã‚‹ãªã‚‰ã€æ˜¨æ—¥ã®ã‚ãªãŸã¨ã€‚","å°ã•ãªå®Œæˆã‚’é‡ã­ã‚‹ã¨ã€å¥‡è·¡ã¨å‘¼ã°ã‚Œã‚‹ã€‚","é‹ã¯æµã‚Œã€æ©Ÿä¼šã¯å¾…ãŸãªã„ã€‚æ‰‹ã‚’ä¼¸ã°ã™ç·´ç¿’ã‚’ã€‚","å¤±ç¤¼ã‚ˆã‚Šèª å®Ÿã€é€Ÿã•ã‚ˆã‚Šä¸å¯§ã‚’é¸ã¹ã°ã€çµæœã‚‚ä»˜ã„ã¦ãã‚‹ã€‚","å¿ƒã®å¤©æ°—äºˆå ±ã‚’æŒã¡ãªãŒã‚‰ã€äºˆå®šã‚’ç«‹ã¦ã‚‹ã€‚","ã‚ãªãŸã®æ­©å¹…ã§æ­©ãã€‚èª°ã®ã§ã‚‚ãªã„æ­©å¹…ã§ã€‚","ã»ã‚‰ã€ã‚‚ã†æ•‘ã‚ã‚Œã¯ã˜ã‚ã¦ã„ã‚‹ã€‚"]
      ];

      function drawThree(){
        const pool=[...DECK], picks=[];
        for(let i=0;i<3;i++){
          const r=crypto.getRandomValues(new Uint32Array(1))[0]%pool.length;
          picks.push(pool.splice(r,1)[0]);
        }
        return picks;
      }

      let opened=0, selected=drawThree();

      function flip(i){
        const el=cards[i]; if(!el||el.classList.contains('is-flipped')) return;
        el.classList.add('is-flipped','card--glow'); setTimeout(()=>el.classList.remove('card--glow'),620);

        // 2è¡Œè§£èª¬
        const d=selected[i];
        mBodies[i].innerHTML=`ã€Š${d.n}ã€‹<br>${d.two[0]}<br>${d.two[1]}`;
        mItems[i].classList.add('is-show');

        opened++; if(opened===3) runSequence();
      }

      cards.forEach((el,i)=>{
        el.addEventListener('click',()=>flip(i),{passive:true});
        el.addEventListener('keydown',e=>{
          if(e.key==='Enter'||e.key===' '){ e.preventDefault(); flip(i); }
        });
      });

      // â€”â€” 3æšç›®ã®å¾Œã®æµã‚Œï¼šãƒ•ãƒ©ãƒƒã‚·ãƒ¥â†’è©©éŸ»ç¥ˆâ†’ä¹è¡Œâ†’CTA
      function runSequence(){
        // 1) ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
        if(flash){ flash.classList.add('is-on'); setTimeout(()=>flash.classList.remove('is-on'), T_FLASH); }

        // 2) ã€Œâ€” è©©ãƒ»éŸ»ãƒ»ç¥ˆ â€”ã€ã‚’é¡•ç¾ã—ã€ãã“ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        title.removeAttribute('aria-hidden');
        title.classList.add('is-show');
        title.scrollIntoView({behavior:'smooth', block:'center'});

        // 3) å°‘ã—â€œé–“â€ã‚’ç½®ã„ã¦ä¹è¡Œè©©ã¸
        const startAt = T_FLASH + T_SY_FADE + T_PAUSE;
        setTimeout(runPoem, startAt);
      }

      function runPoem(){
        const set = POEMS[(Math.random()*POEMS.length)|0];
        poemBox.innerHTML='';
        let delay=0;
        set.forEach(line=>{
          const li=document.createElement('li');
          li.textContent=line;
          poemBox.appendChild(li);
          setTimeout(()=> li.classList.add('is-show'), delay);
          delay += LINE_DELAY;
        });
        setTimeout(()=> actions.classList.add('is-show'), delay + 400);
      }
    })();
  </script>
</body>
</html>
