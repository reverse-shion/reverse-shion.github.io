<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TAROT BREAKER｜現実界キャンパス・回廊</title>

  <style>
    :root{
      --text: rgba(18, 22, 30, 0.92);
      --muted: rgba(18, 22, 30, 0.62);
      --muted2: rgba(18, 22, 30, 0.48);

      /* Tarot / Tech palette */
      --ink: rgba(18, 22, 30, 0.16);
      --ink2: rgba(18, 22, 30, 0.10);
      --accent: rgba(120, 170, 235, 0.70);      /* 薄青（AIの冷光） */
      --accent2: rgba(120, 170, 235, 0.35);
      --gold: rgba(183, 157, 109, 0.52);        /* Arete薄金 */
      --gold2: rgba(183, 157, 109, 0.28);

      --glass: rgba(255,255,255,0.72);
      --glass2: rgba(255,255,255,0.60);

      --shadow: 0 22px 55px rgba(10, 16, 25, 0.16);
      --shadow2: 0 14px 34px rgba(10, 16, 25, 0.12);

      --radius: 18px;
      --maxw: 980px;

      --bg-image: url("images/campus.png");
    }

    *{ box-sizing: border-box; }
    html, body { height: 100%; }

    body{
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif;
      color: var(--text);
      overflow-x: hidden;

      /* 背景を“見せる” */
      background: var(--bg-image) center / cover no-repeat fixed;
    }

    /* 背景を薄めすぎない“先端的な視認補助” */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(circle at 20% 18%, rgba(255,255,255,0.22), transparent 55%),
        radial-gradient(circle at 80% 70%, rgba(255,255,255,0.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      /* 背景は見せたいので“薄め”だけ */
    }

    /* 微細ノイズ（高級UI感） */
    body::after{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      background-image:
        linear-gradient(0deg, rgba(0,0,0,0.035), rgba(0,0,0,0.035)),
        radial-gradient(circle at 12% 26%, rgba(255,255,255,0.12) 0 1px, transparent 2px),
        radial-gradient(circle at 72% 12%, rgba(255,255,255,0.08) 0 1px, transparent 2px),
        radial-gradient(circle at 82% 72%, rgba(255,255,255,0.06) 0 1px, transparent 2px);
      opacity: 0.26;
      mix-blend-mode: soft-light;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(12px);
      background: linear-gradient(180deg, rgba(255,255,255,0.76), rgba(255,255,255,0.56));
      border-bottom: 1px solid var(--ink2);
    }

    .topbar{
      width: min(var(--maxw), 100%);
      margin: 0 auto;
      padding: 0.95rem 1.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .crumb{
      display: flex;
      align-items: baseline;
      gap: 0.6rem;
      letter-spacing: 0.08em;
      font-size: 0.92rem;
      color: rgba(18,22,30,0.60);
      user-select: none;
      white-space: nowrap;
    }
    .crumb strong{
      color: rgba(18,22,30,0.90);
      font-weight: 900;
      letter-spacing: 0.13em;
    }

    .return-anchor{
      color: rgba(18,22,30,0.78);
      text-decoration: none;
      padding: 0.35rem 0.55rem;
      border-radius: 10px;
      border: 1px solid rgba(18,22,30,0.14);
      background: rgba(255,255,255,0.40);
      backdrop-filter: blur(10px);
      transition: transform .2s ease, opacity .2s ease, box-shadow .2s ease;
      white-space: nowrap;
    }
    .return-anchor:hover,
    .return-anchor:focus-visible{
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(10,16,25,0.12);
      outline: none;
    }

    main{
      width: min(var(--maxw), 100%);
      margin: 0 auto;
      padding: 2.2rem 1.2rem 3.2rem;
      display: grid;
      gap: 1.3rem;
      position: relative;
      z-index: 5;
    }

    /* Intro: 背景は見せたいので panel の白を弱め、境界線を精密に */
    .intro{
      position: relative;
      overflow: hidden;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.68), rgba(255,255,255,0.52));
      border: 1px solid rgba(18,22,30,0.14);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
      padding: 1.15rem 1.2rem;
    }

    .intro::before{
      content:"";
      position:absolute;
      inset: 10px;
      border-radius: calc(var(--radius) - 10px);
      border: 1px solid rgba(255,255,255,0.40);
      pointer-events: none;
      opacity: 0.8;
    }

    .intro::after{
      /* 右上の“紙テープ”をより現代的に（薄金のラベル） */
      content:"";
      position:absolute;
      top: 0.75rem;
      right: 1rem;
      width: 74px;
      height: 18px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(183,157,109,0.18), rgba(183,157,109,0.32));
      border: 1px solid rgba(183,157,109,0.20);
      box-shadow: 0 10px 22px rgba(10,16,25,0.10);
      pointer-events: none;
    }

    .intro p{
      margin: 0.35rem 0;
      line-height: 1.9;
      color: rgba(18,22,30,0.90);
      font-size: clamp(0.98rem, 1.6vw, 1.12rem);
      letter-spacing: 0.02em;
    }
    .intro p.muted{ color: rgba(18,22,30,0.62); }

    .location-stack{
      display: grid;
      gap: 0.95rem;
      margin-top: 0.4rem;
    }

    /* ===========================================
       完全タロット風カード UI（本気）
       =========================================== */
    .location-card{
      position: relative;
      overflow: hidden;
      isolation: isolate;
      text-decoration: none;
      color: inherit;

      border-radius: calc(var(--radius) + 2px);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.74), rgba(255,255,255,0.60));
      border: 1px solid rgba(18,22,30,0.16);

      box-shadow: var(--shadow2);
      backdrop-filter: blur(12px);

      padding: 1.05rem 1.1rem 1.05rem 1.1rem;
      transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease;
    }

    /* 外枠の“タロット額縁” */
    .location-card::before{
      content:"";
      position: absolute;
      inset: 10px;
      border-radius: calc(var(--radius) - 2px);
      border: 1px solid rgba(18,22,30,0.14);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.36);
      pointer-events: none;
      z-index: 1;
    }

    /* 角の装飾（タロットらしいが現代的） */
    .location-card::after{
      content:"";
      position:absolute;
      inset: 0;
      pointer-events:none;
      z-index: 1;
      background:
        radial-gradient(circle at 18px 18px, rgba(183,157,109,0.34) 0 2px, transparent 3px),
        radial-gradient(circle at calc(100% - 18px) 18px, rgba(183,157,109,0.34) 0 2px, transparent 3px),
        radial-gradient(circle at 18px calc(100% - 18px), rgba(183,157,109,0.34) 0 2px, transparent 3px),
        radial-gradient(circle at calc(100% - 18px) calc(100% - 18px), rgba(183,157,109,0.34) 0 2px, transparent 3px),
        linear-gradient(90deg, rgba(183,157,109,0.0), rgba(183,157,109,0.18), rgba(183,157,109,0.0));
      opacity: 0.55;
      mix-blend-mode: multiply;
    }

    /* タイトル帯（タロットの“名”プレート） */
    .card-top{
      display:flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      position: relative;
      z-index: 3;
    }

    .title-plate{
      display: inline-flex;
      align-items: baseline;
      gap: 0.6rem;
      padding: 0.35rem 0.55rem;
      border-radius: 12px;
      background: rgba(255,255,255,0.44);
      border: 1px solid rgba(18,22,30,0.12);
      box-shadow: 0 10px 22px rgba(10,16,25,0.08);
      backdrop-filter: blur(12px);
    }

    .location-card h2{
      margin: 0;
      font-size: 1.02rem;
      font-weight: 950;
      letter-spacing: 0.12em;
      color: rgba(18,22,30,0.92);
    }

    /* グリフは“カード角のシンボル”として扱う */
    .glyph{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: rgba(255,255,255,0.44);
      border: 1px solid rgba(18,22,30,0.12);
      box-shadow: 0 10px 22px rgba(10,16,25,0.08);
      backdrop-filter: blur(12px);

      font-size: 0.92rem;
      letter-spacing: 0.18em;
      color: rgba(18,22,30,0.60);
      user-select: none;
    }

    .location-card p{
      margin: 0.55rem 0 0;
      color: rgba(18,22,30,0.66);
      line-height: 1.9;
      font-size: 0.95rem;
      position: relative;
      z-index: 3;
    }

    .hint{
      margin-top: 0.52rem;
      font-size: 0.86rem;
      color: rgba(18,22,30,0.50);
      letter-spacing: 0.08em;
      position: relative;
      z-index: 3;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .hint::after{
      content:"→";
      opacity: 0.55;
      transform: translateY(-0.5px);
    }

    /* 左端：ドアの縦スリット（常時うっすら） */
    .slit{
      position:absolute;
      top: 12%;
      bottom: 12%;
      left: 16px;
      width: 3px;
      border-radius: 999px;
      background: linear-gradient(180deg,
        rgba(120,170,235,0.00),
        rgba(120,170,235,0.62),
        rgba(120,170,235,0.00)
      );
      opacity: 0.40;
      filter: blur(0.1px);
      pointer-events:none;
      z-index: 2;
    }

    /* カード表面の“床反射”ハイライト */
    .sheen{
      position:absolute;
      inset: -35% -35%;
      background: linear-gradient(115deg,
        rgba(255,255,255,0.00) 0%,
        rgba(255,255,255,0.30) 46%,
        rgba(255,255,255,0.00) 70%
      );
      transform: translateX(-22%);
      opacity: 0.28;
      pointer-events:none;
      z-index: 2;
    }

    /* Hover/Focus：現代的に“起動” */
    .location-card:hover,
    .location-card:focus-visible{
      transform: translateY(-3px);
      border-color: rgba(120,170,235,0.55);
      box-shadow: var(--shadow);
      outline: none;
    }
    .location-card:hover .slit,
    .location-card:focus-visible .slit{
      opacity: 0.62;
    }

    /* ゲート走査線（縦光が走る） */
    .gate-sweep{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index: 4;
      opacity: 0;
      transform: translateX(-120%);
      background: linear-gradient(90deg,
        rgba(255,255,255,0.00) 0%,
        rgba(255,255,255,0.72) 50%,
        rgba(255,255,255,0.00) 100%
      );
      filter: blur(0.25px);
    }
    .location-card.gate-on .gate-sweep{
      opacity: 1;
      animation: gateSweep 380ms ease-out forwards;
    }
    @keyframes gateSweep{
      0%   { transform: translateX(-120%); opacity: 0; }
      12%  { opacity: 1; }
      100% { transform: translateX(120%); opacity: 0; }
    }

    /* クリック中に“タロットが開く”感じ（ほんの少しだけ） */
    .location-card.gate-armed{
      border-color: rgba(120,170,235,0.68);
      box-shadow: var(--shadow);
    }

    /* Arete Dot */
    .pulse-dot{
      position: fixed;
      top: 14px;
      right: 14px;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(183,157,109,0.32);
      border: 1px solid rgba(183,157,109,0.44);
      box-shadow: 0 0 0 0 rgba(183,157,109,0.22);
      cursor: pointer;
      z-index: 50;
    }
    .pulse-dot:hover{
      background: rgba(183,157,109,0.42);
      border-color: rgba(183,157,109,0.62);
    }

    .tooltip{
      position: fixed;
      top: 10px;
      right: 32px;
      background: rgba(255,255,255,0.90);
      border: 1px solid rgba(18,22,30,0.12);
      color: rgba(18,22,30,0.84);
      padding: 0.40rem 0.60rem;
      border-radius: 12px;
      font-size: 0.86rem;
      letter-spacing: 0.03em;
      box-shadow: 0 12px 28px rgba(10,16,25,0.12);
      opacity: 0;
      transform: translateY(-4px);
      pointer-events: none;
      transition: opacity .18s ease, transform .18s ease;
      z-index: 50;
      max-width: 320px;
    }
    .tooltip.show{ opacity: 1; transform: translateY(0); }

    /* Sync Overlay（出すタイミングはJSで遅らせる） */
    .sync-overlay{
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(10, 12, 16, 0.90);
      color: rgba(245,245,245,0.92);
      letter-spacing: 0.12em;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.40s ease;
      z-index: 80;
      pointer-events: none;
    }
    .sync-overlay.active{
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }
    .sync-box{
      text-align: center;
      padding: 1.1rem 1.2rem;
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: 16px;
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(6px);
    }
    .sync-box p{ margin: .25rem 0; font-size: clamp(.95rem, 2vw, 1.08rem); }
    .sync-sub{ font-size: .86rem !important; letter-spacing: .18em; color: rgba(220,220,220,0.78) !important; }

    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; animation:none !important; }
    }
  </style>
</head>

<body>
  <header>
    <div class="topbar">
      <div class="crumb" aria-label="現在地">
        <strong>現実界</strong> / キャンパス・回廊
      </div>
      <a class="return-anchor" href="star-memory.html">星の記憶へ戻る</a>
    </div>
  </header>

  <button class="pulse-dot" id="pulseDot" aria-label="右目の微熱（Areteの気配）"></button>
  <div class="tooltip" id="tooltip" role="status" aria-live="polite">右目の奥が、ほんの少し熱い。</div>

  <main>
    <section class="intro" aria-label="導入">
      <p>蛍光灯が、白い音を立てている。</p>
      <p>床のワックスが、乾いた匂いで鼻の奥に残る。</p>
      <p class="muted">紙の擦れる音。遠い笑い声。教室の扉が閉まる気配。</p>
      <p>ここは星界じゃない。</p>
      <p>選んだ言葉が、そのまま形になる場所だ。</p>
      <p class="muted">——だからこそ、逃げられない。</p>
    </section>

    <section class="location-stack" aria-label="現実の行き先">
      <a class="location-card" href="amato.html" data-destination="amato.html">
        <span class="slit" aria-hidden="true"></span>
        <span class="sheen" aria-hidden="true"></span>

        <div class="card-top">
          <span class="title-plate"><h2>アマト｜化粧品売り場</h2></span>
          <span class="glyph">◇</span>
        </div>
        <p>ガラスのカウンター。香りの層。鏡に重なる「なりたい自分」。</p>
        <div class="hint">行き先へ進む</div>

        <span class="gate-sweep" aria-hidden="true"></span>
      </a>

      <a class="location-card" href="ouin-shoot.html" data-destination="ouin-shoot.html">
        <span class="slit" aria-hidden="true"></span>
        <span class="sheen" aria-hidden="true"></span>

        <div class="card-top">
          <span class="title-plate"><h2>OUIN｜撮影ステージ</h2></span>
          <span class="glyph">▢</span>
        </div>
        <p>白い照明。布の張り。身体が「形」へ変換される瞬間。</p>
        <div class="hint">行き先へ進む</div>

        <span class="gate-sweep" aria-hidden="true"></span>
      </a>

      <a class="location-card" href="ecru-magazine.html" data-destination="ecru-magazine.html">
        <span class="slit" aria-hidden="true"></span>
        <span class="sheen" aria-hidden="true"></span>

        <div class="card-top">
          <span class="title-plate"><h2>ECRU｜ファッション誌アーカイブ</h2></span>
          <span class="glyph">◻</span>
        </div>
        <p>ページが記憶する。写真が拒む。——消えない白。</p>
        <div class="hint">閲覧へ進む</div>

        <span class="gate-sweep" aria-hidden="true"></span>
      </a>

      <a class="location-card" href="dico-play.html" data-destination="dico-play.html">
        <span class="slit" aria-hidden="true"></span>
        <span class="sheen" aria-hidden="true"></span>

        <div class="card-top">
          <span class="title-plate"><h2>DiCo｜遊び場</h2></span>
          <span class="glyph">△</span>
        </div>
        <p>軽口。ノイズ。笑いの中に、たまに“本音”が落ちる。</p>
        <div class="hint">遊びに行く</div>

        <span class="gate-sweep" aria-hidden="true"></span>
      </a>

      <a class="location-card" href="shion-column.html" data-destination="shion-column.html">
        <span class="slit" aria-hidden="true"></span>
        <span class="sheen" aria-hidden="true"></span>

        <div class="card-top">
          <span class="title-plate"><h2>シオン｜コラム</h2></span>
          <span class="glyph">—</span>
        </div>
        <p>言葉で整える。整えすぎない。——余白のための記録。</p>
        <div class="hint">読む</div>

        <span class="gate-sweep" aria-hidden="true"></span>
      </a>
    </section>
  </main>

  <div class="sync-overlay" id="syncOverlay" aria-hidden="true">
    <div class="sync-box">
      <p>《現実座標を同期中…》</p>
      <p class="sync-sub">COORDINATE SYNC</p>
    </div>
  </div>

  <script>
    const overlay = document.getElementById('syncOverlay');
    const cards = document.querySelectorAll('.location-card');
    const pulseDot = document.getElementById('pulseDot');
    const tooltip = document.getElementById('tooltip');
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    let tooltipTimer = null;

    function showTooltip(text){
      tooltip.textContent = text;
      tooltip.classList.add('show');
      clearTimeout(tooltipTimer);
      tooltipTimer = setTimeout(()=> tooltip.classList.remove('show'), 1400);
    }

    // 走査線を1回、確実に発火（iOS対策：reflow）
    function playGateOnce(card){
      card.classList.remove('gate-on');
      void card.offsetWidth;
      card.classList.add('gate-on');

      setTimeout(() => card.classList.remove('gate-on'), 420);
    }

    // ドクン＝2拍（確実に2回）
    function playDoubleGate(card){
      card.classList.add('gate-armed');

      // 1拍目
      playGateOnce(card);

      // 2拍目
      setTimeout(() => playGateOnce(card), 260);

      // 終了
      setTimeout(() => card.classList.remove('gate-armed'), 900);
    }

    // Arete dot pulse
    function pulseArete(){
      pulseDot.animate([
        { boxShadow: '0 0 0 0 rgba(183,157,109,0.22)' },
        { boxShadow: '0 0 0 12px rgba(183,157,109,0.00)' }
      ], { duration: 520, easing: 'ease-out' });

      setTimeout(() => {
        pulseDot.animate([
          { boxShadow: '0 0 0 0 rgba(183,157,109,0.18)' },
          { boxShadow: '0 0 0 12px rgba(183,157,109,0.00)' }
        ], { duration: 520, easing: 'ease-out' });
      }, 320);
    }

    // Arete hover/click
    pulseDot.addEventListener('mouseenter', () => showTooltip('右目の奥が、ほんの少し熱い。'));
    pulseDot.addEventListener('click', () => {
      showTooltip('ドクン　／　ドクン');
      pulseArete();
      // 最上段カードに反応（雰囲気）
      const firstCard = document.querySelector('.location-card');
      if (firstCard) playDoubleGate(firstCard);
    });

    // Card click → 2拍ゲート → overlay（遅らせる）→ 遷移
    cards.forEach((card) => {
      card.addEventListener('click', (event) => {
        event.preventDefault();
        const destination = card.dataset.destination;

        if (prefersReducedMotion) {
          window.location.href = destination;
          return;
        }

        playDoubleGate(card);
        pulseArete();

        // overlayが先に被って見えない問題を回避：少し遅らせる
        setTimeout(() => overlay.classList.add('active'), 140);

        // 遷移は2拍が見えた後
        setTimeout(() => window.location.href = destination, 760);
      });
    });
  </script>
</body>
</html>
